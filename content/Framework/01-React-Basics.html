<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React åŸºç¡€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../global.css">
    <style>
        /* Minimal inline styles - Primarily rely on global.css and Tailwind */

        /* --- Base & Layout Adjustments --- */
        html {
            scroll-padding-top: 2rem; /* Adjust if header is sticky */
        }

        body {
            /* Base font, bg, color assumed from global.css */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-family: 'Inter', sans-serif; /* Ensure Inter font */
            background-color: var(--bg-color-lighter); /* Use global.css variable */
        }

        /* --- Typography (Leverage global.css .headX classes) --- */
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 2rem; /* Offset for sticky nav */
        }
        /* Increase bottom margin for headings for better whitespace */
        .head1 { margin-bottom: 1.5rem; } /* mb-6 */
        .head2 { margin-bottom: 1.25rem; } /* mb-5 */
        .head3 { margin-bottom: 0.75rem; } /* mb-3 */

        /* Style for frequency/level tags (Copied from 01-Network-Basics.html) */
        .level-tag {
            display: inline-block;
            margin-left: 0.5rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            padding: 0.1rem 0.5rem;
            border-radius: 0.25rem; /* rounded-sm */
            vertical-align: middle;
            border: 1px solid transparent;
        }

        .level-tag-high {
            background-color: var(--danger-color-light);
            color: var(--danger-color);
            border-color: var(--danger-color);
        }

        .level-tag-medium {
            background-color: var(--warning-color-light);
            color: var(--warning-color);
            border-color: var(--warning-color);
        }

        .level-tag-low {
            background-color: var(--secondary-color-light);
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        /* --- Code Block Styling (Leverage Prism theme and global.css) --- */
        article pre {
            font-family: var(--font-family-mono);
            border-radius: 0.375rem; /* rounded-md */
            margin: 1.5rem 0; /* Increased margin */
            padding: 1em;
            overflow-x: auto;
        }
        article pre code[class*="language-"] {
            background: none; color: inherit; padding: 0; border-radius: 0;
            font-size: inherit; font-family: inherit; line-height: inherit;
            text-shadow: none; white-space: pre; display: block;
        }
        /* Inline code styling */
         *:not(pre) > code {
            background-color: rgba(17, 24, 39, 0.05); /* Light gray background */
            color: #DC2626; /* Reddish text color */
            padding: 0.1em 0.3em;
            border-radius: 0.25rem;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em; /* Slightly smaller */
        }

        /* --- Card Adjustments --- */
        .content-card {
             /* Add transition for hover effects */
            transition: box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
            margin-bottom: 1.5rem; /* mb-6, ensure spacing */
        }
        /* Hover effect: slight shadow increase and lift */
        .content-card:hover {
            /* Use Tailwind shadow-lg or a slightly stronger custom shadow */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transform: translateY(-2px); /* Slight lift effect */
        }
        .content-section > .content-card + .content-card {
            margin-top: 2rem; /* Increased space between cards */
        }
        .content-card > *:last-child {
            margin-bottom: 0 !important;
        }
        /* Increase spacing within cards */
        .content-card p, .content-card ul, .content-card ol {
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-card ul, .content-card ol {
            padding-left: 1.5em;
        }
        .content-card li {
            margin-bottom: 0.5rem; /* mb-2 */
        }

        /* --- Information Blocks --- */
        .info-block {
            background-color: var(--primary-color-light); /* bg-blue-50 */
            border-left: 4px solid var(--primary-color); /* border-blue-500 */
            padding: 1rem; /* p-4 */
            margin: 1.5rem 0; /* my-6 */
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.9rem; /* text-sm */
            color: var(--text-color-default); /* text-gray-700 */
        }
        .info-block strong {
            color: var(--primary-color-dark); /* text-blue-700 */
        }
        .info-block code { /* Style inline code inside info blocks */
             background-color: rgba(59, 130, 246, 0.1); /* Lighter blue bg */
             color: var(--primary-color-dark);
             padding: 0.1em 0.3em;
             border-radius: 0.25rem;
             font-family: 'Roboto Mono', monospace;
             font-size: 0.9em;
        }
        .warning-block {
            background-color: var(--warning-color-light);
            border-left-color: var(--warning-color);
            color: #b45309; /* darker orange */
        }
         .warning-block strong {
             color: #92400e;
         }
         .warning-block code {
             background-color: rgba(249, 115, 22, 0.1);
             color: #b45309;
         }

        /* --- Fade-in Animation --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-section {
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* --- Mermaid Diagram Styling --- */
        .mermaid {
            margin: 2rem 0; /* Increased margin */
            text-align: center;
            background-color: var(--bg-color-light);
            padding: 1.5rem; /* Increased padding */
            border-radius: 0.5rem; /* rounded-lg */
            border: 1px solid var(--border-color-light);
            overflow-x: auto; /* Ensure horizontal scroll if needed */
        }
        .mermaid svg { max-width: 100%; height: auto; display: block; margin: auto; }

        /* --- Quiz Card Styling (Copied & adapted from example.html) --- */
        .quiz-card {
            background-color: var(--quiz-bg, var(--primary-color-light));
            border: 1px solid var(--border-color-default);
            border-left: 4px solid var(--quiz-border-color, var(--primary-color));
            border-radius: 0.5rem; /* rounded-lg */
            padding: var(--quiz-padding, 1.5rem); /* p-6 */
            margin-top: 2rem; /* Add top margin */
            margin-bottom: 1.5rem; /* mb-6 */
            box-shadow: var(--card-shadow-default); /* shadow-md */
        }
        .quiz-question { font-size: 1.1rem; font-weight: 500; color: var(--text-color-dark); margin-bottom: 1.25rem; display: flex; align-items: center; gap: 0.5rem; }
        .quiz-options { display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1.25rem; }
        .quiz-option { display: block; padding: 0.75rem 1rem; border: 1px solid var(--border-color-default); border-radius: 0.375rem; background-color: white; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; display: flex; align-items: center; }
        .quiz-option:hover { background-color: var(--quiz-option-hover-bg, rgba(59, 130, 246, 0.1)); border-color: var(--primary-color); }
        .quiz-option input[type="radio"] { margin-right: 0.75rem; width: 1rem; height: 1rem; accent-color: var(--primary-color); cursor: pointer; flex-shrink: 0; }
        .quiz-option span { flex-grow: 1; cursor: pointer; color: var(--text-color-default); font-size: 0.9rem; }
        .quiz-option.selected { border-color: var(--primary-color); background-color: rgba(59, 130, 246, 0.15); }
        .quiz-option.correct { border-color: var(--success-color); background-color: rgba(16, 185, 129, 0.1); }
        .quiz-option.incorrect { border-color: var(--danger-color); background-color: rgba(239, 68, 68, 0.1); }
        .quiz-feedback { margin-top: 1rem; padding: 0.75rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500; display: none; }
        .quiz-feedback.correct { background-color: var(--quiz-feedback-correct-bg); color: var(--quiz-feedback-correct-text); border: 1px solid var(--success-color); }
        .quiz-feedback.incorrect { background-color: var(--quiz-feedback-incorrect-bg); color: var(--quiz-feedback-incorrect-text); border: 1px solid var(--danger-color); }
        .quiz-feedback.warning { background-color: var(--warning-color-light); color: var(--warning-color); border: 1px solid var(--warning-color); }
        .quiz-toggle { /* Use button styles */ position: relative; overflow: hidden; display: inline-flex; align-items: center; gap: 0.25rem; }
        .quiz-toggle .material-icons { font-size: 1.1rem; transition: transform 0.3s ease-in-out; }
        .quiz-toggle .icon-arrow.rotated { transform: rotate(180deg); }
        .quiz-answer { max-height: 0; opacity: 0; transition: all 0.5s ease-in-out; overflow: hidden; padding-top: 0; padding-bottom: 0; margin-top: 0; border-top: 1px solid var(--border-color-light); }
        .quiz-answer.visible { max-height: 1000px; opacity: 1; padding-top: 1rem; padding-bottom: 1rem; margin-top: 1rem; overflow: auto; }

        /* --- Ripple Effect (Copied from example.html) --- */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.4); /* Use RGB for opacity */
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

    </style>
</head>

<body class="bg-gray-100">
    <div class="page-container">

        <aside class="local-side-nav">
            <h4 class="head4">React åŸºç¡€</h4>
            <ul id="local-toc">
                <li><a href="#intro" class="active"><span class="material-icons nav-icon">info</span>ç®€ä»‹</a></li>
                <li><a href="#jsx"><span class="material-icons nav-icon">code</span>JSX è¯­æ³•</a></li>
                 <li><a href="#fragments" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">filter_none</span>Fragments</a></li>
                <li><a href="#components"><span class="material-icons nav-icon">widgets</span>ç»„ä»¶</a></li>
                 <li><a href="#props-vs-state" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">compare_arrows</span>Props vs State</a></li>
                <li><a href="#state"><span class="material-icons nav-icon">tune</span>State (useState)</a></li>
                <li><a href="#lifecycle"><span class="material-icons nav-icon">hourglass_empty</span>ç”Ÿå‘½å‘¨æœŸ (useEffect)</a></li>
                <li><a href="#events"><span class="material-icons nav-icon">touch_app</span>äº‹ä»¶å¤„ç†</a></li>
                 <li><a href="#controlled-uncontrolled" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">rule</span>å—æ§ä¸éå—æ§ç»„ä»¶</a></li>
                <li><a href="#refs"><span class="material-icons nav-icon">attachment</span>Refs (useRef)</a></li>
                <li><a href="#hooks-rules"><span class="material-icons nav-icon">gavel</span>Hooks è§„åˆ™</a></li>
            </ul>
            <a href="../../index.html" class="back-link">
                &larr; è¿”å›å¤§çº²ç›®å½•
            </a>
        </aside>

        <main class="content-main">
            <article>
                <section id="intro" class="content-section fade-in-section" style="animation-delay: 0s;">
                    <h1 class="head1 flex items-center gap-2">
                        <span class="material-icons text-3xl text-blue-600">looks_one</span>(ä¸€) React åŸºç¡€
                    </h1>
                    <p>React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒé‡‡ç”¨ç»„ä»¶åŒ–æ€æƒ³ï¼Œå…è®¸å¼€å‘è€…å°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„éƒ¨åˆ†ã€‚æœ¬èŠ‚å°†ä»‹ç» React å¼€å‘ä¸­æœ€æ ¸å¿ƒçš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™äº›æ˜¯ç†è§£å’Œä½¿ç”¨ React çš„åŸºçŸ³ï¼Œä¹Ÿæ˜¯å‰ç«¯é¢è¯•ä¸­çš„é«˜é¢‘è€ƒç‚¹ã€‚</p>
                    <div class="info-block">ğŸ’¡
                        <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ç›¸åº”ä¸»é¢˜ã€‚æ‹¬å·å†…æ ‡æ³¨äº†çŸ¥è¯†ç‚¹çš„é‡è¦ç¨‹åº¦ã€‚éƒ¨åˆ†ç« èŠ‚æœ«å°¾åŒ…å«æµ‹éªŒã€‚
                    </div>
                </section>

                <section id="jsx" class="content-section fade-in-section" style="animation-delay: 0.05s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">code</span>JSX è¯­æ³•
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">description</span>åŸºæœ¬ç”¨æ³•</h3>
                        <p>JSX (JavaScript XML) æ˜¯ React çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå…è®¸ä½ åœ¨ JavaScript ä»£ç ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ç»“æ„ã€‚å®ƒä½¿å¾— UI çš„æè¿°æ›´åŠ ç›´è§‚å’Œå£°æ˜å¼ã€‚</p>
                        <p>æ³¨æ„ï¼šJSX æœ€ç»ˆä¼šè¢« Babel ç­‰å·¥å…·ç¼–è¯‘æˆæ™®é€šçš„ JavaScript å‡½æ•°è°ƒç”¨ï¼ˆ<code>React.createElement()</code>ï¼‰ï¼Œæµè§ˆå™¨æœ¬èº«å¹¶ä¸ç›´æ¥ç†è§£ JSXã€‚</p>
                        <pre><code class="language-javascript">// JSX Example
const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;;

// The JSX above is equivalent to this JavaScript call:
const elementJS = React.createElement('h1', null, 'Hello, world!');</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">integration_instructions</span>åµŒå…¥è¡¨è¾¾å¼</h3>
                        <p>ä½ å¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨èŠ±æ‹¬å· <code>{}</code> åµŒå…¥ä»»ä½•æœ‰æ•ˆçš„ JavaScript è¡¨è¾¾å¼ã€‚è¿™ä½¿å¾—åŠ¨æ€æ¸²æŸ“å†…å®¹å˜å¾—å®¹æ˜“ã€‚</p>
                        <pre><code class="language-javascript">const name = "Gemini";
const user = { firstName: "React", lastName: "User" };

function formatName(user) {
  return user.firstName + ' ' + user.lastName;
}

// Examples of embedding expressions
const greeting = &lt;h1&gt;Hello, {name}!&lt;/h1&gt;; // Embed a variable
const fullName = &lt;p&gt;Full Name: {formatName(user)}&lt;/p&gt;; // Embed function call result
const calculation = &lt;div&gt;Result: {2 * 3}&lt;/div&gt;; // Embed arithmetic operation
const elementWithClass = &lt;div className="container"&gt;Content&lt;/div&gt;; // Use className instead of class
const elementWithStyle = &lt;p style={{ color: 'blue', fontSize: '16px' }}&gt;Styled Text&lt;/p&gt;; // Embed style object
</code></pre>
                        <div class="info-block">
                            <p><strong>æ³¨æ„ï¼š</strong></p>
                            <ul>
                                <li>JSX å±æ€§åä½¿ç”¨é©¼å³°å‘½åæ³• (camelCase)ï¼Œä¾‹å¦‚ <code>className</code> å¯¹åº” HTML çš„ <code>class</code>ï¼Œ<code>onClick</code> å¯¹åº” <code>onclick</code>ï¼Œ<code>htmlFor</code> å¯¹åº” <code>for</code>ã€‚</li>
                                <li>æ ·å¼ (<code>style</code>) æ¥å—ä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œå±æ€§åä¹Ÿä½¿ç”¨é©¼å³°å‘½åæ³• (å¦‚ <code>fontSize</code>, <code>backgroundColor</code>)ã€‚</li>
                                <li>JSX è¡¨è¾¾å¼å¿…é¡»åŒ…å«åœ¨å•ä¸ªçˆ¶å…ƒç´ ä¸­ã€‚å¦‚æœä¸æƒ³æ·»åŠ é¢å¤–çš„ DOM èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;React.Fragment&gt;</code> æˆ–å…¶ç®€å†™è¯­æ³• <code>&lt;&gt;</code> (è§ä¸‹æ–‡)ã€‚</li>
                            </ul>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">rule</span>æ¡ä»¶æ¸²æŸ“</h3>
                        <p>åœ¨ React ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ JavaScript è¯­æ³•æ¥æ ¹æ®æ¡ä»¶å†³å®šæ¸²æŸ“å“ªäº›å…ƒç´ ã€‚</p>
                        <p><strong>1. ä½¿ç”¨ <code>if/else</code> (åœ¨ return è¯­å¥å¤–éƒ¨):</strong></p>
                        <pre><code class="language-javascript">function Greeting({ isLoggedIn }) {
  if (isLoggedIn) {
    return &lt;h1&gt;Welcome back!&lt;/h1&gt;;
  } else {
    return &lt;h1&gt;Please sign up.&lt;/h1&gt;;
  }
}</code></pre>
                        <p><strong>2. ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ (<code>condition ? exprIfTrue : exprIfFalse</code>) (åœ¨ JSX å†…éƒ¨):</strong></p>
                        <pre><code class="language-javascript">function LoginStatus({ isLoggedIn }) {
  return (
    &lt;div&gt;
      User is &lt;b&gt;{isLoggedIn ? 'currently' : 'not'}&lt;/b&gt; logged in.
    &lt;/div&gt;
  );
}</code></pre>
                        <p><strong>3. ä½¿ç”¨é€»è¾‘ <code>&&</code> è¿ç®—ç¬¦ (<code>condition && expression</code>):</strong></p>
                        <p>å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™æ¸²æŸ“ <code>&&</code> åé¢çš„è¡¨è¾¾å¼ï¼›å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ (æ¸²æŸ“ <code>false</code>ï¼Œåœ¨ DOM ä¸­æ— æ•ˆæœ)ã€‚</p>
                        <pre><code class="language-javascript">function Mailbox({ unreadMessages }) {
  return (
    &lt;div&gt;
      <h1>Hello!</h1>
      {/* Only render if there are unread messages */}
      {unreadMessages.length > 0 &&
        &lt;h2&gt;
          You have {unreadMessages.length} unread messages.
        &lt;/h2&gt;
      }
    &lt;/div&gt;
  );
}</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">list_alt</span>åˆ—è¡¨æ¸²æŸ“ä¸ Keys</h3>
                        <p>é€šå¸¸ä½¿ç”¨ JavaScript çš„ <code>.map()</code> æ–¹æ³•æ¥éå†æ•°ç»„ï¼Œå¹¶ä¸ºæ¯ä¸ªå…ƒç´ è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</p>
                        <p><strong>å…³é”®ï¼š</strong>ä¸ºåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›ä¸€ä¸ª<strong class="text-red-600">å”¯ä¸€ä¸”ç¨³å®š</strong>çš„ <code>key</code> propã€‚<code>key</code> å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ã€æ·»åŠ æˆ–åˆ é™¤ï¼Œä»è€Œé«˜æ•ˆåœ°æ›´æ–° UIã€‚</p>
                        <pre><code class="language-javascript">const numbers = [1, 2, 3, 4, 5];

function NumberList() {
  const listItems = numbers.map((number) =>
    // key should be a stable and unique identifier, often the item's ID from data
    &lt;li key={number.toString()}&gt;
      Number {number}
    &lt;/li&gt;
  );
  return (
    &lt;ul&gt;{listItems}&lt;/ul&gt;
  );
}

// Can also use map directly within JSX
function TodoList({ todos }) { // Assuming todos = [{id: 'a1', text: '...'}, {id: 'b2', text: '...'}]
  return (
    &lt;ul&gt;
      {todos.map((todo) => (
        &lt;li key={todo.id}&gt;{todo.text}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}
</code></pre>
                        <div class="warning-block">
                            <p><strong>ä¸ºä»€ä¹ˆ <code>key</code> å¦‚æ­¤é‡è¦ï¼Ÿ</strong></p>
                            <ul>
                                <li><strong>é«˜æ•ˆ Diffing:</strong> <code>key</code> æ˜¯ React åœ¨æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘æ—¶ç”¨æ¥åŒ¹é…å­å…ƒç´ çš„ä¸»è¦ä¾æ®ã€‚æœ‰äº†ç¨³å®šçš„ keyï¼ŒReact å¯ä»¥å¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯æ–°å¢ã€åˆ é™¤è¿˜æ˜¯ä»…ä»…ç§»åŠ¨æˆ–æ›´æ–°äº†å†…å®¹ã€‚</li>
                                <li><strong>é¿å…çŠ¶æ€æ··ä¹±:</strong> å¦‚æœä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º keyï¼Œå½“åˆ—è¡¨é¡¹è¢«æ·»åŠ ã€åˆ é™¤æˆ–é‡æ–°æ’åºæ—¶ï¼Œç´¢å¼•ä¼šæ”¹å˜ã€‚è¿™å¯èƒ½å¯¼è‡´ React é”™è¯¯åœ°å¤ç”¨å¸¦æœ‰æ—§çŠ¶æ€çš„ç»„ä»¶å®ä¾‹ï¼Œå¼•å‘éš¾ä»¥é¢„æ–™çš„ bugã€‚</li>
                                <li><strong>æ€§èƒ½:</strong> æ²¡æœ‰ key æˆ–ä½¿ç”¨ä¸ç¨³å®š key ä¼šè¿«ä½¿ React è¿›è¡Œæ›´å¤šä¸å¿…è¦çš„ DOM æ“ä½œã€‚</li>
                                <li><strong>è¦æ±‚:</strong> <code>key</code> åªéœ€è¦åœ¨<strong class="text-red-600">åŒä¸€å±‚çº§çš„å…„å¼Ÿå…ƒç´ ä¹‹é—´</strong>ä¿æŒå”¯ä¸€ï¼Œä¸éœ€è¦å…¨å±€å”¯ä¸€ã€‚å®ƒåº”è¯¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ç±»å‹ã€‚</li>
                                <li><strong>æœ€ä½³å®è·µ:</strong> ä¼˜å…ˆä½¿ç”¨æ•°æ®ä¸­è‡ªå¸¦çš„å”¯ä¸€ ID (å¦‚æ•°æ®åº“ ID) ä½œä¸º keyã€‚é¿å…ä½¿ç”¨éšæœºæ•°æˆ–ä¸ç¨³å®šçš„å€¼ã€‚ä»…åœ¨åˆ—è¡¨é¡¹æ—¢æ²¡æœ‰ ID ä¸”é¡ºåºæ°¸è¿œä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ‰å¯è€ƒè™‘ä½¿ç”¨ç´¢å¼•ä½œä¸º keyï¼Œä½†ä»éœ€è°¨æ…ã€‚</li>
                            </ul>
                        </div>
                    </div>
                    <div class="quiz-card" id="quiz-jsx">
                        <div class="quiz-question"><span class="material-icons">quiz</span>JSX æµ‹éªŒï¼šåœ¨ React ä¸­ï¼Œä¸ºä»€ä¹ˆå¼ºçƒˆæ¨èä¸ºåˆ—è¡¨æ¸²æŸ“ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›ä¸€ä¸ªå”¯ä¸€çš„ `key` propï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_jsx" value="a"><span>ä¸ºäº†ç»™å…ƒç´ æ·»åŠ  CSS ç±»åã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_jsx" value="b"><span>ä¸ºäº†å¸®åŠ© React é«˜æ•ˆåœ°è¯†åˆ«å’Œæ›´æ–°åˆ—è¡¨é¡¹ï¼Œé¿å…çŠ¶æ€æ··ä¹±ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_jsx" value="c"><span>ä¸ºäº†åœ¨å…ƒç´ ä¸Šç»‘å®šç‚¹å‡»äº‹ä»¶ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_jsx" value="d"><span>ä¸ºäº†è®©ä»£ç çœ‹èµ·æ¥æ›´æ•´æ´ã€‚</span></label>
                        </div>
                        <div class="quiz-feedback" id="feedback-q_jsx"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_jsx', 'b', this)">
                            <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer">
                            <p><strong>ç­”æ¡ˆ:</strong> B. ä¸ºäº†å¸®åŠ© React é«˜æ•ˆåœ°è¯†åˆ«å’Œæ›´æ–°åˆ—è¡¨é¡¹ï¼Œé¿å…çŠ¶æ€æ··ä¹±ã€‚</p>
                            <p><strong>è§£æ:</strong> `key` prop æ˜¯ React Diffing ç®—æ³•ç”¨æ¥è¯†åˆ«åˆ—è¡¨ä¸­å…ƒç´ èº«ä»½çš„å…³é”®ã€‚æä¾›ç¨³å®šä¸”å”¯ä¸€çš„ key å¯ä»¥è®© React å‡†ç¡®åœ°çŸ¥é“å“ªäº›å…ƒç´ æ˜¯æ–°å¢ã€åˆ é™¤ã€ç§»åŠ¨æˆ–æ›´æ–°çš„ï¼Œä»è€Œè¿›è¡Œæœ€é«˜æ•ˆçš„ DOM æ“ä½œï¼Œå¹¶æ­£ç¡®åœ°ä¿ç•™æˆ–é”€æ¯ç»„ä»¶çŠ¶æ€ã€‚</p>
                        </div>
                    </div>
                </section>

                 <section id="fragments" class="content-section fade-in-section" style="animation-delay: 0.1s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">filter_none</span>React Fragments
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">layers</span>è§£å†³å¤šä½™çš„ DOM èŠ‚ç‚¹</h3>
                        <p>React ç»„ä»¶çš„ <code>render</code> æ–¹æ³•æˆ–å‡½æ•°ç»„ä»¶çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª<strong class="text-red-600">å•ä¸€çš„æ ¹å…ƒç´ </strong>ã€‚æœ‰æ—¶ä¸ºäº†æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ <code>&lt;div&gt;</code> åŒ…è£…å™¨ï¼Œä½†è¿™å¯èƒ½ä¼šåœ¨æœ€ç»ˆçš„ DOM ç»“æ„ä¸­å¼•å…¥ä¸å¿…è¦çš„å±‚çº§ã€‚</p>
                        <p>React Fragments å…è®¸ä½ å°†å¤šä¸ªå­å…ƒç´ åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ã€‚</p>
                        <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p>
                        <pre><code class="language-javascript">import React from 'react'; // React import needed for React.Fragment

function Columns() {
  return (
    // ä½¿ç”¨ React.Fragment
    &lt;React.Fragment&gt;
      &lt;td&gt;Column 1&lt;/td&gt;
      &lt;td&gt;Column 2&lt;/td&gt;
    &lt;/React.Fragment&gt;
  );
}

function ShortSyntaxColumns() {
  return (
    // ä½¿ç”¨çŸ­è¯­æ³• <> (æ›´å¸¸ç”¨ï¼Œæ— éœ€å¯¼å…¥ React)
    &lt;&gt;
      &lt;td&gt;Column A&lt;/td&gt;
      &lt;td&gt;Column B&lt;/td&gt;
    &lt;/&gt;
  );
}

function Table() {
  return (
    &lt;table border="1"&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;Columns /&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;ShortSyntaxColumns /&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  );
}</code></pre>
                        <p>çŸ­è¯­æ³• <code>&lt;&gt;...&lt;/&gt;</code> æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚æ³¨æ„ï¼šçŸ­è¯­æ³•ä¸æ”¯æŒæ·»åŠ  <code>key</code> æˆ–å…¶ä»–å±æ€§ï¼Œå¦‚æœéœ€è¦ keyï¼ˆä¾‹å¦‚åœ¨åˆ—è¡¨æ¸²æŸ“ä¸­ä½¿ç”¨ Fragmentï¼‰ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ˜¾å¼çš„ <code>&lt;React.Fragment key={item.id}&gt;...&lt;/React.Fragment&gt;</code> è¯­æ³•ã€‚</p>
                    </div>
                </section>

                <section id="components" class="content-section fade-in-section" style="animation-delay: 0.15s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">widgets</span>ç»„ä»¶
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">functions</span>å‡½æ•°ç»„ä»¶ (Function Components) - é‡ç‚¹</h3>
                        <p>è¿™æ˜¯ç°ä»£ React å¼€å‘æ¨èçš„æ–¹å¼ã€‚å‡½æ•°ç»„ä»¶æ˜¯æ¥æ”¶ <code>props</code> å¯¹è±¡ä½œä¸ºå‚æ•°å¹¶è¿”å› JSX çš„ JavaScript å‡½æ•°ã€‚</p>
                        <p>é€šè¿‡ä½¿ç”¨ Hooks (å¦‚ <code>useState</code>, <code>useEffect</code>)ï¼Œå‡½æ•°ç»„ä»¶å¯ä»¥æ‹¥æœ‰çŠ¶æ€ (state) å’Œç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§ã€‚</p>
                        <pre><code class="language-javascript">// A simple function component
function Welcome(props) {
  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
}

// Using ES6 destructuring for props
function Greeting({ name, message }) {
  return (
    &lt;div&gt;
      &lt;h2&gt;{message}, {name}!&lt;/h2&gt;
    &lt;/div&gt;
  );
}

// Using components
function App() {
    return (
      &lt;div&gt;
        &lt;Welcome name="Sara" /&gt;
        &lt;Greeting name="Cahal" message="Good morning" /&gt;
      &lt;/div&gt;
    );
}</code></pre>
                        <p><strong>ä¼˜ç‚¹ï¼š</strong>é€šå¸¸æ›´ç®€æ´ã€æ˜“äºé˜…è¯»ã€æµ‹è¯•å’Œç†è§£ï¼›ä¸ Hooks ç»“åˆä½¿ç”¨åŠŸèƒ½å¼ºå¤§ã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">view_quilt</span>ç±»ç»„ä»¶ (Class Components) - äº†è§£å³å¯</h3>
                        <p>è¿™æ˜¯æ—©æœŸ React çš„ä¸»è¦æ–¹å¼ã€‚ç±»ç»„ä»¶æ˜¯ç»§æ‰¿è‡ª <code>React.Component</code> çš„ ES6 ç±»ã€‚</p>
                        <ul>
                            <li>é€šè¿‡ <code>this.props</code> è®¿é—® propsã€‚</li>
                            <li>é€šè¿‡ <code>this.state</code> å’Œ <code>this.setState()</code> ç®¡ç†å†…éƒ¨çŠ¶æ€ã€‚</li>
                            <li>æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå¦‚ <code>componentDidMount</code>, <code>componentDidUpdate</code>, <code>componentWillUnmount</code>ï¼‰ã€‚</li>
                            <li>å¿…é¡»å®ç° <code>render()</code> æ–¹æ³•æ¥è¿”å› JSXã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">import React from 'react';

class WelcomeClass extends React.Component {
  render() {
    // Access props via this.props
    return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
  }
}

// Using a class component
const element = &lt;WelcomeClass name="Classy User" /&gt;;</code></pre>
                        <p>è™½ç„¶ç°åœ¨ä¸æ¨èç¼–å†™æ–°çš„ç±»ç»„ä»¶ï¼Œä½†ç†è§£å…¶åŸºæœ¬æ¦‚å¿µæœ‰åŠ©äºç»´æŠ¤æ—§ä»£ç åº“å’Œç†è§£ React çš„æ¼”å˜ã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">input</span>Props ä¼ é€’</h3>
                        <p>Props (properties çš„ç¼©å†™) æ˜¯ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®çš„ä¸»è¦æ–¹å¼ï¼Œéµå¾ª<strong class="text-blue-600">è‡ªé¡¶å‘ä¸‹</strong>çš„å•å‘æ•°æ®æµã€‚</p>
                         <div class="mermaid">
                          graph TD
                          A(çˆ¶ç»„ä»¶ App) -->|"props: name, age, email"| B("å­ç»„ä»¶ UserProfile");
                          A -->|"props: {...userData}"| C(å­ç»„ä»¶ UserProfile);
                          B -- "è¯»å– props (åªè¯»)" --> D{UI æ˜¾ç¤º};
                          C -- "è¯»å– props (åªè¯»)" --> D;

                          style A fill:#e0f2fe,stroke:#0ea5e9,stroke-width:2px
                          style B fill:#f0fdfa,stroke:#0d9488,stroke-width:1px
                          style C fill:#f0fdfa,stroke:#0d9488,stroke-width:1px
                          style D fill:#f1f5f9,stroke:#64748b
                         </div>
                        <ul>
                            <li>çˆ¶ç»„ä»¶é€šè¿‡ JSX å±æ€§å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li>
                            <li>å­ç»„ä»¶é€šè¿‡å…¶å‚æ•°ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰æˆ– <code>this.props</code>ï¼ˆç±»ç»„ä»¶ï¼‰æ¥æ”¶è¿™äº›æ•°æ®ã€‚</li>
                            <li>Props å¯¹äºå­ç»„ä»¶æ¥è¯´æ˜¯<strong class="text-red-600">åªè¯»</strong>çš„ã€‚å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹æ¥æ”¶åˆ°çš„ propsã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯æ•°æ®æµçš„å¯é¢„æµ‹æ€§ã€‚å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œåº”è¯¥ç”±æ‹¥æœ‰è¯¥æ•°æ®çš„çˆ¶ç»„ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå¹¶é€šè¿‡ props é‡æ–°ä¼ é€’ï¼Œæˆ–è€…ä½¿ç”¨çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">function UserProfile({ name, age, email }) { // Child component receives props
  return (
    &lt;div className="border p-4 rounded bg-gray-50 mt-4"&gt;
      &lt;p&gt;&lt;strong&gt;Name:&lt;/strong&gt; {name}&lt;/p&gt;
      &lt;p&gt;&lt;strong&gt;Age:&lt;/strong&gt; {age}&lt;/p&gt;
      &lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; {email}&lt;/p&gt;
    &lt;/div&gt;
  );
}

function App() { // Parent component
  const userData = { name: "Alice", age: 30, email: "alice@example.com" };
  return (
    &lt;div&gt;
      &lt;h2 class="head4"&gt;ç”¨æˆ·ä¿¡æ¯&lt;/h2&gt;
      {/* Parent passes data via attributes */}
      &lt;UserProfile
        name={userData.name}
        age={userData.age}
        email={userData.email}
      /&gt;
      {/* Can use spread operator to pass object properties */}
      {/* &lt;UserProfile {...userData} /&gt; */}
    &lt;/div&gt;
  );
}</code></pre>
                        <p><code>props.children</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ propï¼Œå®ƒåŒ…å«äº†ç»„ä»¶æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ã€‚</p>
                         <pre><code class="language-javascript">function Card({ children, title }) {
  // children prop contains the content between <Card> and </Card>
  return (
    &lt;div className="border rounded-lg p-4 shadow bg-white my-4"&gt;
      {title && &lt;h3 className="head5 mt-0 mb-3 text-indigo-700"&gt;{title}&lt;/h3&gt;}
      {children}
    &lt;/div&gt;
  );
}

function AppLayout() {
  return (
    &lt;Card title="ä¿¡æ¯å¡ç‰‡"&gt;
      &lt;p&gt;è¿™æ®µå†…å®¹å°†ä½œä¸º props.children ä¼ é€’ç»™ Card ç»„ä»¶ã€‚&lt;/p&gt;
      &lt;button className="button button-secondary"&gt;å¡ç‰‡å†…æŒ‰é’®&lt;/button&gt;
    &lt;/Card&gt;
  );
}</code></pre>
                    </div>
                     <div class="quiz-card" id="quiz-components">
                        <div class="quiz-question"><span class="material-icons">quiz</span>ç»„ä»¶æµ‹éªŒï¼šå…³äº React çš„ Propsï¼Œä»¥ä¸‹å“ªä¸ªè¯´æ³•æ˜¯æ­£ç¡®çš„ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_components" value="a"><span>Props æ˜¯ç»„ä»¶å†…éƒ¨çš„å¯å˜çŠ¶æ€ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_components" value="b"><span>å­ç»„ä»¶å¯ä»¥ç›´æ¥ä¿®æ”¹ä»çˆ¶ç»„ä»¶æ¥æ”¶åˆ°çš„ Propsã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_components" value="c"><span>Props æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„åªè¯»å±æ€§ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_components" value="d"><span>åªæœ‰ç±»ç»„ä»¶æ‰èƒ½æ¥æ”¶ Propsã€‚</span></label>
                        </div>
                        <div class="quiz-feedback" id="feedback-q_components"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_components', 'c', this)">
                             <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer">
                            <p><strong>ç­”æ¡ˆ:</strong> C. Props æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„åªè¯»å±æ€§ã€‚</p>
                            <p><strong>è§£æ:</strong> Props æ˜¯ React ä¸­å®ç°è‡ªé¡¶å‘ä¸‹å•å‘æ•°æ®æµçš„å…³é”®æœºåˆ¶ã€‚çˆ¶ç»„ä»¶é€šè¿‡å±æ€§å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶æ¥æ”¶è¿™äº›æ•°æ®ä½œä¸º propsï¼Œä½†ä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒä»¬ã€‚State æ‰æ˜¯ç»„ä»¶å†…éƒ¨çš„å¯å˜æ•°æ®ã€‚å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶éƒ½å¯ä»¥æ¥æ”¶ Propsã€‚</p>
                        </div>
                    </div>
                </section>

                 <section id="props-vs-state" class="content-section fade-in-section" style="animation-delay: 0.2s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">compare_arrows</span>Props vs State å¯¹æ¯”
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">difference</span>æ ¸å¿ƒåŒºåˆ«</h3>
                        <p>Props å’Œ State æ˜¯ React ç»„ä»¶ä¸­æ•°æ®çš„ä¸¤ä¸ªä¸»è¦æ¥æºï¼Œç†è§£å®ƒä»¬çš„åŒºåˆ«è‡³å…³é‡è¦ã€‚</p>
                         <div class="mermaid">
                            graph LR
                                subgraph çˆ¶ç»„ä»¶
                                    PState[å†…éƒ¨ State] -- "è®¡ç®—/è½¬æ¢" --> PPropsOut(ä¼ ç»™å­ç»„ä»¶çš„ Props)
                                end
                                subgraph å­ç»„ä»¶
                                    CPropsIn(æ¥æ”¶åˆ°çš„ Props) -- "å½±å“æ¸²æŸ“" --> CUI[UI è¾“å‡º]
                                    CState[å†…éƒ¨ State] -- "å½±å“æ¸²æŸ“" --> CUI
                                    CUI -- "ç”¨æˆ·äº¤äº’" --> CEventHandler{äº‹ä»¶å¤„ç†}
                                    CEventHandler -- "æ›´æ–° State" --> CState
                                end
                                PPropsOut --> CPropsIn

                                style PState fill:#fffbeb,stroke:#d97706
                                style CState fill:#fffbeb,stroke:#d97706
                                style PPropsOut fill:#eff6ff,stroke:#3b82f6
                                style CPropsIn fill:#eff6ff,stroke:#3b82f6
                                style CUI fill:#f3f4f6,stroke:#6b7280
                                style CEventHandler fill:#ecfdf5,stroke:#10b981
                         </div>
                        <div class="overflow-x-auto mt-6">
                            <table class="w-full border border-collapse">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="border p-3 text-left">ç‰¹æ€§</th>
                                        <th class="border p-3 text-left">Props</th>
                                        <th class="border p-3 text-left">State</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border p-3 font-medium">æ¥æº</td>
                                        <td class="border p-3">ä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥</td>
                                        <td class="border p-3">åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰å’Œç®¡ç†</td>
                                    </tr>
                                    <tr>
                                        <td class="border p-3 font-medium">å¯å˜æ€§</td>
                                        <td class="border p-3"><strong class="text-red-600">åªè¯»</strong> (Immutable)ã€‚å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ã€‚</td>
                                        <td class="border p-3"><strong class="text-green-600">å¯å˜</strong> (Mutable)ã€‚ç»„ä»¶å¯ä»¥é€šè¿‡ <code>setState</code> å‡½æ•°ä¿®æ”¹ã€‚</td>
                                    </tr>
                                     <tr>
                                        <td class="border p-3 font-medium">æ‰€æœ‰æƒ</td>
                                        <td class="border p-3">ç”±çˆ¶ç»„ä»¶æ‹¥æœ‰å’Œæ§åˆ¶</td>
                                        <td class="border p-3">ç”±ç»„ä»¶è‡ªèº«æ‹¥æœ‰å’Œæ§åˆ¶</td>
                                    </tr>
                                    <tr>
                                        <td class="border p-3 font-medium">æ•°æ®æµ</td>
                                        <td class="border p-3">å•å‘ (ä»çˆ¶åˆ°å­)</td>
                                        <td class="border p-3">ç»„ä»¶å†…éƒ¨ç®¡ç†ï¼Œæ›´æ–°ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</td>
                                    </tr>
                                    <tr>
                                        <td class="border p-3 font-medium">ç”¨é€”</td>
                                        <td class="border p-3">é…ç½®å’Œå®šåˆ¶å­ç»„ä»¶çš„å¤–è§‚å’Œè¡Œä¸º</td>
                                        <td class="border p-3">ç®¡ç†ç»„ä»¶å†…éƒ¨éšæ—¶é—´å˜åŒ–çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€è®¡æ—¶å™¨ã€API å“åº”ï¼‰</td>
                                    </tr>
                                     <tr>
                                        <td class="border p-3 font-medium">è®¿é—®æ–¹å¼ (å‡½æ•°ç»„ä»¶)</td>
                                        <td class="border p-3">é€šè¿‡å‡½æ•°å‚æ•°æ¥æ”¶ (<code>props</code> æˆ–è§£æ„ <code>{ propName }</code>)</td>
                                        <td class="border p-3">é€šè¿‡ <code>useState</code> Hook è¿”å›çš„æ•°ç»„ç¬¬ä¸€é¡¹è®¿é—®</td>
                                    </tr>
                                     <tr>
                                        <td class="border p-3 font-medium">æ›´æ–°æ–¹å¼ (å‡½æ•°ç»„ä»¶)</td>
                                        <td class="border p-3">ç”±çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“å¹¶ä¼ é€’æ–°çš„ props</td>
                                        <td class="border p-3">é€šè¿‡ <code>useState</code> Hook è¿”å›çš„æ•°ç»„ç¬¬äºŒé¡¹ (<code>setState</code> å‡½æ•°) æ›´æ–°</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="info-block mt-6">
                            <strong>æ€»ç»“ï¼š</strong>å¯ä»¥å°† Props è§†ä¸ºç»„ä»¶çš„é…ç½®å‚æ•°ï¼ˆç”±å¤–éƒ¨ä¼ å…¥ä¸”ä¸å¯å˜ï¼‰ï¼Œè€Œ State åˆ™æ˜¯ç»„ä»¶å†…éƒ¨è‡ªå·±ç»´æŠ¤çš„çŠ¶æ€ï¼ˆå¯éšæ—¶é—´æ”¹å˜ï¼‰ã€‚ä¸€ä¸ªç»„ä»¶åº”è¯¥å°½å¯èƒ½åœ°**æ— çŠ¶æ€** (stateless)ï¼Œåªä¾èµ– Props æ¥æ¸²æŸ“ã€‚åªæœ‰å½“ç»„ä»¶éœ€è¦ç®¡ç†éšæ—¶é—´å˜åŒ–ä¸”ä¸é€‚åˆç”±çˆ¶ç»„ä»¶æ§åˆ¶çš„æ•°æ®æ—¶ï¼Œæ‰åº”è¯¥ä½¿ç”¨ Stateã€‚
                        </div>
                    </div>
                </section>

                <section id="state" class="content-section fade-in-section" style="animation-delay: 0.25s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">tune</span>State (useState Hook)
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">help_outline</span>ä»€ä¹ˆæ˜¯ Stateï¼Ÿ</h3>
                        <p>State æ˜¯ç»„ä»¶å†…éƒ¨ç§æœ‰çš„ã€å¯å˜çš„æ•°æ®ã€‚å½“ state å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶ä»¥åæ˜ è¿™äº›å˜åŒ–ã€‚</p>
                        <p>ä¸ props ä¸åŒï¼Œstate ç”±ç»„ä»¶è‡ªèº«ç®¡ç†ã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">construction</span><code>useState</code> Hook åŸºæœ¬ç”¨æ³•</h3>
                        <p><code>useState</code> æ˜¯ React æä¾›çš„ä¸€ä¸ª Hookï¼Œå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ å’Œç®¡ç† stateã€‚</p>
                        <ul>
                            <li>è°ƒç”¨ <code>useState(initialState)</code> æ¥å£°æ˜ä¸€ä¸ª state å˜é‡ï¼Œ<code>initialState</code> æ˜¯è¯¥ state çš„åˆå§‹å€¼ã€‚</li>
                            <li>å®ƒè¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š<code>[currentState, setStateFunction]</code>ã€‚
                                <ul>
                                    <li><code>currentState</code>: å½“å‰çŠ¶æ€çš„å€¼ã€‚</li>
                                    <li><code>setStateFunction</code>: ä¸€ä¸ªç”¨äºæ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼š<strong class="text-red-600">å®‰æ’</strong>ä¸€æ¬¡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                        <pre><code class="language-javascript">import React, { useState } from 'react';

function Counter() {
  // Declare a state variable named 'count' with an initial value of 0
  const [count, setCount] = useState(0);

  // Event handler to update the count
  const increment = () => {
    // Call setCount to schedule an update
    setCount(count + 1);
    // Note: 'count' variable here still holds the value from the *current* render
    // console.log(count); // Might log the old value
  };

  const decrement = () => {
    // Recommended: Use functional update if the new state depends on the previous state
    setCount(prevCount => prevCount - 1);
  };

  const reset = () => {
      setCount(0); // Set to a specific value
  }

  console.log("Counter component rendered"); // See how often this logs

  return (
    &lt;div className="space-x-2"&gt; {/* Added spacing for buttons */}
      &lt;p className="mb-3"&gt;Current Count: {count}&lt;/p&gt;
      &lt;button onClick={increment} className="button button-primary"&gt;Increment&lt;/button&gt;
      &lt;button onClick={decrement} className="button button-secondary"&gt;Decrement&lt;/button&gt;
      &lt;button onClick={reset} className="button button-danger"&gt;Reset&lt;/button&gt;
    &lt;/div&gt;
  );
}</code></pre>
                        <div class="warning-block">
                            <p><strong><code>useState</code> æ³¨æ„äº‹é¡¹ï¼š</strong></p>
                            <ul>
                                <li><strong>Hooks è§„åˆ™:</strong> åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„<strong class="text-red-600">é¡¶å±‚</strong>è°ƒç”¨ Hooksï¼Œä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶è¯­å¥æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ã€‚ï¼ˆè¯¦è§ Hooks è§„åˆ™éƒ¨åˆ†ï¼‰</li>
                                <li><strong>å¼‚æ­¥æ›´æ–°:</strong> è°ƒç”¨ <code>setState</code> å‡½æ•°<strong class="text-red-600">ä¸ä¼š</strong>ç«‹å³æ”¹å˜ state çš„å€¼ï¼Œè€Œæ˜¯å®‰æ’ä¸€æ¬¡æ›´æ–°ã€‚React å¯èƒ½ä¼šå°†å¤šæ¬¡ <code>setState</code> è°ƒç”¨åˆå¹¶ä¸ºä¸€æ¬¡æ›´æ–°ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚å› æ­¤ï¼Œä¸è¦ä¾èµ–å½“å‰çš„ state å€¼æ¥è®¡ç®—ä¸‹ä¸€ä¸ª stateï¼ˆé™¤éä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼‰ã€‚</li>
                                <li><strong>å‡½æ•°å¼æ›´æ–°:</strong> å¦‚æœæ–°çŠ¶æ€ä¾èµ–äºå‰ä¸€ä¸ªçŠ¶æ€ï¼Œåº”ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼š<code>setState(prevState => newState)</code>ã€‚è¿™ç¡®ä¿ä½ æ€»æ˜¯åŸºäºæœ€æ–°çš„çŠ¶æ€è¿›è¡Œè®¡ç®—ã€‚</li>
                                <li><strong>ä¸å¯ç›´æ¥ä¿®æ”¹:</strong> æ°¸è¿œä¸è¦ç›´æ¥ä¿®æ”¹ state å˜é‡ (<code>count = count + 1</code> æ˜¯é”™è¯¯çš„)ï¼Œå¿…é¡»ä½¿ç”¨ <code>setState</code> å‡½æ•°æ¥è§¦å‘æ›´æ–°å’Œé‡æ–°æ¸²æŸ“ã€‚</li>
                                <li><strong>å¯¹è±¡å’Œæ•°ç»„çŠ¶æ€:</strong> å½“çŠ¶æ€æ˜¯å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œæ›´æ–°æ—¶éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæœ‰çš„ã€‚ä¾‹å¦‚ï¼š<code>setItems([...items, newItem])</code> æˆ– <code>setUser({...user, name: newName})</code>ã€‚</li>
                            </ul>
                        </div>
                    </div>
                     <div class="quiz-card" id="quiz-state">
                        <div class="quiz-question"><span class="material-icons">quiz</span>State æµ‹éªŒï¼šå½“è°ƒç”¨ `useState` è¿”å›çš„ `setState` å‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_state" value="a"><span>ç«‹å³åŒæ­¥æ›´æ–° state å˜é‡çš„å€¼ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_state" value="b"><span>å®‰æ’ä¸€æ¬¡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶ä½¿ç”¨æ–°çš„ state å€¼ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_state" value="c"><span>ç›´æ¥ä¿®æ”¹ç»„ä»¶çš„ propsã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_state" value="d"><span>ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œé™¤éä½¿ç”¨å‡½æ•°å¼æ›´æ–°ã€‚</span></label>
                        </div>
                        <div class="quiz-feedback" id="feedback-q_state"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_state', 'b', this)">
                             <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer">
                            <p><strong>ç­”æ¡ˆ:</strong> B. å®‰æ’ä¸€æ¬¡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶ä½¿ç”¨æ–°çš„ state å€¼ã€‚</p>
                            <p><strong>è§£æ:</strong> `setState` å‡½æ•°æ˜¯å¼‚æ­¥çš„ã€‚è°ƒç”¨å®ƒå¹¶ä¸ä¼šç«‹å³æ”¹å˜å½“å‰æ¸²æŸ“å‘¨æœŸä¸­çš„ state å€¼ï¼Œè€Œæ˜¯å‘Šè¯‰ Reactï¼šâ€œæˆ‘å¸Œæœ›åœ¨æœªæ¥çš„æŸä¸ªæ—¶å€™å°† state æ›´æ–°ä¸ºè¿™ä¸ªæ–°å€¼ï¼Œè¯·å®‰æ’ä¸€æ¬¡é‡æ–°æ¸²æŸ“â€ã€‚React ä¼šåœ¨é€‚å½“çš„æ—¶æœºï¼ˆå¯èƒ½ä¼šåˆå¹¶å¤šä¸ªæ›´æ–°ï¼‰æ‰§è¡Œé‡æ–°æ¸²æŸ“ï¼Œå±Šæ—¶ç»„ä»¶å‡½æ•°ä¼šå†æ¬¡æ‰§è¡Œï¼Œ`useState` ä¼šè¿”å›æ›´æ–°åçš„å€¼ã€‚</p>
                        </div>
                    </div>
                </section>

                <section id="lifecycle" class="content-section fade-in-section" style="animation-delay: 0.3s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">hourglass_empty</span>ç”Ÿå‘½å‘¨æœŸ (useEffect Hook)
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                     <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">bolt</span>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ (Side Effects)ï¼Ÿ</h3>
                        <p>å‰¯ä½œç”¨æ˜¯æŒ‡åœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ã€ä¼šå½±å“ç»„ä»¶å¤–éƒ¨çš„æ“ä½œï¼Œæˆ–è€…ä¸èƒ½åœ¨æ¸²æŸ“æœŸé—´ç®€å•å®Œæˆçš„æ“ä½œã€‚å¸¸è§çš„å‰¯ä½œç”¨åŒ…æ‹¬ï¼š</p>
                        <ul>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">public</span>æ•°æ®è·å– (Fetching data from an API)</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">subscriptions</span>è®¾ç½®è®¢é˜… (Setting up subscriptions, e.g., WebSockets)</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">edit_note</span>æ‰‹åŠ¨æ›´æ”¹ DOM (é€šå¸¸åº”é¿å…ï¼Œä½†æœ‰æ—¶éœ€è¦ä¸é React åº“é›†æˆ)</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">timer</span>è®¾ç½®å®šæ—¶å™¨ (Timers)</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">biotech</span>æ—¥å¿—è®°å½•æˆ–åˆ†æ</li>
                        </ul>
                        <p>è¿™äº›æ“ä½œä¸åº”è¯¥ç›´æ¥æ”¾åœ¨ç»„ä»¶çš„ä¸»ä½“ä»£ç ä¸­æ‰§è¡Œï¼Œå› ä¸ºç»„ä»¶æ¸²æŸ“åº”è¯¥æ˜¯çº¯ç²¹çš„ï¼ˆå¯¹äºç›¸åŒçš„è¾“å…¥äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼‰ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡ã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">construction</span><code>useEffect</code> Hook åŸºæœ¬ç”¨æ³•</h3>
                        <p><code>useEffect</code> æ˜¯ React æä¾›çš„ä¸€ä¸ª Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ã€‚å®ƒå…è®¸ä½ åœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰§è¡Œä»£ç ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©æ€§åœ°åœ¨ç»„ä»¶æ›´æ–°æˆ–å¸è½½æ—¶æ‰§è¡Œæ¸…ç†æ“ä½œã€‚</p>
                        <p>è¯­æ³•ï¼š<code>useEffect(setupFunction, dependencies?)</code></p>
                        <ul>
                            <li><code>setupFunction</code>: åŒ…å«å‰¯ä½œç”¨é€»è¾‘çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨ React æ›´æ–° DOM ä¹‹åå¼‚æ­¥æ‰§è¡Œã€‚</li>
                            <li><code>dependencies</code> (å¯é€‰): ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«è¯¥ effect ä¾èµ–çš„æ‰€æœ‰æ¥è‡ªç»„ä»¶ä½œç”¨åŸŸçš„å€¼ï¼ˆprops, state, context, ç”šè‡³å‡½æ•°ï¼‰ã€‚React ä¼šä½¿ç”¨ <code>Object.is</code> æ¯”è¾ƒä¾èµ–é¡¹æ•°ç»„åœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹é—´çš„å˜åŒ–ï¼Œæ¥å†³å®šæ˜¯å¦éœ€è¦è·³è¿‡æ‰§è¡Œ <code>setupFunction</code>ã€‚</li>
                        </ul>
                         <div class="mermaid">
                            graph TD
                                A[ç»„ä»¶æ¸²æŸ“ Render] --> B{DOM æ›´æ–°å®Œæˆ};
                                B --> C{useEffect æ‰§è¡Œ};
                                C -- "å¯é€‰: è¿”å›æ¸…ç†å‡½æ•°" --> D(Cleanup Function);
                                E[ä¾èµ–é¡¹å˜åŒ–?] -- Yes --> A;
                                F[ç»„ä»¶å¸è½½ Unmount] -- "æ‰§è¡Œæ¸…ç†å‡½æ•°" --> D;
                                C -- "æ— æ¸…ç†å‡½æ•°" --> G((Effect å®Œæˆ));
                                D -- "æ‰§è¡Œå®Œæ¯•" --> H((Cleanup å®Œæˆ));

                                subgraph Effect æµç¨‹
                                    direction LR
                                    A --- C
                                end
                                subgraph Cleanup æµç¨‹
                                    direction LR
                                    E --- D
                                    F --- D
                                end

                                style A fill:#ccf,stroke:#60f
                                style B fill:#eee,stroke:#999
                                style C fill:#cfc,stroke:#090
                                style D fill:#fcc,stroke:#c00
                                style E fill:#ffc,stroke:#c90
                                style F fill:#fcc,stroke:#c00
                         </div>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">sync_alt</span>æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸè¡Œä¸º</h3>
                        <p>é€šè¿‡æ§åˆ¶ `dependencies` æ•°ç»„ï¼Œå¯ä»¥æ¨¡æ‹Ÿç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š</p>
                        <p><strong>1. æ¨¡æ‹Ÿ <code>componentDidMount</code> (ä»…åœ¨æŒ‚è½½åè¿è¡Œä¸€æ¬¡):</strong></p>
                        <p>ä¼ å…¥ä¸€ä¸ª<strong class="text-blue-600">ç©ºæ•°ç»„ <code>[]</code></strong> ä½œä¸ºä¾èµ–é¡¹ã€‚Effect å‡½æ•°åªåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åæ‰§è¡Œä¸€æ¬¡ã€‚</p>
                        <pre><code class="language-javascript">import React, { useState, useEffect } from 'react';

function UserData({ userId }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // This effect runs only once after the initial render (component mount)
    console.log('Component mounted! Fetching data...');
    setLoading(true);
    let isCancelled = false; // Flag to prevent state update on unmounted component

    fetch(`https://jsonplaceholder.typicode.com/users/${userId}`) // Example API
      .then(response => response.json())
      .then(data => {
        if (!isCancelled) { // Only update state if component is still mounted
          setUser(data);
          setLoading(false);
        }
      })
      .catch(error => {
        if (!isCancelled) {
          console.error("Error fetching data:", error);
          setLoading(false);
        }
      });

    // Optional: Return a cleanup function (simulates componentWillUnmount)
    return () => {
      console.log('Component will unmount! Cleanup logic here.');
      isCancelled = true; // Set flag on cleanup
    };
  }, []); // Empty dependency array means run once on mount

  if (loading) {
    return &lt;div&gt;Loading user data...&lt;/div&gt;;
  }

  return (
    &lt;div className="info-block"&gt;
      {user ? &lt;strong&gt;Username: {user.name}&lt;/strong&gt; : 'User not found'}
    &lt;/div&gt;
  );
}</code></pre>

                        <p class="mt-4"><strong>2. æ¨¡æ‹Ÿ <code>componentDidUpdate</code> (ä¾èµ–é¡¹å˜åŒ–æ—¶è¿è¡Œ):</strong></p>
                        <p>ä¼ å…¥ä¸€ä¸ªåŒ…å«<strong class="text-blue-600">ä¾èµ–é¡¹çš„æ•°ç»„ <code>[dep1, dep2]</code></strong>ã€‚Effect å‡½æ•°åœ¨é¦–æ¬¡æ¸²æŸ“åæ‰§è¡Œï¼Œå¹¶ä¸”åœ¨<strong class="text-red-600">ä»»ä½•ä¸€ä¸ªä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–</strong>åçš„æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œã€‚</p>
                        <pre><code class="language-javascript">// Example within the UserData component above, if userId could change:
useEffect(() => {
  // This effect runs after the initial render AND
  // after every subsequent render IF 'userId' has changed.
  console.log(`Dependency 'userId' changed to: ${userId}. Refetching data...`);
  setLoading(true);
  let isCancelled = false;

  fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
    .then(response => response.json())
    .then(data => { if (!isCancelled) { setUser(data); setLoading(false); } })
    .catch(error => { if (!isCancelled) { console.error("Error:", error); setLoading(false); } });

  // Cleanup function runs before the effect runs again (due to dependency change)
  // and also when the component unmounts.
  return () => {
      console.log('Cleanup before re-running effect due to userId change or unmount.');
      isCancelled = true;
  };
}, [userId]); // Dependency array includes userId
</code></pre>
                        <p><strong>çœç•¥ä¾èµ–é¡¹æ•°ç»„:</strong> å¦‚æœå®Œå…¨çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼ŒEffect ä¼šåœ¨<strong class="text-red-600">æ¯æ¬¡ç»„ä»¶æ¸²æŸ“å</strong>éƒ½æ‰§è¡Œã€‚è¿™é€šå¸¸åº”è¯¥é¿å…ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„å‰¯ä½œç”¨æ‰§è¡Œå’Œæ€§èƒ½é—®é¢˜ï¼Œç”šè‡³æ— é™å¾ªç¯ã€‚</p>
                         <pre><code class="language-javascript">// Avoid this unless you specifically need to run on every render
useEffect(() => {
  console.log('Component rendered or updated. This runs VERY often!');
  // If this effect modifies state that causes a re-render, it can lead to infinite loops.
});</code></pre>

                        <p class="mt-4"><strong>3. æ¨¡æ‹Ÿ <code>componentWillUnmount</code> (æ¸…ç†å‰¯ä½œç”¨):</strong></p>
                        <p>åœ¨ <code>setupFunction</code> ä¸­è¿”å›ä¸€ä¸ª<strong class="text-blue-600">æ¸…ç†å‡½æ•° (cleanup function)</strong>ã€‚è¿™ä¸ªæ¸…ç†å‡½æ•°ä¼šåœ¨ä»¥ä¸‹æ—¶æœºæ‰§è¡Œï¼š</p>
                        <ul>
                            <li>ç»„ä»¶å¸è½½ (unmount) ä¹‹å‰ã€‚</li>
                            <li>åœ¨ä¸‹ä¸€æ¬¡ Effect æ‰§è¡Œä¹‹å‰ï¼ˆå¦‚æœä¾èµ–é¡¹å˜åŒ–å¯¼è‡´ Effect éœ€è¦é‡æ–°è¿è¡Œï¼‰ã€‚</li>
                        </ul>
                        <p>æ¸…ç†å‡½æ•°ç”¨äºæ¸…é™¤ä¸Šä¸€æ¬¡ effect åˆ›å»ºçš„èµ„æºï¼Œå¦‚æ¸…é™¤å®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…ã€ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ç­‰ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
                        <pre><code class="language-javascript">useEffect(() => {
  // Example: Setting up an event listener
  const handleScroll = () => console.log('Window scrolled!');
  window.addEventListener('scroll', handleScroll);
  console.log('Scroll listener added.');

  // Return the cleanup function
  return () => {
    console.log('Cleaning up scroll listener.');
    window.removeEventListener('scroll', handleScroll); // Remove the listener
  };
}, []); // Empty array: listener added on mount, removed on unmount
</code></pre>
                    </div>
                     <div class="warning-block">
                        <h3 class="head4 mt-0 mb-2 text-orange-800">useEffect æ³¨æ„äº‹é¡¹ (éå¸¸é‡è¦)</h3>
                        <ul>
                            <li><strong>ä¾èµ–é¡¹å®Œæ•´æ€§ (Exhaustive Deps):</strong> <strong class="text-red-600">å¿…é¡»</strong>åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­åŒ…å« effect å†…éƒ¨ç”¨åˆ°çš„æ‰€æœ‰æ¥è‡ªç»„ä»¶ä½œç”¨åŸŸçš„å€¼ï¼ˆprops, state, context, å‡½æ•°ç­‰ï¼‰ã€‚å¦‚æœé—æ¼ï¼Œeffect å¯èƒ½ä¼šæ•è·åˆ°è¿‡æ—¶çš„å€¼ï¼ˆé—­åŒ…é™·é˜±ï¼‰ï¼Œå¯¼è‡´éš¾ä»¥è°ƒè¯•çš„ bugã€‚å¼ºçƒˆæ¨èä½¿ç”¨ ESLint çš„ `react-hooks/exhaustive-deps` è§„åˆ™æ¥å¸®åŠ©æ£€æŸ¥ã€‚</li>
                            <li><strong>é¿å…æ— é™å¾ªç¯ï¼š</strong> å¦‚æœ effect å†…éƒ¨è°ƒç”¨äº†ä¼šæ”¹å˜å…¶ä¾èµ–é¡¹çš„ `setState` å‡½æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰è®¾ç½®å¥½è·³å‡ºæ¡ä»¶ï¼Œå°±å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ï¼ˆæ›´æ–°çŠ¶æ€ -> è§¦å‘ effect -> æ›´æ–°çŠ¶æ€ ...ï¼‰ã€‚ç¡®ä¿ effect çš„æ‰§è¡Œæ¡ä»¶æ˜¯æ˜ç¡®ä¸”ä¼šç»ˆæ­¢çš„ã€‚</li>
                            <li><strong>å‡½æ•°ä½œä¸ºä¾èµ–é¡¹ï¼š</strong> å¦‚æœ effect ä¾èµ–äºåœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é»˜è®¤ä¼šé‡æ–°åˆ›å»ºï¼ˆå³ä½¿å‡½æ•°ä½“æ²¡å˜ï¼‰ï¼Œè¿™ä¼šä¸å¿…è¦åœ°è§¦å‘ effect é‡æ–°è¿è¡Œã€‚åº”è¯¥ä½¿ç”¨ <code>useCallback</code> Hook æ¥è®°å¿†åŒ– (memoize) è¿™ä¸ªå‡½æ•°ï¼Œåªæœ‰å½“å‡½æ•°çš„ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°åˆ›å»ºå®ƒã€‚</li>
                             <li><strong>å¼‚æ­¥æ“ä½œä¸æ¸…ç†ï¼š</strong> åœ¨ effect ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼ˆå¦‚ `fetch`ï¼‰æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ç»„ä»¶å¯èƒ½åœ¨å¼‚æ­¥æ“ä½œå®Œæˆå‰å°±å¸è½½äº†ã€‚éœ€è¦åœ¨æ¸…ç†å‡½æ•°ä¸­å¤„ç†è¿™ç§æƒ…å†µï¼Œä¾‹å¦‚è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ï¼Œé˜²æ­¢åœ¨å·²å¸è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨ `setState`ã€‚</li>
                        </ul>
                    </div>
                     <div class="quiz-card" id="quiz-useeffect">
                        <div class="quiz-question"><span class="material-icons">quiz</span>useEffect æµ‹éªŒï¼šå¦‚æœ `useEffect` çš„ä¾èµ–é¡¹æ•°ç»„æ˜¯ç©ºçš„ `[]`ï¼Œé‚£ä¹ˆå®ƒçš„å‰¯ä½œç”¨å‡½æ•°ä¼šåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_useeffect" value="a"><span>æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_useeffect" value="b"><span>ä»…åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æŒ‚è½½ï¼ˆmountï¼‰åæ‰§è¡Œä¸€æ¬¡ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_useeffect" value="c"><span>ä»…åœ¨ç»„ä»¶å¸è½½ï¼ˆunmountï¼‰å‰æ‰§è¡Œä¸€æ¬¡ã€‚</span></label>
                            <label class="quiz-option"><input type="radio" name="q_useeffect" value="d"><span>å½“ä»»ä½• state æˆ– prop æ”¹å˜æ—¶ã€‚</span></label>
                        </div>
                        <div class="quiz-feedback" id="feedback-q_useeffect"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_useeffect', 'b', this)">
                             <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer">
                            <p><strong>ç­”æ¡ˆ:</strong> B. ä»…åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æŒ‚è½½ï¼ˆmountï¼‰åæ‰§è¡Œä¸€æ¬¡ã€‚</p>
                            <p><strong>è§£æ:</strong> ç©ºçš„ä¾èµ–é¡¹æ•°ç»„ `[]` å‘Šè¯‰ Reactï¼Œè¿™ä¸ª effect ä¸ä¾èµ–äºä»»ä½• props æˆ– stateã€‚å› æ­¤ï¼Œå®ƒåªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“å¹¶æŒ‚è½½åˆ° DOM åæ‰§è¡Œä¸€æ¬¡ã€‚å¦‚æœ effect è¿”å›äº†æ¸…ç†å‡½æ•°ï¼Œè¯¥æ¸…ç†å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚</p>
                        </div>
                    </div>
                </section>

                <section id="events" class="content-section fade-in-section" style="animation-delay: 0.35s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">touch_app</span>äº‹ä»¶å¤„ç†
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">ads_click</span>ç»‘å®šäº‹ä»¶å¤„ç†å™¨</h3>
                        <p>åœ¨ React å…ƒç´ ä¸Šå¤„ç†äº‹ä»¶ä¸å¤„ç†åŸç”Ÿ DOM äº‹ä»¶ç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›è¯­æ³•å·®å¼‚ï¼š</p>
                        <ul>
                            <li>React äº‹ä»¶å‘½åé‡‡ç”¨<strong class="text-blue-600">é©¼å³°å‘½åæ³• (camelCase)</strong>ï¼Œä¾‹å¦‚ <code>onClick</code>, <code>onChange</code>, <code>onSubmit</code>ã€‚</li>
                            <li>ä½¿ç”¨ JSX è¯­æ³•ï¼Œä½ éœ€è¦ä¼ é€’ä¸€ä¸ª<strong class="text-blue-600">å‡½æ•°å¼•ç”¨</strong>ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°è°ƒç”¨çš„å­—ç¬¦ä¸²ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">import React, { useState } from 'react';

function ButtonHandler() {
  const [message, setMessage] = useState('');

  // Define event handler function
  const handleClick = () => {
    alert('Button was clicked!');
  };

  // Define event handler for input change
  const handleChange = (event) => {
    // 'event' is React's SyntheticEvent object
    setMessage(event.target.value); // Get value from the input element
  };

  return (
    &lt;div&gt;
      {/* Pass the function reference 'handleClick' to onClick */}
      &lt;button onClick={handleClick} className="button button-primary"&gt;
        Click Me
      &lt;/button&gt;

      &lt;input
        type="text"
        value={message} // Controlled component: value driven by state
        onChange={handleChange} // Pass the function reference 'handleChange' to onChange
        placeholder="Type something..."
        className="ml-4 p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 outline-none"
      /&gt;
      &lt;p className="mt-2"&gt;You typed: {message}&lt;/p&gt;
    &lt;/div&gt;
  );
}</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">gesture</span>äº‹ä»¶å¯¹è±¡ (SyntheticEvent)</h3>
                        <p>React ä¼šå‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’ä¸€ä¸ª<strong class="text-blue-600">åˆæˆäº‹ä»¶å¯¹è±¡ (SyntheticEvent)</strong>ã€‚</p>
                        <ul>
                            <li>è¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŒ…è£…å™¨ï¼Œå®ƒåŒ…è£…äº†æµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶å¯¹è±¡ï¼ŒæŠ¹å¹³äº†æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ã€‚</li>
                            <li>å®ƒæä¾›äº†ä¸åŸç”Ÿäº‹ä»¶å¯¹è±¡ç›¸ä¼¼çš„æ¥å£ï¼ˆå¦‚ <code>event.preventDefault()</code>, <code>event.stopPropagation()</code>, <code>event.target</code>, <code>event.type</code>, <code>event.key</code> ç­‰ï¼‰ï¼Œä¿è¯äº†è¡Œä¸ºä¸€è‡´æ€§ã€‚</li>
                            <li>åˆæˆäº‹ä»¶å¯¹è±¡æ˜¯<strong class="text-red-600">æ± åŒ–</strong>çš„ã€‚è¿™æ„å‘³ç€äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œäº‹ä»¶å¯¹è±¡çš„å±æ€§ä¼šè¢«ç½®ç©ºï¼Œä»¥ä¾›é‡ç”¨ã€‚å¦‚æœä½ éœ€è¦å¼‚æ­¥è®¿é—®äº‹ä»¶å±æ€§ï¼Œéœ€è¦è°ƒç”¨ <code>event.persist()</code> æˆ–å°†éœ€è¦çš„å±æ€§ä¿å­˜åˆ°å˜é‡ä¸­ã€‚</li>
                            <li>å¦‚æœä½ éœ€è¦è®¿é—®åº•å±‚çš„åŸç”Ÿäº‹ä»¶å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>event.nativeEvent</code>ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">function FormSubmitHandler() {
  const handleSubmit = (event) => {
    // Prevent the default form submission behavior (page reload)
    event.preventDefault();
    console.log('Form submitted!');
    console.log('Event Type:', event.type); // e.g., "submit"
    console.log('Target Element:', event.target); // The form element
    // console.log('Native Event:', event.nativeEvent); // Access the original browser event

    // Example of accessing properties asynchronously (requires persist or saving)
    // const target = event.target; // Save the property
    // event.persist(); // Or call persist()
    // setTimeout(() => {
    //   console.log('Async access to target:', target); // Works if saved
    //   // console.log('Async access via event.target:', event.target); // Might be null if not persisted
    // }, 100);
  };

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;button type="submit" className="button button-secondary"&gt;Submit Form&lt;/button&gt;
    &lt;/form&gt;
  );
}</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">forward_to_inbox</span>å‘äº‹ä»¶å¤„ç†å™¨ä¼ é€’å‚æ•°</h3>
                        <p>æœ‰æ—¶ä½ éœ€è¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’é¢å¤–çš„å‚æ•°ï¼ˆé™¤äº†äº‹ä»¶å¯¹è±¡æœ¬èº«ï¼‰ã€‚å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ– <code>.bind()</code>ã€‚</p>
                        <pre><code class="language-javascript">function ItemList({ items, onDeleteItem }) { // Assume onDeleteItem is passed from parent

  // Handler now accepts the id first, then the event
  const handleDelete = (idToDelete, event) => {
    // 'event' is the SyntheticEvent
    console.log(`Deleting item with ID: ${idToDelete}`);
    console.log('Click event target:', event.target);
    onDeleteItem(idToDelete); // Call the function passed via props
  };

  return (
    &lt;ul&gt;
      {items.map(item => (
        &lt;li key={item.id} className="mb-2 flex justify-between items-center"&gt;
          <span>{item.text}</span>
          {/* Method 1: Arrow function wrapper */}
          {/* Creates a new function on each render, might have performance implications in very large lists */}
          &lt;button
            onClick={(e) => handleDelete(item.id, e)} // Pass item.id and the event 'e'
            className="button button-danger text-xs py-1 px-2"
          &gt;
            Delete (Arrow)
          &lt;/button&gt;

          {/* Method 2: Using .bind() */}
          {/* Also creates a new function on each render */}
          {/* &lt;button
            onClick={handleDelete.bind(null, item.id)} // Binds item.id as the first argument
            className="button button-danger text-xs py-1 px-2"
          &gt;
            Delete (Bind)
          &lt;/button&gt; */}
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}</code></pre>
                        <div class="info-block">
                            <strong>æ€§èƒ½è€ƒè™‘ï¼š</strong> åœ¨ <code>.map()</code> ä¸­ç›´æ¥ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ– <code>.bind()</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å®ä¾‹ã€‚å¯¹äºéå¸¸å¤§çš„åˆ—è¡¨æˆ–é¢‘ç¹æ›´æ–°çš„ç»„ä»¶ï¼Œè¿™å¯èƒ½å¸¦æ¥æ€§èƒ½å¼€é”€ã€‚æ›´ä¼˜åŒ–çš„æ–¹å¼é€šå¸¸æ¶‰åŠå°†å¤„ç†å‡½æ•°å®šä¹‰åœ¨å¾ªç¯å¤–éƒ¨ï¼Œå¹¶é€šè¿‡ data-* å±æ€§æˆ–é—­åŒ…ç­‰æ–¹å¼è·å–æ‰€éœ€å‚æ•°ï¼Œæˆ–è€…ä½¿ç”¨äº‹ä»¶å§”æ‰˜ã€‚ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸Šè¿°æ–¹æ³•çš„ç®€æ´æ€§ä¼˜å…ˆã€‚
                        </div>
                    </div>
                </section>

                 <section id="controlled-uncontrolled" class="content-section fade-in-section" style="animation-delay: 0.4s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">rule</span>å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                    <p>åœ¨å¤„ç†è¡¨å•å…ƒç´ ï¼ˆå¦‚ <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, <code>&lt;select&gt;</code>ï¼‰æ—¶ï¼ŒReact æä¾›äº†ä¸¤ç§ä¸»è¦çš„æ–¹å¼æ¥ç®¡ç†è¡¨å•æ•°æ®ï¼šå—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶ã€‚</p>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">tune</span>å—æ§ç»„ä»¶ (Controlled Components)</h3>
                        <p>åœ¨å—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•å…ƒç´ çš„å€¼<strong class="text-blue-600">å®Œå…¨ç”± React çš„ state æ§åˆ¶</strong>ã€‚</p>
                        <ul>
                            <li>è¡¨å•å…ƒç´ çš„ <code>value</code> (æˆ– <code>checked</code> for checkboxes/radios) å±æ€§ç»‘å®šåˆ° React stateã€‚</li>
                            <li>é€šè¿‡ <code>onChange</code> äº‹ä»¶å¤„ç†å™¨æ¥æ›´æ–° React stateã€‚æ¯å½“ç”¨æˆ·è¾“å…¥æ—¶ï¼Œ<code>onChange</code> è§¦å‘ï¼Œæ›´æ–° stateï¼Œç„¶åç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå°†æ›´æ–°åçš„ state å€¼èµ‹å›ç»™è¡¨å•å…ƒç´ çš„ <code>value</code>ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">import React, { useState } from 'react';

function ControlledInput() {
  const [name, setName] = useState(''); // State controls the input value

  const handleChange = (event) => {
    setName(event.target.value); // Update state on every change
  };

  const handleSubmit = (event) => {
      event.preventDefault();
      alert(`A name was submitted: ${name}`);
  }

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;label htmlFor="nameInput"&gt;Name (Controlled): &lt;/label&gt;
      &lt;input
        id="nameInput"
        type="text"
        value={name}       {/* Value is driven by state */}
        onChange={handleChange} {/* State is updated on change */}
        className="p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 outline-none"
      /&gt;
      &lt;button type="submit" className="button button-primary ml-2"&gt;Submit&lt;/button&gt;
      &lt;p&gt;Current value in state: {name}&lt;/p&gt;
    &lt;/form&gt;
  );
}</code></pre>
                        <p><strong>ä¼˜ç‚¹ï¼š</strong></p>
                        <ul>
                            <li>æ•°æ®æ¥æºå•ä¸€ä¸”æ˜ç¡®ï¼ˆReact stateï¼‰ã€‚</li>
                            <li>æ˜“äºå®ç°å³æ—¶éªŒè¯ã€æ ¼å¼åŒ–è¾“å…¥ã€ç¦ç”¨æäº¤æŒ‰é’®ç­‰é€»è¾‘ã€‚</li>
                            <li>React state å§‹ç»ˆæŒæœ‰æœ€æ–°çš„è¡¨å•å€¼ã€‚</li>
                        </ul>
                        <p><strong>ç¼ºç‚¹ï¼š</strong></p>
                        <ul>
                            <li>éœ€è¦ä¸ºæ¯ä¸ªè¡¨å•å…ƒç´ ç¼–å†™ <code>onChange</code> å¤„ç†å™¨å’Œ stateã€‚</li>
                        </ul>
                        <p><strong>å—æ§ç»„ä»¶æ˜¯ React ä¸­å¤„ç†è¡¨å•çš„æ¨èæ–¹å¼ã€‚</strong></p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">do_not_disturb_on</span>éå—æ§ç»„ä»¶ (Uncontrolled Components)</h3>
                        <p>åœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®<strong class="text-blue-600">ç”± DOM è‡ªèº«å¤„ç†</strong>ã€‚React ä¸ç›´æ¥æ§åˆ¶è¡¨å•å…ƒç´ çš„å€¼ã€‚</p>
                        <ul>
                            <li>ä¸è®¾ç½®è¡¨å•å…ƒç´ çš„ <code>value</code> å±æ€§ï¼ˆæˆ–ä½¿ç”¨ <code>defaultValue</code>/<code>defaultChecked</code> è®¾ç½®åˆå§‹å€¼ï¼‰ã€‚</li>
                            <li>éœ€è¦æ—¶ï¼Œä½¿ç”¨ <strong class="text-red-600">Refs</strong> æ¥ç›´æ¥ä» DOM ä¸­è¯»å–è¡¨å•å…ƒç´ çš„å€¼ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">import React, { useRef } from 'react';

function UncontrolledInput() {
  const inputRef = useRef(null); // Ref to access the DOM node

   const handleSubmit = (event) => {
      event.preventDefault();
      // Read the value directly from the DOM node via ref
      alert(`A name was submitted: ${inputRef.current.value}`);
  }

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;label htmlFor="nameUncontrolled"&gt;Name (Uncontrolled): &lt;/label&gt;
      &lt;input
        id="nameUncontrolled"
        type="text"
        ref={inputRef}       {/* Attach ref */}
        defaultValue="Initial Value" {/* Optional: Set initial value */}
        className="p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 outline-none"
      /&gt;
      {/* No onChange handler needed to manage value */}
      &lt;button type="submit" className="button button-primary ml-2"&gt;Submit&lt;/button&gt;
    &lt;/form&gt;
  );
}</code></pre>
                        <p><strong>ä¼˜ç‚¹ï¼š</strong></p>
                        <ul>
                            <li>ä»£ç å¯èƒ½æ›´ç®€æ´ï¼Œå°¤å…¶æ˜¯å¯¹äºç®€å•è¡¨å•æˆ–é›†æˆé React ä»£ç æ—¶ã€‚</li>
                            <li>æ–‡ä»¶è¾“å…¥ <code>&lt;input type="file" /&gt;</code> å§‹ç»ˆæ˜¯éå—æ§çš„ã€‚</li>
                        </ul>
                        <p><strong>ç¼ºç‚¹ï¼š</strong></p>
                        <ul>
                            <li>éš¾ä»¥å®ç°å³æ—¶éªŒè¯æˆ–æ ¼å¼åŒ–ã€‚</li>
                            <li>éœ€è¦å‘½ä»¤å¼åœ°é€šè¿‡ Ref è¯»å–å€¼ï¼Œä¸å¦‚å—æ§ç»„ä»¶å£°æ˜å¼ã€‚</li>
                        </ul>
                        <p>éå—æ§ç»„ä»¶åœ¨æŸäº›åœºæ™¯ä¸‹æœ‰ç”¨ï¼Œä½†é€šå¸¸æ¨èä½¿ç”¨å—æ§ç»„ä»¶æ¥è·å¾—æ›´å¥½çš„å¯é¢„æµ‹æ€§å’Œæ§åˆ¶åŠ›ã€‚</p>
                    </div>
                </section>

                <section id="refs" class="content-section fade-in-section" style="animation-delay: 0.45s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">attachment</span>Refs (useRef Hook)
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">help_outline</span>ä»€ä¹ˆæ˜¯ Refsï¼Ÿ</h3>
                        <p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—®æ¸²æŸ“è¾“å‡ºä¸­çš„ DOM èŠ‚ç‚¹æˆ– React å…ƒç´ å®ä¾‹ã€‚</p>
                        <p>åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼Œprops æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ã€‚è¦ä¿®æ”¹ä¸€ä¸ªå­ç»„ä»¶ï¼Œä½ éœ€è¦ä½¿ç”¨æ–°çš„ props æ¥é‡æ–°æ¸²æŸ“å®ƒã€‚ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µä¸‹ä½ éœ€è¦<strong class="text-blue-600">å‘½ä»¤å¼åœ°</strong>ä¿®æ”¹å­ç»„ä»¶æˆ–è®¿é—® DOM èŠ‚ç‚¹ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ Refsã€‚</p>
                        <p>å¸¸è§çš„ Refs ä½¿ç”¨åœºæ™¯ï¼š</p>
                        <ul>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">adjust</span>ç®¡ç†ç„¦ç‚¹ (focus)ã€æ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“ï¼ˆå¦‚ video, audioï¼‰æ’­æ”¾æ§åˆ¶ã€‚</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">animation</span>è§¦å‘å‘½ä»¤å¼åŠ¨ç”»ã€‚</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">integration_instructions</span>é›†æˆéœ€è¦ç›´æ¥è®¿é—® DOM çš„ç¬¬ä¸‰æ–¹åº“ã€‚</li>
                            <li><span class="material-icons text-sm mr-1 text-gray-500">calculate</span>æµ‹é‡ DOM èŠ‚ç‚¹çš„å¤§å°æˆ–ä½ç½®ã€‚</li>
                        </ul>
                        <div class="warning-block">
                            <p><strong>æ³¨æ„ï¼š</strong>åº”é¿å…è¿‡åº¦ä½¿ç”¨ Refs æ¥åšå¯ä»¥é€šè¿‡å£°æ˜å¼æ–¹å¼ï¼ˆProps å’Œ Stateï¼‰å®Œæˆçš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œä¸è¦ç”¨ Ref æ¥æ˜¾ç¤ºæˆ–éšè—ä¸€ä¸ªå…ƒç´ ï¼Œåº”è¯¥ä½¿ç”¨æ¡ä»¶æ¸²æŸ“ã€‚</p>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3 class="head3 flex items-center gap-2"><span class="material-icons text-lg text-blue-600">construction</span><code>useRef</code> Hook åŸºæœ¬ç”¨æ³•</h3>
                        <p><code>useRef</code> æ˜¯ React æä¾›çš„ä¸€ä¸ª Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­åˆ›å»ºå’Œç®¡ç† Refsã€‚</p>
                        <p><code>useRef(initialValue)</code> è¿”å›ä¸€ä¸ªå¯å˜çš„ <code>ref</code> å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•° (<code>initialValue</code>)ã€‚è¿”å›çš„ <code>ref</code> å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚</p>

                        <p class="mt-4"><strong>ç”¨é€” 1: è®¿é—® DOM å…ƒç´ </strong></p>
                        <p>å°† <code>ref</code> å¯¹è±¡é™„åŠ åˆ° JSX å…ƒç´ çš„ <code>ref</code> å±æ€§ä¸Šï¼ŒReact ä¼šåœ¨ DOM èŠ‚ç‚¹æŒ‚è½½åå°†è¯¥èŠ‚ç‚¹èµ‹å€¼ç»™ <code>ref.current</code>ï¼Œå¹¶åœ¨å¸è½½æ—¶å°†å…¶è®¾å› <code>null</code>ã€‚</p>
                        <pre><code class="language-javascript">import React, { useRef, useEffect } from 'react';

function FocusInput() {
  // 1. Create a ref object (initial value null for DOM refs)
  const inputRef = useRef(null);

  useEffect(() => {
    // 3. After the component mounts, access the DOM node via ref.current
    //    and call the focus() method.
    if (inputRef.current) {
      inputRef.current.focus();
      console.log('Input focused using ref!');
      console.log('Input DOM node:', inputRef.current); // Logs the <input> element
    }
    // Cleanup function is not strictly necessary here,
    // as React handles setting ref.current to null on unmount.
  }, []); // Empty dependency array ensures this runs only on mount

  return (
    &lt;div&gt;
      &lt;label htmlFor="myInput"&gt;Focus on load: &lt;/label&gt;
      {/* 2. Attach the ref object to the input element's ref attribute */}
      &lt;input
        ref={inputRef}
        id="myInput"
        type="text"
        className="ml-2 p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 outline-none"
      /&gt;
    &lt;/div&gt;
  );
}</code></pre>

                        <p class="mt-4"><strong>ç”¨é€” 2: å­˜å‚¨å¯å˜å€¼ (ä¸è§¦å‘é‡æ–°æ¸²æŸ“)</strong></p>
                        <p><code>useRef</code> ä¹Ÿå¯ä»¥ç”¨æ¥å­˜å‚¨ä»»ä½•å¯å˜å€¼ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„å®ä¾‹å±æ€§ã€‚å…³é”®åœ¨äºï¼š<strong class="text-red-600">ä¿®æ”¹ <code>ref.current</code> çš„å€¼ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</strong>ã€‚è¿™ä½¿å¾—å®ƒé€‚åˆå­˜å‚¨é‚£äº›ä¸éœ€è¦åæ˜ åœ¨ UI ä¸Šï¼Œä½†éœ€è¦åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜çš„å€¼ï¼Œä¾‹å¦‚å®šæ—¶å™¨ IDã€ä¹‹å‰çš„ state/props å€¼ç­‰ã€‚</p>
                        <pre><code class="language-javascript">import React, { useState, useRef, useEffect } from 'react';

function TimerWithRef() {
  const [count, setCount] = useState(0);
  // Use ref to store the interval ID
  const intervalRef = useRef(null); // Initialize with null

  useEffect(() => {
    // Start the timer and store its ID in ref.current
    // Modifying ref.current here does NOT cause a re-render
    intervalRef.current = setInterval(() => {
      setCount(prevCount => prevCount + 1); // Updating state *does* cause re-render
    }, 1000);
    console.log('Timer started, ID stored in ref:', intervalRef.current);

    // Cleanup function: clear the interval when the component unmounts
    return () => {
      console.log('Clearing timer with ID from ref:', intervalRef.current);
      clearInterval(intervalRef.current); // Access the ID via ref.current
    };
  }, []); // Run only on mount and unmount

  const stopTimer = () => {
    console.log('Stopping timer with ID from ref:', intervalRef.current);
    clearInterval(intervalRef.current); // Access the ID via ref.current to stop
     // Modifying ref.current here also does NOT cause a re-render
     // intervalRef.current = null; // Optionally reset the ref
  };

  return (
    &lt;div&gt;
      &lt;p&gt;Timer Count: {count}&lt;/p&gt;
      &lt;button onClick={stopTimer} className="button button-danger"&gt;Stop Timer&lt;/button&gt;
    &lt;/div&gt;
  );
}</code></pre>
                        <p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>intervalRef.current</code> çš„å˜åŒ–ä¸ä¼šå¯¼è‡´ <code>TimerWithRef</code> ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†å®ƒå…è®¸æˆ‘ä»¬åœ¨ç»„ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼ˆeffect å’Œäº‹ä»¶å¤„ç†å™¨ï¼‰ä¹‹é—´å…±äº«å’Œè®¿é—® interval IDã€‚</p>
                    </div>
                </section>

                 <section id="hooks-rules" class="content-section fade-in-section" style="animation-delay: 0.5s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">gavel</span>Hooks è§„åˆ™
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                         <p>Hooks (å¦‚ <code>useState</code>, <code>useEffect</code>, <code>useRef</code> ç­‰) æ˜¯å¼ºå¤§çš„å·¥å…·ï¼Œä½†å¿…é¡»éµå¾ªä¸¤æ¡ç®€å•çš„è§„åˆ™ï¼Œä»¥ç¡®ä¿å®ƒä»¬èƒ½æ­£å¸¸å·¥ä½œï¼š</p>
                         <div class="warning-block">
                            <h3 class="head4 mt-0 mb-2 text-orange-800"><span class="material-icons text-lg mr-1">error_outline</span>è§„åˆ™ 1: åªåœ¨é¡¶å±‚è°ƒç”¨ Hooks (Only Call Hooks at the Top Level)</h3>
                            <p><strong>ä¸è¦</strong>åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hooksã€‚å¿…é¡»å§‹ç»ˆåœ¨ä½ çš„ React å‡½æ•°ç»„ä»¶çš„<strong class="text-red-600">é¡¶å±‚</strong>è°ƒç”¨å®ƒä»¬ã€‚</p>
                            <p><strong>åŸå› ï¼š</strong>React ä¾èµ–äº Hooks çš„<strong class="text-red-600">è°ƒç”¨é¡ºåº</strong>åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ä¿æŒä¸€è‡´ï¼Œä»¥æ­¤æ¥æ­£ç¡®åœ°å°† state å’Œ effect ä¸å¯¹åº”çš„ Hook è°ƒç”¨å…³è”èµ·æ¥ã€‚å¦‚æœåœ¨æ¡ä»¶æˆ–å¾ªç¯ä¸­è°ƒç”¨ï¼Œé¡ºåºå¯èƒ½ä¼šæ”¹å˜ï¼Œå¯¼è‡´çŠ¶æ€é”™ä¹±æˆ– effect è¡Œä¸ºå¼‚å¸¸ã€‚</p>
                            <pre><code class="language-javascript">// é”™è¯¯ âŒ: åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ useState
function ConditionalState({ condition }) {
  if (condition) {
    const [state, setState] = useState(0); // é”™è¯¯ï¼
  }
  // ...
}

// æ­£ç¡® âœ…: å§‹ç»ˆåœ¨é¡¶å±‚è°ƒç”¨ï¼Œåœ¨ effect æˆ–äº‹ä»¶å¤„ç†ä¸­ä½¿ç”¨æ¡ä»¶é€»è¾‘
function CorrectConditionalState({ condition }) {
  const [state, setState] = useState(0);
  useEffect(() => {
    if (condition) {
      // åœ¨ effect å†…éƒ¨ä½¿ç”¨æ¡ä»¶é€»è¾‘
      console.log("Condition is true, state is", state);
    }
  }, [condition, state]); // åŒ…å«ä¾èµ–é¡¹
  // ...
}</code></pre>
                         </div>
                         <div class="warning-block mt-6">
                            <h3 class="head4 mt-0 mb-2 text-orange-800"><span class="material-icons text-lg mr-1">error_outline</span>è§„åˆ™ 2: åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hooks (Only Call Hooks from React Functions)</h3>
                            <p><strong>ä¸è¦</strong>åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ Hooksã€‚</p>
                            <p>ä½ åªèƒ½åœ¨ä»¥ä¸‹ä¸¤ç§åœ°æ–¹è°ƒç”¨ Hooksï¼š</p>
                            <ul>
                                <li>âœ… <strong class="text-green-600">React å‡½æ•°ç»„ä»¶</strong> çš„å†…éƒ¨ã€‚</li>
                                <li>âœ… <strong class="text-green-600">è‡ªå®šä¹‰ Hooks</strong> (Custom Hooks) çš„å†…éƒ¨ï¼ˆè‡ªå®šä¹‰ Hook æœ¬èº«ä¹Ÿæ˜¯ä»¥ "use" å¼€å¤´çš„å‡½æ•°ï¼‰ã€‚</li>
                            </ul>
                             <pre><code class="language-javascript">// é”™è¯¯ âŒ: åœ¨æ™®é€š JS å‡½æ•°ä¸­è°ƒç”¨ Hook
function regularFunction() {
  const [count, setCount] = useState(0); // é”™è¯¯ï¼
}

// æ­£ç¡® âœ…: åœ¨ React å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨
function MyComponent() {
  const [count, setCount] = useState(0); // æ­£ç¡®
  // ...
  return &lt;div&gt;{count}&lt;/div&gt;;
}

// æ­£ç¡® âœ…: åœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨
function useCounter(initialValue) {
  const [count, setCount] = useState(initialValue); // æ­£ç¡®
  // ... (å¯ä»¥åŒ…å«å…¶ä»– Hooks)
  return [count, setCount];
}</code></pre>
                         </div>
                         <p class="mt-6">éµå¾ªè¿™äº›è§„åˆ™å¯ä»¥ç¡®ä¿ React æ­£ç¡®åœ°ç®¡ç†ç»„ä»¶çš„çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚ESLint æ’ä»¶ (<code>eslint-plugin-react-hooks</code>) å¯ä»¥å¸®åŠ©è‡ªåŠ¨æ£€æŸ¥å¹¶å¼ºåˆ¶æ‰§è¡Œè¿™äº›è§„åˆ™ã€‚</p>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initialize Mermaid ---
             try {
                 mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
                 // Force re-render if needed after initial load, sometimes helps complex diagrams
                 // setTimeout(() => mermaid.run(), 100);
             } catch (e) {
                 console.error("Mermaid initialization error:", e);
             }


            // --- TOC Highlighting Logic ---
            const sections = document.querySelectorAll('main section[id]');
            const tocLinks = document.querySelectorAll('#local-toc a');
            let lastActiveTocLink = null;

            const observerOptions = {
                root: null, // viewport
                rootMargin: '-20% 0px -60% 0px', // Adjust margins to prioritize top sections
                threshold: 0 // Trigger as soon as any part enters/leaves margin
            };

            const observerCallback = (entries) => {
                let bestVisibleEntry = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) {
                            bestVisibleEntry = entry;
                        }
                    }
                });

                if (bestVisibleEntry) {
                    const id = bestVisibleEntry.target.getAttribute('id');
                    // Try to find a link matching the section ID directly
                    let activeLink = document.querySelector(`#local-toc a[href="#${id}"]`);

                    // If not found, check if it's a sub-section (like controlled-uncontrolled under events)
                    // This logic might need refinement based on your exact TOC structure
                    if (!activeLink) {
                         const parentSectionLink = document.querySelector(`#local-toc a[href="#${id.split('-')[0]}"]`); // Crude parent guess
                         if (parentSectionLink) {
                             // Maybe highlight the parent? Or find the specific sub-link if structured differently
                             // For now, let's try highlighting the parent if sub-link isn't directly matched
                             // activeLink = parentSectionLink;
                         }
                    }


                    if (activeLink && activeLink !== lastActiveTocLink) {
                        if (lastActiveTocLink) {
                            lastActiveTocLink.classList.remove('active');
                        }
                        activeLink.classList.add('active');
                        lastActiveTocLink = activeLink;
                    }
                }
            };

            const observer = new IntersectionObserver(observerCallback, observerOptions);
            sections.forEach(section => observer.observe(section));

            // Initial active link check
            const currentHash = window.location.hash;
             if (currentHash) {
                 const initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`);
                 if (initialActiveLink) {
                     tocLinks.forEach(link => link.classList.remove('active'));
                     initialActiveLink.classList.add('active');
                     lastActiveTocLink = initialActiveLink;
                 }
             } else if (tocLinks.length > 0 && !lastActiveTocLink) {
                 tocLinks.forEach(link => link.classList.remove('active'));
                 tocLinks[0].classList.add('active');
                 lastActiveTocLink = tocLinks[0];
             }

            // --- Fade-in Animation Logic ---
            const mainContentSections = document.querySelectorAll('main > article > section.content-section');
            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const fadeObserverCallback = (entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        const delayIndex = Array.from(mainContentSections).indexOf(entry.target);
                        entry.target.style.animationDelay = `${delayIndex * 0.05}s`;
                        entry.target.classList.add('fade-in-section');
                        observer.unobserve(entry.target);
                    }
                });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            mainContentSections.forEach(section => fadeObserver.observe(section));

            // --- Ripple Effect Logic ---
            function createRipple(event) {
                const button = event.currentTarget;
                if (!button || typeof button.getBoundingClientRect !== 'function') return;

                // Create ripple element
                const circle = document.createElement("span");
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;

                // Get primary color RGB from CSS variable for opacity
                const primaryColorRgb = getComputedStyle(document.documentElement)
                                        .getPropertyValue('--primary-color-rgb') // Assuming you define --primary-color-rgb: 59, 130, 246; in :root
                                        || '59, 130, 246'; // Fallback

                // Style and position ripple
                circle.style.width = circle.style.height = `${diameter}px`;
                const rect = button.getBoundingClientRect();
                circle.style.left = `${event.clientX - rect.left - radius}px`;
                circle.style.top = `${event.clientY - rect.top - radius}px`;
                circle.style.backgroundColor = `rgba(${primaryColorRgb}, 0.4)`; // Use RGB with alpha
                circle.classList.add("ripple"); // Add class for animation

                // Remove existing ripple before adding new one
                const existingRipple = button.querySelector(".ripple");
                if (existingRipple) {
                    existingRipple.remove();
                }

                // Add ripple and set timeout for removal
                button.appendChild(circle);
                setTimeout(() => circle.remove(), 600); // Match animation duration
            }

            // --- Quiz Toggle Logic ---
            function toggleAnswer(quizId, buttonElement) {
                const quizCard = document.getElementById(quizId);
                if (!quizCard) return;
                const answer = quizCard.querySelector('.quiz-answer');
                const icon = buttonElement.querySelector('.icon-arrow');
                const buttonTextSpan = buttonElement.querySelector('.button-text');
                if (!answer || !icon || !buttonTextSpan) return;

                const isVisible = answer.classList.contains('visible');

                if (isVisible) {
                    // Start hiding
                    answer.style.maxHeight = '0';
                    answer.style.opacity = '0';
                    answer.style.marginTop = '0';
                    answer.style.paddingTop = '0';
                    answer.style.paddingBottom = '0';
                    answer.classList.remove('visible');
                    icon.classList.remove('rotated');
                    buttonTextSpan.textContent = 'æ£€æŸ¥ç­”æ¡ˆ'; // Or 'æ˜¾ç¤ºç­”æ¡ˆ' if separate toggle

                    // Use transitionend event for cleanup (more reliable than timeout)
                    answer.addEventListener('transitionend', function handler() {
                        if (!answer.classList.contains('visible')) { // Check again in case toggled quickly
                             answer.style.display = 'none';
                        }
                         answer.removeEventListener('transitionend', handler);
                    }, { once: true });

                } else {
                    // Start showing
                    answer.style.display = 'block'; // Make it visible to measure scrollHeight
                    const scrollHeight = answer.scrollHeight; // Get full height

                    // Force reflow before applying transition changes
                    requestAnimationFrame(() => {
                        answer.style.maxHeight = scrollHeight + 'px';
                        answer.style.opacity = '1';
                        answer.style.marginTop = '1rem';
                        answer.style.paddingTop = '1rem';
                        answer.style.paddingBottom = '1rem';
                        answer.classList.add('visible');
                        icon.classList.add('rotated');
                        buttonTextSpan.textContent = 'éšè—ç­”æ¡ˆ';
                    });
                }
            }

            // --- Quiz Check Answer Logic (Global Function) ---
            window.checkAnswer = function(questionName, correctAnswerValue, buttonElement) {
                const options = document.querySelectorAll(`input[name="${questionName}"]`);
                const feedbackElement = document.getElementById(`feedback-${questionName}`);
                const quizCard = feedbackElement ? feedbackElement.closest('.quiz-card') : null;
                let selectedValue = null;
                let selectedLabel = null;

                if (!feedbackElement || !quizCard) return;

                // Reset previous styles
                quizCard.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));

                // Find selected option
                options.forEach(option => {
                    if (option.checked) {
                        selectedValue = option.value;
                        selectedLabel = option.closest('.quiz-option');
                        if (selectedLabel) selectedLabel.classList.add('selected');
                    }
                });

                // Provide feedback if no option selected
                if (!selectedValue) {
                    feedbackElement.textContent = "è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼";
                    feedbackElement.className = 'quiz-feedback warning';
                    feedbackElement.style.display = 'block';
                    return; // Stop processing
                }

                // Find the correct answer label
                let correctAnswerLabel = null;
                options.forEach(opt => { if (opt.value === correctAnswerValue) correctAnswerLabel = opt.closest('.quiz-option'); });

                // Display feedback and style options
                if (selectedValue === correctAnswerValue) {
                    feedbackElement.textContent = "å›ç­”æ­£ç¡®ï¼";
                    feedbackElement.className = 'quiz-feedback correct';
                    if(selectedLabel) selectedLabel.classList.add('correct');
                } else {
                    let correctAnswerText = '';
                    if (correctAnswerLabel) {
                        correctAnswerText = correctAnswerLabel.querySelector('span')?.textContent || `é€‰é¡¹ ${correctAnswerValue}`;
                        correctAnswerLabel.classList.add('correct'); // Highlight correct answer as well
                    }
                    feedbackElement.textContent = `å›ç­”é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯: "${correctAnswerText}"`;
                    feedbackElement.className = 'quiz-feedback incorrect';
                    if(selectedLabel) selectedLabel.classList.add('incorrect');
                }
                feedbackElement.style.display = 'block';

                // Toggle the answer visibility using the passed button element
                toggleAnswer(quizCard.id, buttonElement);
            }

            // Add ripple effect to all quiz toggle buttons
             document.querySelectorAll('.quiz-toggle').forEach(button => {
                 button.addEventListener('click', createRipple);
             });

            // Add ripple effect to other buttons if needed (e.g., form submit)
            document.querySelectorAll('.button:not(.quiz-toggle)').forEach(button => {
                 button.addEventListener('click', createRipple);
            });


        });
    </script>

</body>

</html>
