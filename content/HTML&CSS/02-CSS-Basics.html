<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS åŸºç¡€ä¸å¸ƒå±€</title> <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="../../global.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <style>
        /* Minimal page-specific styles - Rely on global.css and Tailwind */

        /* --- Base & Icons --- */
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            vertical-align: middle; font-size: 1.25em; line-height: 1;
        }
        .content-section h2 .material-symbols-outlined,
        .local-side-nav li a .material-symbols-outlined { font-size: 1.3em; margin-right: 0.3em; }

        /* --- Tags --- */
        .level-tag { display: inline-block; margin-left: 0.75rem; font-size: 0.7rem; font-weight: 600; padding: 0.15rem 0.6rem; border-radius: 0.25rem; vertical-align: middle; border: 1px solid transparent; text-transform: uppercase; letter-spacing: 0.05em; }
        .level-tag-high { background-color: var(--danger-color-light); color: var(--danger-color); border-color: var(--danger-color); }
        .level-tag-medium { background-color: var(--warning-color-light); color: var(--warning-color); border-color: var(--warning-color); }
        .level-tag-low { background-color: var(--secondary-color-light); color: var(--secondary-color); border-color: var(--secondary-color); }
        .level-tag-base { background-color: var(--bg-color-lighter); color: var(--text-color-light); border-color: var(--border-color-default); }

        /* --- Enhanced Card & Example Box Styles --- */
        .content-card, .example-box {
            transition: box-shadow 0.3s ease-in-out;
        }
        .content-card:hover, .example-box:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 6px rgba(0, 0, 0, 0.05);
        }
        .example-box {
            border: 1px solid var(--border-color-default); padding: 1.5rem; margin: 1.5rem 0;
            background-color: var(--bg-color-light); border-radius: 0.5rem;
            box-shadow: var(--card-shadow-nested-level1);
        }
        .example-box h4.demo-title {
             font-size: 1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-color-dark);
             padding-bottom: 0.5rem; border-bottom: 1px dashed var(--border-color-light);
        }
        .demo-controls { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1rem; align-items: center; }
        .demo-controls label { margin-bottom: 0; font-size: 0.85rem; color: var(--text-color-default); }
        .demo-controls input[type="range"], .demo-controls input[type="number"], .demo-controls select {
             padding: 0.3rem 0.5rem; border: 1px solid var(--border-color-default); border-radius: 0.25rem; font-size: 0.85rem;
        }
        .demo-controls input[type="range"] { vertical-align: middle; cursor: pointer; }
        .demo-controls input[type="number"] { width: 60px; }
        .demo-controls .button { font-size: 0.8rem; padding: 0.4rem 0.8rem; }
        .demo-output { margin-top: 1rem; font-size: 0.85rem; color: var(--text-color-light); background-color: var(--bg-color-lighter); padding: 0.75rem 1rem; border-radius: 4px; border: 1px dashed var(--border-color-light); min-height: 3em; line-height: 1.5; white-space: pre-wrap; }

        /* --- Interactive Demo Button States --- */
        .demo-controls button.active {
            background-color: var(--primary-color); color: white; border-color: var(--primary-color-dark);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
        }
        .demo-controls input:disabled, .demo-controls select:disabled { opacity: 0.5; cursor: not-allowed; background-color: var(--bg-color-lighter); }

        /* --- Ripple Effect --- */
        .ripple-container { position: relative; overflow: hidden; }
        .ripple { position: absolute; border-radius: 50%; background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.3); transform: scale(0); animation: ripple-animation 0.6s linear; pointer-events: none; }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }


        /* --- Selector Demo --- */
        .selector-demo-area { display: grid; grid-template-columns: 1fr 1.2fr; gap: 1.5rem; align-items: start; }
        @media (max-width: 768px) { .selector-demo-area { grid-template-columns: 1fr; } }
        .selector-demo-controls label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-color-default); }
        .selector-demo-controls input[type="text"] { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid var(--border-color-default); border-radius: 0.375rem; font-family: var(--font-family-mono); font-size: 0.9rem; margin-bottom: 1rem; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
        .selector-demo-controls input[type="text"]:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--focus-ring-color); }
        #selector-specificity-output { font-size: 0.85rem; color: var(--text-color-light); margin-top: 0.5rem; font-family: var(--font-family-mono); min-height: 6em; background-color: var(--bg-color-lighter); padding: 0.75rem; border-radius: 4px; border: 1px dashed var(--border-color-light); white-space: pre-wrap; }
        #selector-parsed-output { margin-top: 0.5rem; font-size: 0.8rem; line-height: 1.4; }
        #selector-parsed-output span { display: inline-block; padding: 2px 5px; margin: 2px; border-radius: 3px; transition: background-color 0.3s ease; }
        #selector-parsed-output .spec-id { background-color: #fee2e2; color: #991b1b; border: 1px solid #fecaca; } /* Red */
        #selector-parsed-output .spec-class { background-color: #fff7ed; color: #9a3412; border: 1px solid #fed7aa; } /* Orange */
        #selector-parsed-output .spec-element { background-color: #eff6ff; color: #1e40af; border: 1px solid #bfdbfe; } /* Blue */
        #selector-parsed-output .spec-other { background-color: #f3f4f6; color: #4b5563; border: 1px solid #e5e7eb; } /* Gray */
        .selector-demo-html { border: 1px solid var(--border-color-default); padding: 1rem; border-radius: 0.375rem; background-color: white; font-size: 0.9rem; line-height: 1.6; }
        .selector-demo-html .highlighted { background-color: #fef9c3; outline: 2px solid #facc15; border-radius: 3px; transition: all 0.2s ease-out; box-shadow: 0 0 8px rgba(250, 204, 21, 0.5); }
        .selector-demo-html span, .selector-demo-html div, .selector-demo-html p, .selector-demo-html button { margin: 2px 0; display: block; padding: 2px 4px; border: 1px solid transparent; }
        .selector-demo-html .demo-item { border: 1px dashed #ccc; padding: 5px; margin: 5px; }


        /* --- Box Model Demo --- */
        .box-model-demo-area { display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; align-items: start; }
        @media (max-width: 768px) { .box-model-demo-area { grid-template-columns: 1fr; } }
        .box-model-controls .control-group { margin-bottom: 1rem; }
        .box-model-controls label { display: block; font-size: 0.8rem; margin-bottom: 0.25rem; color: var(--text-color-default); font-weight: 500;}
        .box-model-controls input[type="range"] { width: calc(100% - 70px); }
        .box-model-controls .value-display { display: inline-block; width: 50px; text-align: right; font-size: 0.8rem; font-family: var(--font-family-mono); margin-left: 10px; background: #eee; padding: 2px 4px; border-radius: 3px; }
        .box-model-visualizer {
            background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default);
            padding: 20px; /* FIXED padding for stable visual area */
            min-height: 280px;
            position: relative; display: flex; align-items: center; justify-content: center;
            border-radius: 0.375rem;
            overflow: hidden; /* Prevent box overflow */
        }
        .box-model-box {
            position: relative;
            box-sizing: content-box; /* Default, changed by JS */
            transition: all 0.3s ease-out;
            background-clip: padding-box;
            z-index: 1;
            margin: 0; /* Margin applied via JS */
            border: 5px solid #0ea5e9; /* Default border */
            padding: 10px; /* Default padding */
            background-color: rgba(22, 163, 74, 0.1); /* Simulate padding bg */
            /* Add visual indicator for margin */
            outline-offset: 0px; /* Start offset for outline */
            outline: 1px dashed #a855f7; /* Use outline to show margin */
            transition: outline-offset 0.3s ease-out, width 0.3s ease-out, height 0.3s ease-out, padding 0.3s ease-out, border-width 0.3s ease-out;
        }
        .box-model-content-visual {
            width: 100%; height: 100%;
            background-color: #fefce8; /* Content color */
            border: 1px dashed #ca8a04;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; color: #ca8a04; text-align: center;
            transition: all 0.3s ease-out;
        }
        #box-model-output { white-space: pre-wrap; }


        /* --- Position Demo --- */
        .position-container-interactive { position: relative; height: 200px; background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default); margin-top: 1rem; border-radius: 0.375rem; overflow: auto; transition: border 0.3s ease-out; }
        .position-container-interactive.has-relative-context { border-style: solid; border-color: var(--primary-color); border-width: 2px; box-shadow: 0 0 10px rgba(59, 130, 246, 0.2); }
        .pos-box-interactive { width: 80px; height: 50px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 0.8rem; position: static; top: auto; left: auto; bottom: auto; right: auto; transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 1; margin: 5px; }
        .pos-box-target { background-color: #bfdbfe; border: 1px solid #60a5fa; color: #1e40af; }
        .pos-box-other { background-color: #d1fae5; border: 1px solid #34d399; color: #065f46; }
        /* Specific offsets applied via JS */
        .pos-box-interactive.is-relative { position: relative; top: 15px; left: 15px; z-index: 2; }
        .pos-box-interactive.is-absolute { position: absolute; top: 40px; right: 30px; z-index: 3; margin: 0; }
        .pos-box-interactive.is-fixed { position: fixed; bottom: 80px; right: 40px; z-index: 50; margin: 0; background-color: #fecaca; border-color: #ef4444; color: #991b1b; }
        .pos-box-interactive.is-sticky { position: sticky; top: 10px; z-index: 4; background-color: #fed7aa; border-color: #f97316; color: #9a3412; }
        .context-arrow { position: absolute; width: 0; height: 0; border-style: solid; opacity: 0; transition: opacity 0.3s ease-out, top 0.3s ease-out, left 0.3s ease-out; pointer-events: none; z-index: 10; border-width: 6px 0 6px 10px; border-color: transparent transparent transparent var(--primary-color); }
        .context-arrow.visible { opacity: 0.7; }


        /* --- Stacking Context (z-index) Demo --- */
        .zindex-demo-area { display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; align-items: start; }
        @media (max-width: 768px) { .zindex-demo-area { grid-template-columns: 1fr; } }
        .zindex-controls .control-group { margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color-light); }
        .zindex-controls .control-group:last-child { border-bottom: none; margin-bottom: 0; }
        .zindex-controls label { display: block; font-size: 0.8rem; margin-bottom: 0.25rem; color: var(--text-color-default); font-weight: 500;}
        .zindex-visualizer { position: relative; min-height: 150px; background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default); border-radius: 0.375rem; padding: 1rem; }
        .zindex-box { width: 100px; height: 80px; border-radius: 4px; position: absolute; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 0.9rem; transition: all 0.3s ease-out; border: 1px solid rgba(0,0,0,0.2); }
        .zindex-box-1 { background-color: rgba(252, 165, 165, 0.8); color: #7f1d1d; top: 20px; left: 20px; }
        .zindex-box-2 { background-color: rgba(165, 180, 252, 0.8); color: #312e81; top: 50px; left: 60px; }
        .zindex-box.is-positioned { /* Applied when position is not static */ }


        /* --- Display Demo --- */
        .display-container-interactive { background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default); padding: 1rem; margin-top: 1rem; border-radius: 0.375rem; min-height: 100px; overflow: hidden; }
        .display-item { border: 1px solid var(--primary-color); background-color: var(--primary-color-light); color: var(--primary-color-dark); padding: 0.5rem 1rem; margin: 5px; font-size: 0.9rem; text-align: center; transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out, width 0.3s ease-in-out, height 0.3s ease-in-out, margin 0.3s ease-in-out, padding 0.3s ease-in-out; transform-origin: center left; }
        .display-item.is-hiding { opacity: 0; transform: scale(0.8); padding: 0 !important; margin: 0 !important; height: 0 !important; border-width: 0 !important; font-size: 0; line-height: 0; }
        .display-item.is-block { width: auto; }
        .display-item.is-inline-block { width: 120px; height: 40px; }


        /* --- Flexbox Playground --- */
        .flex-playground-area { display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; align-items: start; }
        @media (max-width: 768px) { .flex-playground-area { grid-template-columns: 1fr; } }
        .flex-playground-controls .control-group { margin-bottom: 1rem; }
        .flex-playground-controls label { display: block; font-size: 0.8rem; margin-bottom: 0.25rem; color: var(--text-color-default); font-weight: 500;}
        .flex-playground-controls select { width: 100%; }
        .flex-playground-container { display: flex; min-height: 150px; background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default); padding: 0.5rem; border-radius: 0.375rem; transition: all 0.3s ease-out; }
        .flex-playground-item { background-color: #cffafe; border: 1px solid #06b6d4; color: #0e7490; padding: 1rem; text-align: center; border-radius: 0.25rem; min-width: 60px; flex-basis: 80px; transition: all 0.3s ease-out; }


        /* --- Grid Demo --- */
        /* IMPROVED Grid Example Styles */
        .grid-example-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Define 3 columns */
            grid-template-rows: repeat(2, 80px);    /* Define 2 rows */
            gap: 10px;
            background-color: var(--bg-color-lighter);
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px dashed var(--border-color-default);
        }
        .grid-example-item {
            background-color: #fce7f3; border: 1px solid #db2777; color: #9d174d;
            padding: 1rem; text-align: center; border-radius: 0.25rem;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9rem; font-weight: 500;
        }
        /* Explicit placement examples */
        .grid-item-explicit-1 { grid-column: 1; grid-row: 1; }
        .grid-item-explicit-2 { grid-column: 3; grid-row: 1; }
        .grid-item-explicit-3 { grid-column: 1 / 3; grid-row: 2; background-color: #fbcfe8; } /* Span columns */
        .grid-item-explicit-4 { grid-column: 3; grid-row: 2; }


        /* --- BFC Demo --- */
        .bfc-demo-area { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .bfc-demo-case { border: 1px solid var(--border-color-default); border-radius: 0.5rem; padding: 1rem; background-color: white; }
        .bfc-demo-case h5 { font-weight: 600; margin-bottom: 0.75rem; font-size: 0.9rem; color: var(--text-color-dark); }
        /* Margin Collapse Demo */
        .bfc-margin-collapse { position: relative; padding-top: 10px; padding-bottom: 10px; }
        .bfc-margin-collapse p { margin: 10px 0; background: #ecfdf5; border: 1px solid #6ee7b7; padding: 5px; color: #047857; position: relative; z-index: 1; }
        .margin-visual { position: absolute; left: 0; right: 0; height: 10px; background-color: rgba(248, 113, 113, 0.3); border: 1px dashed rgba(220, 38, 38, 0.5); z-index: 0; transition: top 0.4s ease-out, bottom 0.4s ease-out; pointer-events: none; }
        #bfc-p1 .margin-visual-top { top: -10px; } #bfc-p1 .margin-visual-bottom { bottom: -10px; }
        #bfc-p2 .margin-visual-top { top: -10px; } #bfc-p2 .margin-visual-bottom { bottom: -10px; }
        /* Use flow-root for BFC to avoid layout jitter */
        #bfc-p2-container.has-bfc { display: flow-root; background-color: rgba(239, 246, 255, 0.5); border-radius: 3px; }
        /* Clear Float Demo */
        .bfc-clear-float .float-box { float: left; width: 60px; height: 40px; background: #fef3c7; border: 1px solid #fcd34d; margin: 5px; color: #b45309; }
        .bfc-clear-float .parent-container { border: 1px dashed #f87171; padding: 5px; margin-bottom: 5px; transition: all 0.4s ease-out; background-color: transparent; min-height: 10px; }
        .bfc-clear-float .parent-container.show-bg { background-color: rgba(254, 226, 226, 0.4); }
        .bfc-clear-float .parent-container.has-bfc { display: flow-root; /* Use flow-root */ }


        /* --- Centering Demo --- */
        .centering-methods-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; }
        .centering-example { border: 1px solid var(--border-color-light); border-radius: 0.5rem; padding: 1rem; background-color: white; }
        .centering-example h4 { margin-bottom: 0.75rem; }
        .centering-example pre { margin-top: 1rem; font-size: 0.8rem; padding: 0.75rem; }
        .center-container { height: 100px; background-color: var(--bg-color-lighter); border: 1px dashed var(--border-color-default); margin-bottom: 1rem; border-radius: 0.375rem; }
        .center-item { width: 50px; height: 50px; background-color: var(--secondary-color-light); border: 1px solid var(--secondary-color); color: var(--secondary-color); display: flex; align-items: center; justify-content: center; font-size: 0.8rem; border-radius: 0.25rem; }
        .center-flex { display: flex; justify-content: center; align-items: center; }
        .center-grid { display: grid; place-items: center; }
        .center-pos-container { position: relative; }
        .center-pos-item { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }


        /* --- Fade-in Animation --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-section { opacity: 0; animation: fadeIn 0.5s ease-out forwards; }
        .fade-in-section.visible { opacity: 1; transform: translateY(0); }

    </style>
</head>

<body class="bg-gray-100">

    <div class="page-container">

        <aside class="local-side-nav">
             <h4 class="head4">CSS åŸºç¡€ä¸å¸ƒå±€</h4>
             <ul id="local-toc">
                 <li><a href="#selectors" class="sidebar-link active"><span class="material-symbols-outlined">target</span>é€‰æ‹©å™¨</a></li>
                 <li><a href="#box-model" class="sidebar-link"><span class="material-symbols-outlined">inventory_2</span>ç›’æ¨¡å‹</a></li>
                 <li><a href="#position" class="sidebar-link"><span class="material-symbols-outlined">layers</span>Position & Z-Index</a></li>
                 <li><a href="#display" class="sidebar-link"><span class="material-symbols-outlined">visibility</span>Display å±æ€§</a></li>
                 <li><a href="#flexbox" class="sidebar-link"><span class="material-symbols-outlined">align_horizontal_left</span>Flexbox å¸ƒå±€</a></li>
                 <li><a href="#grid" class="sidebar-link"><span class="material-symbols-outlined">grid_view</span>Grid å¸ƒå±€</a></li>
                 <li><a href="#centering" class="sidebar-link"><span class="material-symbols-outlined">center_focus_strong</span>æ°´å¹³å‚ç›´å±…ä¸­</a></li>
                 <li><a href="#bfc" class="sidebar-link"><span class="material-symbols-outlined">space_dashboard</span>BFC</a></li>
             </ul>
             <a href="../../index.html" class="back-link">
                 &larr; è¿”å›å¤§çº²ç›®å½•
             </a>
         </aside>

        <main class="content-main">
            <article>
                <section id="intro" class="content-section fade-in-section" style="animation-delay: 0s;">
                     <h1 class="head1 flex items-center gap-2">
                         <span class="material-symbols-outlined text-3xl text-blue-600">css</span> CSS åŸºç¡€ä¸å¸ƒå±€æ ¸å¿ƒ
                     </h1>
                     <p class="mb-4">å±‚å æ ·å¼è¡¨ (Cascading Style Sheets) æ˜¯ç½‘é¡µè®¾è®¡çš„åŸºç¡€ï¼Œç”¨äºå®šä¹‰é¡µé¢çš„å¤–è§‚å’Œå¸ƒå±€ã€‚æœ¬èŠ‚å°†æ·±å…¥æ¢è®¨ CSS çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒåŒ…æ‹¬é€‰æ‹©å™¨ã€ç›’æ¨¡å‹ã€å®šä½ã€æ˜¾ç¤ºæ–¹å¼ä»¥åŠç°ä»£å¸ƒå±€æŠ€æœ¯ Flexbox å’Œ Gridï¼Œå¹¶é€šè¿‡äº¤äº’å¼ç¤ºä¾‹åŠ æ·±ç†è§£ã€‚</p>
                     <p class="mt-4 bg-blue-50 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md text-sm">ğŸ’¡
                         <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬ã€‚å°è¯•ä¸‹æ–¹çš„äº¤äº’å¼æ¼”ç¤ºæ¥ä½“éªŒ CSS å±æ€§çš„æ•ˆæœï¼
                     </p>
                 </section>

                <section id="selectors" class="content-section fade-in-section" style="animation-delay: 0.05s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">target</span>CSS é€‰æ‹©å™¨ä¸ä¼˜å…ˆçº§
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µ</h3>
                        <p>é€‰æ‹©å™¨ç”¨äºâ€œé€‰æ‹©â€ä½ æƒ³è¦åº”ç”¨æ ·å¼çš„ HTML å…ƒç´ ã€‚ä¼˜å…ˆçº§å†³å®šäº†å½“å¤šä¸ªè§„åˆ™å†²çªæ—¶å“ªä¸ªç”Ÿæ•ˆã€‚</p>

                        <div class="example-box selector-demo-area">
                            <div class="selector-demo-controls">
                                 <h4 class="demo-title w-full">äº¤äº’å¼é€‰æ‹©å™¨æ¼”ç¤º</h4>
                                <label for="selector-input">è¾“å…¥ CSS é€‰æ‹©å™¨:</label>
                                <input type="text" id="selector-input" placeholder=".item, #container p, div > span" value="#container p.item">
                                <button id="selector-apply-btn" class="button button-primary text-sm py-1 px-3 ripple-container">åº”ç”¨é€‰æ‹©å™¨</button>
                                <h5 class="head6 mt-4 mb-1 w-full">è§£æä¸ä¼˜å…ˆçº§è®¡ç®—:</h5>
                                <div id="selector-parsed-output"></div>
                                <div id="selector-specificity-output">(0, 1, 1, 1)</div>
                                <p class="text-xs text-gray-500 mt-1 w-full">æ ¼å¼: (å†…è”, ID, ç±»/å±æ€§/ä¼ªç±», å…ƒç´ /ä¼ªå…ƒç´ )</p>
                            </div>
                            <div class="selector-demo-html" id="selector-target-html">
                                <div class="demo-item" id="container">
                                    Container DIV (#container)
                                    <p class="item intro">è¿™æ˜¯ä¸€ä¸ªæ®µè½ (p.item.intro)ã€‚</p>
                                    <div class="item">
                                        è¿™æ˜¯ä¸€ä¸ªåµŒå¥— DIV (.item)
                                        <span>åµŒå¥— SPAN</span>
                                    </div>
                                    <p>å¦ä¸€ä¸ªæ®µè½ã€‚</p>
                                    <button data-type="submit">æŒ‰é’® (button[data-type="submit"])</button>
                                </div>
                                <span class="item">å¤–éƒ¨ SPAN (.item)</span>
                            </div>
                        </div>
                        <h3 class="head3 mt-6">å¸¸ç”¨é€‰æ‹©å™¨å›é¡¾</h3>
                         <ul>
                            <li><strong>ID (<code>#id</code>):</strong> å”¯ä¸€ï¼Œé«˜ä¼˜å…ˆçº§ã€‚</li>
                            <li><strong>ç±» (<code>.class</code>):</strong> å¯å¤ç”¨ï¼Œå¸¸ç”¨ã€‚</li>
                            <li><strong>æ ‡ç­¾ (<code>tag</code>):</strong> åŸºç¡€é€‰æ‹©ã€‚</li>
                            <li><strong>å±æ€§ (<code>[attr=val]</code>):</strong> æ ¹æ®å±æ€§é€‰æ‹©ã€‚</li>
                            <li><strong>ä¼ªç±» (<code>:hover</code>, <code>:nth-child()</code>):</strong> ç‰¹å®šçŠ¶æ€ã€‚</li>
                            <li><strong>ä¼ªå…ƒç´  (<code>::before</code>, <code>::after</code>):</strong> å…ƒç´ éƒ¨åˆ†ã€‚</li>
                            <li><strong>åä»£ (<code>A B</code>), å­ (<code>A > B</code>), ç›¸é‚»å…„å¼Ÿ (<code>A + B</code>), é€šç”¨å…„å¼Ÿ (<code>A ~ B</code>):</strong> å…³ç³»é€‰æ‹©ã€‚</li>
                        </ul>
                         <h3 class="head3">ä¼˜å…ˆçº§è§„åˆ™ (é¢è¯•é‡ç‚¹)</h3>
                         <p>å¤§è‡´é¡ºåº: <code>!important</code> > å†…è” > ID > ç±»/å±æ€§/ä¼ªç±» > æ ‡ç­¾/ä¼ªå…ƒç´ ã€‚ç²¾ç¡®è®¡ç®—éœ€æ¯”è¾ƒå„ç±»é€‰æ‹©å™¨çš„æ•°é‡ï¼Œæ•°é‡å¤šçš„ä¼˜å…ˆï¼ŒåŒçº§æ¯”è¾ƒä¸‹ä¸€çº§ã€‚</p>
                         <p>äº¤äº’æ¼”ç¤ºä¸­çš„è®¡ç®—å™¨å¯ä»¥å¸®ä½ ç†è§£ä¸åŒéƒ¨åˆ†çš„æƒé‡ã€‚</p>
                    </div>
                </section>

                <section id="box-model" class="content-section fade-in-section" style="animation-delay: 0.1s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">inventory_2</span>ç›’æ¨¡å‹ (Box Model)
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µ</h3>
                        <p>æ¯ä¸ª HTML å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç›’å­ï¼ŒåŒ…å«å†…å®¹(Content)ã€å†…è¾¹è·(Padding)ã€è¾¹æ¡†(Border)ã€å¤–è¾¹è·(Margin)ã€‚<code>box-sizing</code> å±æ€§å†³å®šäº† <code>width</code> å’Œ <code>height</code> çš„è®¡ç®—æ–¹å¼ã€‚</p>

                        <div class="example-box box-model-demo-area">
                            <div class="box-model-controls">
                                <h4 class="demo-title w-full">äº¤äº’å¼ç›’æ¨¡å‹æ¼”ç¤º</h4>
                                <div class="control-group">
                                    <label>Box Sizing (é¢è¯•é‡ç‚¹):</label>
                                    <div class="flex gap-4 mt-1">
                                        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="box-sizing" value="content-box" checked> content-box</label>
                                        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="box-sizing" value="border-box"> border-box</label>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="bm-width">Width:</label>
                                    <input type="range" id="bm-width" min="50" max="200" value="100"><span class="value-display" id="bm-width-val">100px</span>
                                </div>
                                <div class="control-group">
                                    <label for="bm-height">Height:</label>
                                    <input type="range" id="bm-height" min="30" max="150" value="50"><span class="value-display" id="bm-height-val">50px</span>
                                </div>
                                <div class="control-group">
                                    <label for="bm-padding">Padding:</label>
                                    <input type="range" id="bm-padding" min="0" max="30" value="10"><span class="value-display" id="bm-padding-val">10px</span>
                                </div>
                                <div class="control-group">
                                    <label for="bm-border">Border:</label>
                                    <input type="range" id="bm-border" min="0" max="15" value="5"><span class="value-display" id="bm-border-val">5px</span>
                                </div>
                                <div class="control-group">
                                    <label for="bm-margin">Margin:</label>
                                    <input type="range" id="bm-margin" min="0" max="20" value="10"><span class="value-display" id="bm-margin-val">10px</span>
                                </div>
                                <button id="bm-reset-btn" class="button button-secondary mt-2 ripple-container">é‡ç½®</button>
                            </div>
                            <div class="box-model-visualizer" id="bm-visualizer">
                                <div class="box-model-box" id="bm-box">
                                    <div class="box-model-content-visual" id="bm-content-viz">
                                        Content
                                    </div>
                                </div>
                            </div>
                             <div class="demo-output" id="box-model-output">è®¡ç®—ä¸­...</div>
                        </div>
                        <h3 class="head3 mt-6"><code>box-sizing</code> (é¢è¯•é‡ç‚¹)</h3>
                        <ul>
                            <li><strong><code>content-box</code> (é»˜è®¤):</strong> è®¾ç½®çš„ <code>width/height</code> ä»…æŒ‡å†…å®¹åŒºã€‚æ€»å°ºå¯¸ = å†…å®¹ + padding + borderã€‚</li>
                            <li><strong><code>border-box</code> (æ¨è):</strong> è®¾ç½®çš„ <code>width/height</code> åŒ…å« å†…å®¹ + padding + borderã€‚å¸ƒå±€æ›´å¯é¢„æµ‹ã€‚</li>
                        </ul>
                        <pre><code class="language-css">/* æ¨èå…¨å±€è®¾ç½® */
html { box-sizing: border-box; }
*, *:before, *:after { box-sizing: inherit; }</code></pre>
                    </div>
                </section>

                <section id="position" class="content-section fade-in-section" style="animation-delay: 0.15s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">layers</span>Position & Z-Index
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">Position æ¦‚å¿µä¸å±æ€§å€¼</h3>
                        <p><code>position</code> å®šä¹‰å…ƒç´ å®šä½æ–¹å¼ï¼Œé…åˆ <code>top/right/bottom/left/z-index</code> æ§åˆ¶ä½ç½®ã€‚</p>
                        <ul>
                            <li><strong><code>static</code> (é»˜è®¤):</strong> æ–‡æ¡£æµã€‚</li>
                            <li><strong><code>relative</code>:</strong> ç›¸å¯¹äºè‡ªèº«æ­£å¸¸ä½ç½®å®šä½ï¼Œ<strong>å ä½</strong>ã€‚å¸¸åšå®šä½ä¸Šä¸‹æ–‡ã€‚</li>
                            <li><strong><code>absolute</code>:</strong> ç›¸å¯¹äºæœ€è¿‘çš„é static ç¥–å…ˆå®šä½ï¼Œ<strong>è„±ç¦»æ–‡æ¡£æµ</strong>ã€‚</li>
                            <li><strong><code>fixed</code>:</strong> ç›¸å¯¹äºè§†å£å®šä½ï¼Œ<strong>è„±ç¦»æ–‡æ¡£æµ</strong>ã€‚</li>
                            <li><strong><code>sticky</code>:</strong> ç²˜æ€§å®šä½ï¼Œæ»šåŠ¨åˆ°é˜ˆå€¼æ—¶è¡¨ç°ç±»ä¼¼ fixedã€‚</li>
                        </ul>

                        <div class="example-box position-demo-area">
                             <h4 class="demo-title">äº¤äº’å¼å®šä½æ¼”ç¤º (å«å®šä½ä¸Šä¸‹æ–‡)</h4>
                             <div class="position-controls demo-controls" id="position-controls"> <button class="button button-secondary active" data-pos="static">Static</button>
                                <button class="button button-secondary" data-pos="relative">Relative</button>
                                <button class="button button-secondary" data-pos="absolute">Absolute</button>
                                <button class="button button-secondary" data-pos="fixed">Fixed</button>
                                <button class="button button-secondary" data-pos="sticky">Sticky</button>
                                <label class="ml-auto flex items-center gap-1 cursor-pointer">
                                    <input type="checkbox" id="toggle-context"> ä¸ºå®¹å™¨åˆ›å»ºå®šä½ä¸Šä¸‹æ–‡ (relative)
                                </label>
                             </div>
                             <div class="position-container-interactive" id="position-container">
                                <div class="pos-box-interactive pos-box-target" id="target-box">Target</div>
                                <div class="pos-box-interactive pos-box-other">Other 1</div>
                                <div class="pos-box-interactive pos-box-other">Other 2</div>
                                <div style="height: 150px; font-size: 0.8rem; color: #999; text-align: center; padding-top: 50px;">(æ»šåŠ¨åŒºåŸŸ)</div>
                                <div class="pos-box-interactive pos-box-other">Other 3</div>
                                <div class="context-arrow" id="context-arrow"></div>
                             </div>
                             <div class="demo-output" id="pos-output">å½“å‰ Target çŠ¶æ€: static (åœ¨æ–‡æ¡£æµä¸­)</div>
                        </div>
                        <h3 class="head3 mt-6">Z-Index ä¸å±‚å ä¸Šä¸‹æ–‡ (é¢è¯•é‡ç‚¹)</h3>
                        <p><code>z-index</code> å±æ€§è®¾ç½®å®šä½å…ƒç´ ï¼ˆé <code>static</code>ï¼‰çš„å †å é¡ºåºã€‚æ•°å€¼è¶Šå¤§è¶Šé ä¸Šã€‚å®ƒåªåœ¨åŒä¸€ä¸ª**å±‚å ä¸Šä¸‹æ–‡ (Stacking Context)** å†…æ¯”è¾ƒæ‰æœ‰æ„ä¹‰ã€‚</p>
                        <p>å±‚å ä¸Šä¸‹æ–‡ç”±æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ åˆ›å»ºï¼ˆå¦‚ <code>position</code> ä¸º absolute/relative ä¸” <code>z-index</code> é autoï¼Œ<code>position: fixed/sticky</code>ï¼Œ<code>opacity</code> < 1ï¼Œ<code>transform</code> é none ç­‰ï¼‰ã€‚å­å…ƒç´ çš„ <code>z-index</code> å€¼åªä¸åŒä¸€å±‚å ä¸Šä¸‹æ–‡å†…çš„å…„å¼Ÿå…ƒç´ æ¯”è¾ƒã€‚</p>

                        <div class="example-box zindex-demo-area">
                             <div class="zindex-controls">
                                 <h4 class="demo-title w-full">äº¤äº’å¼ Z-Index æ¼”ç¤º</h4>
                                 <div class="control-group">
                                     <h5 class="head6">Box 1 (Red)</h5>
                                     <label>Position:
                                         <select class="zindex-pos-select" data-target="zindex-box-1">
                                             <option value="static" selected>static</option> <option value="relative">relative</option> <option value="absolute">absolute</option>
                                         </select>
                                     </label>
                                     <label class="mt-2">Z-Index:
                                         <input type="number" class="zindex-input" data-target="zindex-box-1" value="1" step="1" disabled>
                                     </label>
                                 </div>
                                 <div class="control-group">
                                     <h5 class="head6">Box 2 (Blue)</h5>
                                      <label>Position:
                                         <select class="zindex-pos-select" data-target="zindex-box-2">
                                             <option value="static" selected>static</option> <option value="relative">relative</option> <option value="absolute">absolute</option>
                                         </select>
                                     </label>
                                     <label class="mt-2">Z-Index:
                                         <input type="number" class="zindex-input" data-target="zindex-box-2" value="2" step="1" disabled>
                                     </label>
                                 </div>
                             </div>
                             <div class="zindex-visualizer">
                                 <div class="zindex-box zindex-box-1" id="zindex-box-1" style="z-index: 1;">Box 1</div>
                                 <div class="zindex-box zindex-box-2" id="zindex-box-2" style="z-index: 2;">Box 2</div>
                             </div>
                        </div>
                        </div>
                </section>

                <section id="display" class="content-section fade-in-section" style="animation-delay: 0.2s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">visibility</span>Display å±æ€§ä¸å¸ƒå±€æµ
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µä¸å¸¸ç”¨å€¼</h3>
                        <p><code>display</code> å†³å®šå…ƒç´ çš„æ˜¾ç¤ºç±»å‹å’Œå¸ƒå±€è¡Œä¸ºã€‚</p>
                        <ul>
                            <li><strong><code>block</code>:</strong> ç‹¬å ä¸€è¡Œï¼Œå¯è®¾å®½é«˜å†…å¤–è¾¹è·ã€‚</li>
                            <li><strong><code>inline</code>:</strong> åŒè¡Œæ’åˆ—ï¼Œå®½é«˜æ— æ•ˆï¼Œå‚ç›´ margin/padding/border ä¸å½±å“å¸ƒå±€ã€‚</li>
                            <li><strong><code>inline-block</code>:</strong> åŒè¡Œæ’åˆ—ï¼Œå¯è®¾å®½é«˜å†…å¤–è¾¹è·ã€‚</li>
                            <li><strong><code>none</code>:</strong> éšè—ä¸”**ä¸å ç©ºé—´** (é¢è¯•é‡ç‚¹)ã€‚</li>
                            <li><strong><code>flex</code> / <code>grid</code>:</strong> å¯ç”¨ Flexbox / Grid å¸ƒå±€ã€‚</li>
                        </ul>

                        <div class="example-box display-demo-area">
                             <h4 class="demo-title">äº¤äº’å¼ Display æ¼”ç¤º (å«åŠ¨ç”»)</h4>
                             <div class="display-controls demo-controls" id="display-controls"> <button class="button button-secondary active" data-disp="inline">Inline</button>
                                <button class="button button-secondary" data-disp="block">Block</button>
                                <button class="button button-secondary" data-disp="inline-block">Inline-Block</button>
                                <button class="button button-secondary" data-disp="none">None</button>
                             </div>
                             <div class="display-container-interactive" id="display-container">
                                <span class="display-item" id="display-target-item" style="display: inline;">Target</span>
                                <span class="display-item">Sibling 1</span>
                                <span class="display-item">Sibling 2</span>
                             </div>
                             <div class="demo-output" id="display-output">å½“å‰ Target çŠ¶æ€: inline (åŒè¡Œæ’åˆ—, å®½é«˜æ— æ•ˆ)</div>
                        </div>
                        <p class="mt-4"><strong>é¢è¯•è€ƒç‚¹:</strong> ç†è§£ <code>block</code>, <code>inline</code>, <code>inline-block</code> çš„æ ¸å¿ƒåŒºåˆ«å’Œå¯¹å¸ƒå±€æµçš„å½±å“ã€‚<code>display: none</code> ä¸ <code>visibility: hidden</code> çš„å…³é”®åŒºåˆ«ï¼ˆå‰è€…ä¸å ç©ºé—´ï¼Œåè€…å ç©ºé—´ï¼‰ã€‚</p>
                    </div>
                </section>

                <section id="flexbox" class="content-section fade-in-section" style="animation-delay: 0.25s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">align_horizontal_left</span>Flexbox å¸ƒå±€
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µ</h3>
                        <p>ä¸€ç»´å¸ƒå±€æ¨¡å‹ï¼Œç”¨äºçµæ´»æ§åˆ¶é¡¹ç›®(items)åœ¨å®¹å™¨(container)å†…çš„å¯¹é½ã€åˆ†å¸ƒå’Œé¡ºåºã€‚</p>

                        <div class="example-box flex-playground-area">
                            <div class="flex-playground-controls">
                                <h4 class="demo-title w-full">Flexbox äº¤äº’å¼æ¼”ç»ƒåœº</h4>
                                <div class="control-group">
                                    <label for="flex-direction">flex-direction:</label>
                                    <select id="flex-direction">
                                        <option value="row" selected>row (é»˜è®¤)</option> <option value="row-reverse">row-reverse</option>
                                        <option value="column">column</option> <option value="column-reverse">column-reverse</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="justify-content">justify-content:</label>
                                    <select id="justify-content">
                                        <option value="flex-start" selected>flex-start (é»˜è®¤)</option> <option value="flex-end">flex-end</option>
                                        <option value="center">center</option> <option value="space-between">space-between</option>
                                        <option value="space-around">space-around</option> <option value="space-evenly">space-evenly</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="align-items">align-items:</label>
                                    <select id="align-items">
                                        <option value="stretch" selected>stretch (é»˜è®¤)</option> <option value="flex-start">flex-start</option>
                                        <option value="flex-end">flex-end</option> <option value="center">center</option>
                                        <option value="baseline">baseline</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="flex-wrap">flex-wrap:</label>
                                    <select id="flex-wrap">
                                        <option value="nowrap" selected>nowrap (é»˜è®¤)</option> <option value="wrap">wrap</option>
                                        <option value="wrap-reverse">wrap-reverse</option>
                                    </select>
                                </div>
                                 <div class="control-group">
                                    <label for="align-content">align-content (å¤šè¡Œæ—¶):</label>
                                    <select id="align-content">
                                        <option value="stretch" selected>stretch (é»˜è®¤)</option> <option value="flex-start">flex-start</option>
                                        <option value="flex-end">flex-end</option> <option value="center">center</option>
                                        <option value="space-between">space-between</option> <option value="space-around">space-around</option>
                                    </select>
                                </div>
                                <button id="flex-reset-btn" class="button button-secondary mt-2 ripple-container">é‡ç½®</button>
                            </div>
                            <div> <div class="flex-playground-container" id="flex-pg-container">
                                    <div class="flex-playground-item">1</div>
                                    <div class="flex-playground-item" style="padding: 1.5rem 1rem;">2</div>
                                    <div class="flex-playground-item" style="font-size: 1.2rem;">3</div>
                                    <div class="flex-playground-item">4</div>
                                    <div class="flex-playground-item">5</div> </div>
                                <div class="demo-output" id="flex-output">ä¸»è½´æ–¹å‘: row, ä¸»è½´å¯¹é½: flex-start, äº¤å‰è½´å¯¹é½: stretch, æ¢è¡Œ: nowrap</div>
                            </div>
                        </div>
                        <h3 class="head3 mt-6">æ ¸å¿ƒæ¦‚å¿µ: å®¹å™¨ä¸é¡¹ç›®, ä¸»è½´ä¸äº¤å‰è½´</h3>
                         <div class="mermaid-diagram-container">
                            <pre class="mermaid"> 
                                graph TD
                                subgraph "Flex Container (flex-direction: row)"
                                  direction LR
                                  MA_Start["ä¸»è½´èµ·ç‚¹"] --> MA_End["ä¸»è½´ç»ˆç‚¹"]
                                  CA_Start["äº¤å‰è½´èµ·ç‚¹"] --> CA_End["äº¤å‰è½´ç»ˆç‚¹"]
                                  Item1["Item 1"]:::itemStyle
                                  Item2["Item 2"]:::itemStyle
                                  MA_Start -- "ä¸»è½´" --> Item1 --> Item2 --> MA_End
                                end
                              
                                subgraph "Flex Container (flex-direction: column)"
                                  direction TB
                                  MA_Start_Col["ä¸»è½´èµ·ç‚¹"] --> Item1_Col["Item 1"]:::itemStyle
                                  Item1_Col --> Item2_Col["Item 2"]:::itemStyle --> MA_End_Col["ä¸»è½´ç»ˆç‚¹"]
                                  CA_Start_Col["äº¤å‰è½´èµ·ç‚¹"] -- "äº¤å‰è½´" --> Item1_Col
                                end
                              
                                classDef itemStyle fill:#cffafe,stroke:#06b6d4,color:#0e7490;
                              
                            </pre>
                            <div class="mermaid-fallback text-xs text-gray-500 mt-2">[Flexbox è½´å‘ç¤ºæ„å›¾]</div>
                        </div>
                        <h3 class="head3">å¸¸ç”¨å®¹å™¨ä¸é¡¹ç›®å±æ€§</h3>
                        <p>è§ä¸Šæ–¹äº¤äº’å¼æ¼”ç¤ºåŒºåŸŸçš„é€‰é¡¹ã€‚å…³é”®å±æ€§åŒ…æ‹¬ <code>display</code>, <code>flex-direction</code>, <code>justify-content</code>, <code>align-items</code>, <code>flex-wrap</code> (å®¹å™¨) å’Œ <code>flex-grow</code>, <code>flex-shrink</code>, <code>flex-basis</code>, <code>order</code>, <code>align-self</code> (é¡¹ç›®)ã€‚</p>
                    </div>
                </section>

                <section id="grid" class="content-section fade-in-section" style="animation-delay: 0.3s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">grid_view</span>Grid å¸ƒå±€
                        <span class="level-tag level-tag-low">ä½é¢‘åŸºç¡€</span>
                    </h2>
                     <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µ</h3>
                        <p>äºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œå¯ä»¥åŒæ—¶æ§åˆ¶è¡Œå’Œåˆ—ï¼Œéå¸¸é€‚åˆé¡µé¢çº§çš„å¤æ‚å¸ƒå±€ã€‚</p>
                        <h3 class="head3">ä¸ Flexbox çš„åŒºåˆ«</h3>
                        <p>Flexbox ä¸»è¦å¤„ç†ä¸€ç»´å¸ƒå±€ï¼ˆæ²¿å•è½´æ’åˆ—ï¼‰ï¼Œè€Œ Grid ä¸“æ³¨äºäºŒç»´å¸ƒå±€ï¼ˆç½‘æ ¼ï¼‰ã€‚å®ƒä»¬ç»å¸¸ç»“åˆä½¿ç”¨ï¼ŒGrid ç”¨äºæ•´ä½“é¡µé¢ç»“æ„ï¼ŒFlexbox ç”¨äºç»„ä»¶å†…éƒ¨å¸ƒå±€ã€‚</p>
                        <h3 class="head3">åŸºæœ¬å±æ€§ (äº†è§£)</h3>
                        <ul>
                            <li><code>display: grid;</code> æˆ– <code>inline-grid;</code>: å®šä¹‰ Grid å®¹å™¨ã€‚</li>
                            <li><code>grid-template-columns: ...;</code>: å®šä¹‰åˆ—è½¨é“çš„å¤§å°å’Œæ•°é‡ (ä¾‹å¦‚: <code>1fr 2fr 100px</code>, <code>repeat(3, 1fr)</code>)ã€‚</li>
                            <li><code>grid-template-rows: ...;</code>: å®šä¹‰è¡Œè½¨é“çš„å¤§å°å’Œæ•°é‡ (ä¾‹å¦‚: <code>auto 100px auto</code>)ã€‚</li>
                            <li><code>gap: &lt;row-gap&gt; &lt;column-gap&gt;;</code> (æˆ– <code>grid-gap</code>): å®šä¹‰ç½‘æ ¼çº¿ä¹‹é—´çš„é—´è·ã€‚</li>
                            <li><code>grid-column-start</code>, <code>grid-column-end</code>, <code>grid-row-start</code>, <code>grid-row-end</code>: å®šä¹‰é¡¹ç›®æ”¾ç½®çš„èµ·å§‹å’Œç»“æŸç½‘æ ¼çº¿ã€‚</li>
                            <li><code>grid-column: start / end;</code>, <code>grid-row: start / end;</code>: ä¸Šè¿°å±æ€§çš„ç®€å†™ã€‚</li>
                            <li><code>grid-area: row-start / col-start / row-end / col-end | name;</code>: å®šä¹‰é¡¹ç›®ä½ç½®å’Œå¤§å°æˆ–å¼•ç”¨å‘½ååŒºåŸŸã€‚</li>
                        </ul>
                        <h3 class="head3">ç¤ºä¾‹: æ˜¾å¼æ”¾ç½®ä¸è·¨è¶Š</h3>
                        <div class="example-box">
                            <div class="grid-example-container">
                                <div class="grid-example-item grid-item-explicit-1">1 (1,1)</div>
                                <div class="grid-example-item grid-item-explicit-2">2 (1,3)</div>
                                <div class="grid-example-item grid-item-explicit-3">3 (2, 1/3)</div>
                                <div class="grid-example-item grid-item-explicit-4">4 (2,3)</div>
                            </div>
                        </div>
                        <pre><code class="language-css">.container {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* 3 ç­‰å®½åˆ— */
  grid-template-rows: repeat(2, 80px);   /* 2 å›ºå®šè¡Œé«˜ */
  gap: 10px;
}
.item1 { grid-column: 1; grid-row: 1; } /* æ”¾åœ¨ç¬¬1è¡Œç¬¬1åˆ— */
.item2 { grid-column: 3; grid-row: 1; } /* æ”¾åœ¨ç¬¬1è¡Œç¬¬3åˆ— */
.item3 {
  grid-column: 1 / 3; /* ä»ç¬¬1åˆ—çº¿å¼€å§‹ï¼Œåˆ°ç¬¬3åˆ—çº¿ç»“æŸ (è·¨2åˆ—) */
  grid-row: 2;        /* æ”¾åœ¨ç¬¬2è¡Œ */
}
.item4 { grid-column: 3; grid-row: 2; } /* æ”¾åœ¨ç¬¬2è¡Œç¬¬3åˆ— */</code></pre>
                        <p class="mt-4 text-sm text-gray-600">Grid æä¾›äº†å¼ºå¤§çš„å¸ƒå±€èƒ½åŠ›ï¼ŒåŒ…æ‹¬åˆ†æ•°å•ä½(<code>fr</code>)ã€<code>minmax()</code>ã€è‡ªåŠ¨æ”¾ç½®ã€å‘½ååŒºåŸŸç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
                    </div>
                </section>

                <section id="centering" class="content-section fade-in-section" style="animation-delay: 0.35s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">center_focus_strong</span>æ°´å¹³å‚ç›´å±…ä¸­
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">å¸¸è§æ–¹æ³•</h3>
                        <p>å°†å…ƒç´ åœ¨å…¶çˆ¶å®¹å™¨ä¸­å±…ä¸­ã€‚</p>
                        <div class="centering-methods-grid">
                            <div class="centering-example">
                                <h4 class="head5 text-center">Flexbox (æ¨è)</h4>
                                <div class="example-box p-2"> <div class="center-container center-flex"><div class="center-item">Flex</div></div> </div>
                                <pre class="text-xs"><code class="language-css">.parent {
display: flex;
justify-content: center;
align-items: center;
}</code></pre>
                            </div>
                             <div class="centering-example">
                                <h4 class="head5 text-center">Grid</h4>
                                <div class="example-box p-2"> <div class="center-container center-grid"><div class="center-item">Grid</div></div> </div>
                                <pre class="text-xs"><code class="language-css">.parent {
display: grid;
place-items: center;
}</code></pre>
                            </div>
                             <div class="centering-example">
                                <h4 class="head5 text-center">Position + Transform</h4>
                                <div class="example-box p-2"> <div class="center-container center-pos-container"><div class="center-item center-pos-item">Pos</div></div> </div>
                                <pre class="text-xs"><code class="language-css">.parent { position: relative; }
.child {
position: absolute;
top: 50%; left: 50%;
transform: translate(-50%, -50%);
}</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="bfc" class="content-section fade-in-section" style="animation-delay: 0.4s;">
                    <h2 class="flex items-center head2">
                        <span class="material-symbols-outlined">space_dashboard</span>BFC (å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                     <div class="content-card">
                        <h3 class="head3">æ¦‚å¿µ</h3>
                        <p>ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå†…éƒ¨å¸ƒå±€ä¸å—å¤–éƒ¨å½±å“ï¼Œä¹Ÿä¸å½±å“å¤–éƒ¨ã€‚ç”¨äºè§£å†³ç‰¹å®šå¸ƒå±€é—®é¢˜ã€‚</p>
                        <h3 class="head3">è§¦å‘æ¡ä»¶ (å¸¸è§)</h3>
                        <p><code>float</code> (é none), <code>position</code> (absolute/fixed), <code>display</code> (inline-block, flex/grid item, table-cell), <code>overflow</code> (é visible/clip), <code>display: flow-root</code>ã€‚</p>
                        <h3 class="head3">ä¸»è¦åº”ç”¨ (å¯è§†åŒ–æ¼”ç¤º)</h3>

                        <div class="example-box bfc-demo-area">
                             <div class="bfc-demo-case">
                                 <h5 class="head6">é˜²æ­¢å¤–è¾¹è·å¡Œé™·</h5>
                                 <div class="bfc-margin-collapse" id="bfc-margin-target">
                                     <p id="bfc-p1">
                                         <span class="margin-visual margin-visual-top"></span>
                                         æ®µè½ 1 (margin: 10px)
                                         <span class="margin-visual margin-visual-bottom"></span>
                                     </p>
                                     <div id="bfc-p2-container">
                                         <p id="bfc-p2">
                                             <span class="margin-visual margin-visual-top"></span>
                                             æ®µè½ 2 (margin: 10px)
                                             <span class="margin-visual margin-visual-bottom"></span>
                                         </p>
                                     </div>
                                 </div>
                                 <div class="demo-controls mt-2">
                                     <button class="button button-secondary ripple-container" id="bfc-margin-toggle">ä¸ºæ®µè½2å®¹å™¨åˆ›å»ºBFC</button>
                                 </div>
                                 <div class="demo-output" id="bfc-margin-output">åˆå§‹çŠ¶æ€: æ®µè½1å’Œ2çš„å¤–è¾¹è·ä¼šå¡Œé™· (margin é‡å )ã€‚</div>
                             </div>
                             <div class="bfc-demo-case">
                                 <h5 class="head6">æ¸…é™¤æµ®åŠ¨</h5>
                                 <div class="bfc-clear-float">
                                     <div class="parent-container" id="bfc-float-parent">
                                         <div class="float-box">Float</div>
                                         (çˆ¶å®¹å™¨è¾¹æ¡†)
                                     </div>
                                 </div>
                                  <div class="demo-controls mt-2">
                                     <button class="button button-secondary ripple-container" id="bfc-float-toggle">ä¸ºçˆ¶å®¹å™¨åˆ›å»ºBFC</button>
                                 </div>
                                 <div class="demo-output" id="bfc-float-output">åˆå§‹çŠ¶æ€: çˆ¶å®¹å™¨é«˜åº¦æœªåŒ…å«æµ®åŠ¨å…ƒç´  (èƒŒæ™¯è‰²æœªæ’‘å¼€)ã€‚</div>
                             </div>
                        </div>
                        <p class="mt-4"><strong>é¢è¯•è€ƒç‚¹:</strong> ç†è§£ BFC çš„æ¦‚å¿µã€è§¦å‘æ¡ä»¶ä»¥åŠå®ƒèƒ½è§£å†³çš„å…¸å‹å¸ƒå±€é—®é¢˜ï¼ˆå¤–è¾¹è·å¡Œé™·ã€æ¸…é™¤æµ®åŠ¨ã€è‡ªé€‚åº”å¸ƒå±€ï¼‰ã€‚<code>display: flow-root</code> æ˜¯åˆ›å»º BFC æœ€æ¨èçš„ç°ä»£æ–¹æ³•ã€‚</p>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initialize Mermaid ---
            function initializeMermaid() {
                 try {
                    if (typeof mermaid !== 'undefined') {
                        mermaid.initialize({ startOnLoad: false, theme: 'neutral', flowchart: { useMaxWidth: true, htmlLabels: true, curve: 'basis' }, securityLevel: 'loose' });
                        mermaid.run({ nodes: document.querySelectorAll('.mermaid') });
                        document.querySelectorAll('.mermaid-diagram-container').forEach(container => {
                            const mermaidEl = container.querySelector('.mermaid'); const fallbackEl = container.querySelector('.mermaid-fallback');
                             if (mermaidEl && fallbackEl) { if (mermaidEl.hasAttribute('data-processed') && mermaidEl.innerHTML.includes('<svg')) { fallbackEl.style.display = 'none'; } else if (!mermaidEl.hasAttribute('data-processed')) { fallbackEl.style.display = 'block'; } else { fallbackEl.style.display = 'none'; } }
                        });
                    } else { console.warn("Mermaid library not loaded."); document.querySelectorAll('.mermaid-fallback').forEach(el => el.style.display = 'block'); }
                } catch (e) { console.error("Mermaid initialization or rendering failed:", e); document.querySelectorAll('.mermaid-fallback').forEach(el => el.style.display = 'block'); }
            }
            setTimeout(initializeMermaid, 50);

            // --- Sidebar Active Link Highlighting ---
            const sections = document.querySelectorAll('main section[id]');
            const sidebarLinks = document.querySelectorAll('#local-toc a.sidebar-link');
            const sidebarNav = document.querySelector('.local-side-nav');
            let lastActiveLink = null;
            const observerOptions = { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 };
            const observerCallback = (entries) => {
                let bestVisibleEntry = null; entries.forEach(entry => { if (entry.isIntersecting) { if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) { bestVisibleEntry = entry; } } });
                let activeId = null; if (bestVisibleEntry) { activeId = bestVisibleEntry.target.getAttribute('id'); } else { let closestSectionAbove = null; let minDistanceAbove = Infinity; const viewportCenter = window.innerHeight / 2; sections.forEach(section => { const rect = section.getBoundingClientRect(); if (rect.bottom < viewportCenter) { const distance = viewportCenter - rect.bottom; if (distance < minDistanceAbove) { minDistanceAbove = distance; closestSectionAbove = section; } } }); if (closestSectionAbove) { activeId = closestSectionAbove.getAttribute('id'); } else if (window.scrollY === 0 && sections.length > 0) { activeId = sections[0].getAttribute('id'); } }
                let currentActiveLinkFound = false; sidebarLinks.forEach(link => { const linkHref = link.getAttribute('href'); const linkSectionId = linkHref ? linkHref.substring(1) : null; if (linkSectionId && linkSectionId === activeId) { if (link !== lastActiveLink) { if(lastActiveLink) lastActiveLink.classList.remove('active'); link.classList.add('active'); lastActiveLink = link; if (sidebarNav && sidebarNav.scrollHeight > sidebarNav.clientHeight) { link.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' }); } } currentActiveLinkFound = true; } else { link.classList.remove('active'); } });
                if (!currentActiveLinkFound && lastActiveLink) { lastActiveLink.classList.add('active'); } else if (!lastActiveLink && sidebarLinks.length > 0) { sidebarLinks[0].classList.add('active'); lastActiveLink = sidebarLinks[0]; }
            };
            const observer = new IntersectionObserver(observerCallback, observerOptions);
            sections.forEach(section => observer.observe(section));
            function checkInitialActiveLink() {
                 let currentHash = window.location.hash; let initialActiveLink = null; if (currentHash) { initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`); }
                 if (initialActiveLink) { sidebarLinks.forEach(link => link.classList.remove('active')); initialActiveLink.classList.add('active'); lastActiveLink = initialActiveLink; if (sidebarNav && sidebarNav.scrollHeight > sidebarNav.clientHeight) { initialActiveLink.scrollIntoView({ block: 'nearest', inline: 'nearest' }); } } else if (sidebarLinks.length > 0) { sidebarLinks[0].classList.add('active'); lastActiveLink = sidebarLinks[0]; }
            }
            setTimeout(checkInitialActiveLink, 100);


            // --- Fade-in Animation Logic ---
            const fadeElements = document.querySelectorAll('.fade-in-section');
            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const fadeObserverCallback = (entries, observer) => {
                 entries.forEach((entry, index) => { if (entry.isIntersecting) { const delay = Array.from(fadeElements).indexOf(entry.target) * 0.05; entry.target.style.animationDelay = `${delay}s`; entry.target.classList.add('visible'); observer.unobserve(entry.target); } });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            fadeElements.forEach(el => fadeObserver.observe(el));

            // --- Ripple Effect ---
            function createRipple(event) {
                const button = event.currentTarget;
                const controlGroup = button.closest('.demo-controls');
                if (!controlGroup && !button.classList.contains('ripple-container')) return;

                const circle = document.createElement("span");
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;
                const primaryColorRgb = getComputedStyle(document.documentElement).getPropertyValue('--primary-color-rgb').trim() || '59, 130, 246';

                circle.style.width = circle.style.height = `${diameter}px`;
                const rect = button.getBoundingClientRect();
                circle.style.left = `${event.clientX - rect.left - radius}px`;
                circle.style.top = `${event.clientY - rect.top - radius}px`;
                circle.style.backgroundColor = `rgba(${primaryColorRgb}, 0.3)`;
                circle.classList.add("ripple");

                const existingRipple = button.querySelector(".ripple");
                if (existingRipple) existingRipple.remove();

                button.appendChild(circle);
                setTimeout(() => circle.remove(), 600);
            }
             document.querySelectorAll('.demo-controls button, .ripple-container').forEach(button => {
                 if (!button.classList.contains('ripple-container')) button.classList.add('ripple-container');
                 button.addEventListener('click', createRipple);
             });

             // --- Helper Function to Update Active Button State ---
             function updateActiveButton(buttonGroup, clickedButton) {
                 if (!buttonGroup || !clickedButton) return; // Guard clause
                 buttonGroup.querySelectorAll('button').forEach(btn => {
                     btn.classList.remove('active');
                     // Ensure secondary style is applied if it's not the active one
                     if (!btn.classList.contains('button-primary') && !btn.classList.contains('button-danger')) { // Check if it's not already primary/danger etc.
                         btn.classList.add('button-secondary');
                     }
                 });
                 clickedButton.classList.add('active');
                 clickedButton.classList.remove('button-secondary');
             }


            // --- FIXED: Interactive Selector Demo with Specificity Breakdown ---
            const selectorInput = document.getElementById('selector-input');
            const selectorApplyBtn = document.getElementById('selector-apply-btn');
            const targetHtmlArea = document.getElementById('selector-target-html');
            const specificityOutput = document.getElementById('selector-specificity-output');
            const parsedOutput = document.getElementById('selector-parsed-output');

            function calculateAndParseSpecificity(selector) {
                let inline = 0; let ids = 0; let classesAttrsPseudoClasses = 0; let elementsPseudoElements = 0;
                let parsedHtml = '';

                // Regex patterns (improved slightly)
                const idRegex = /#[^\s#.:\[+>~]+/g;
                const classRegex = /\.[^\s#.:\[+>~]+/g;
                const attrRegex = /\[.*?\]/g;
                const pseudoClassRegex = /:[\w-]+(\(.+\))?(?!:)/g; // Avoid ::pseudo-elements
                const pseudoElementRegex = /::?[\w-]+(\(.+\))?/g; // Match :: and :pseudo-elements
                const elementRegex = /(^|[\s>+~])([a-zA-Z][\w-]*)/g; // Match potential elements

                // Calculate counts
                ids = (selector.match(idRegex) || []).length;
                classesAttrsPseudoClasses = (selector.match(classRegex) || []).length +
                                            (selector.match(attrRegex) || []).length +
                                            (selector.match(pseudoClassRegex) || []).length;
                elementsPseudoElements = (selector.match(pseudoElementRegex) || []).length;

                // Count elements carefully, avoiding double counts with IDs/Classes etc.
                 let tempSelector = selector;
                 // Remove IDs, Classes, Attrs, PseudoClasses, PseudoElements to isolate elements
                 [idRegex, classRegex, attrRegex, pseudoClassRegex, pseudoElementRegex].forEach(regex => {
                     tempSelector = tempSelector.replace(regex, '');
                 });
                 // Count remaining potential elements after removing other types
                 elementsPseudoElements += (tempSelector.match(/[a-zA-Z][\w-]*/g) || []).length;


                // Build parsed HTML (visual breakdown)
                let remainingSelector = selector;
                const partsData = [];

                // Extract parts by type for coloring
                const extractParts = (regex, typeClass) => {
                    let match;
                    while ((match = regex.exec(selector)) !== null) {
                        // Avoid double counting pseudo-elements as pseudo-classes
                        if (typeClass === 'spec-class' && match[0].startsWith('::')) continue;
                        if (typeClass === 'spec-class' && match[0].startsWith(':') && !pseudoClassRegex.test(match[0])) continue; // Ensure it's a pseudo-class

                        partsData.push({ index: match.index, length: match[0].length, text: match[0], type: typeClass });
                    }
                };

                extractParts(idRegex, 'spec-id');
                extractParts(classRegex, 'spec-class');
                extractParts(attrRegex, 'spec-class');
                extractParts(pseudoClassRegex, 'spec-class');
                extractParts(pseudoElementRegex, 'spec-element');

                // Sort by index to reconstruct
                partsData.sort((a, b) => a.index - b.index);

                let lastIndex = 0;
                partsData.forEach(part => {
                    // Add text before this part (combinators, spaces, potential elements)
                    if (part.index > lastIndex) {
                        const intermediate = selector.substring(lastIndex, part.index);
                        // Color potential elements within the intermediate string
                        intermediate.split(/([\s>+~]+)/).forEach(subPart => {
                            if (/^[a-zA-Z][\w-]*$/.test(subPart)) { // Check if it looks like an element
                                parsedHtml += `<span class="spec-element">${subPart}</span>`;
                            } else {
                                parsedHtml += `<span class="spec-other">${subPart}</span>`;
                            }
                        });
                    }
                    // Add the colored part
                    parsedHtml += `<span class="${part.type}">${part.text}</span>`;
                    lastIndex = part.index + part.length;
                });
                // Add any remaining text (including potential elements at the end)
                if (lastIndex < selector.length) {
                     const trailing = selector.substring(lastIndex);
                      trailing.split(/([\s>+~]+)/).forEach(subPart => {
                            if (/^[a-zA-Z][\w-]*$/.test(subPart)) {
                                parsedHtml += `<span class="spec-element">${subPart}</span>`;
                            } else {
                                parsedHtml += `<span class="spec-other">${subPart}</span>`;
                            }
                        });
                }


                return {
                    tuple: `(${inline}, ${ids}, ${classesAttrsPseudoClasses}, ${elementsPseudoElements})`,
                    parsed: parsedHtml || `<span class="spec-other">${selector}</span>`
                };
            }

            function applySelector() {
                 const selector = selectorInput.value.trim();
                 targetHtmlArea.querySelectorAll('.highlighted').forEach(el => el.classList.remove('highlighted'));
                 parsedOutput.innerHTML = '';

                 if (selector && targetHtmlArea) {
                     try {
                         const matchedElements = targetHtmlArea.querySelectorAll(selector);
                         matchedElements.forEach(el => { if (el !== targetHtmlArea) { el.classList.add('highlighted'); } });
                         const spec = calculateAndParseSpecificity(selector);
                         specificityOutput.textContent = spec.tuple;
                         parsedOutput.innerHTML = spec.parsed;
                     } catch (e) {
                         specificityOutput.textContent = "æ— æ•ˆçš„é€‰æ‹©å™¨!";
                         parsedOutput.innerHTML = `<span style="color: red;">${e.message}</span>`;
                         console.error("Invalid selector:", e);
                     }
                 } else {
                     specificityOutput.textContent = "(0, 0, 0, 0)";
                 }
             }

            if (selectorInput && selectorApplyBtn && targetHtmlArea && specificityOutput && parsedOutput) {
                selectorApplyBtn.addEventListener('click', applySelector);
                selectorInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { applySelector(); } });
                applySelector(); // Initial application
            }


            // --- FIXED: Interactive Box Model Demo ---
            // [Box Model JS Logic - Corrected in V5, kept the same]
            const bmWidthSlider = document.getElementById('bm-width');
            const bmHeightSlider = document.getElementById('bm-height');
            const bmPaddingSlider = document.getElementById('bm-padding');
            const bmBorderSlider = document.getElementById('bm-border');
            const bmMarginSlider = document.getElementById('bm-margin');
            const bmWidthVal = document.getElementById('bm-width-val');
            const bmHeightVal = document.getElementById('bm-height-val');
            const bmPaddingVal = document.getElementById('bm-padding-val');
            const bmBorderVal = document.getElementById('bm-border-val');
            const bmMarginVal = document.getElementById('bm-margin-val');
            const bmBox = document.getElementById('bm-box');
            const bmContentViz = document.getElementById('bm-content-viz');
            const bmVisualizer = document.getElementById('bm-visualizer');
            const bmOutput = document.getElementById('box-model-output');
            const bmResetBtn = document.getElementById('bm-reset-btn');
            const bmSizingRadios = document.querySelectorAll('input[name="box-sizing"]');
            function updateBoxModelVisuals() {
                if (!bmBox || !bmVisualizer) return;
                const width = parseInt(bmWidthSlider.value); const height = parseInt(bmHeightSlider.value); const padding = parseInt(bmPaddingSlider.value); const border = parseInt(bmBorderSlider.value); const margin = parseInt(bmMarginSlider.value); const boxSizing = document.querySelector('input[name="box-sizing"]:checked').value;
                bmWidthVal.textContent = `${width}px`; bmHeightVal.textContent = `${height}px`; bmPaddingVal.textContent = `${padding}px`; bmBorderVal.textContent = `${border}px`; bmMarginVal.textContent = `${margin}px`;
                bmBox.style.boxSizing = boxSizing; bmBox.style.width = `${width}px`; bmBox.style.height = `${height}px`; bmBox.style.padding = `${padding}px`; bmBox.style.border = `${border}px solid #0ea5e9`; bmBox.style.margin = `${margin}px`;
                bmVisualizer.style.padding = '20px'; // Keep fixed padding
                // Update outline offset to visualize margin
                bmBox.style.outlineOffset = `${margin}px`;
                bmBox.style.outline = margin > 0 ? `1px dashed #a855f7` : 'none'; // Show outline only if margin > 0

                setTimeout(() => {
                    const computedStyle = getComputedStyle(bmBox); const totalWidth = bmBox.offsetWidth; const totalHeight = bmBox.offsetHeight; let contentWidth, contentHeight;
                    if (boxSizing === 'border-box') { contentWidth = totalWidth - (parseFloat(computedStyle.paddingLeft) || 0) - (parseFloat(computedStyle.paddingRight) || 0) - (parseFloat(computedStyle.borderLeftWidth) || 0) - (parseFloat(computedStyle.borderRightWidth) || 0); contentHeight = totalHeight - (parseFloat(computedStyle.paddingTop) || 0) - (parseFloat(computedStyle.paddingBottom) || 0) - (parseFloat(computedStyle.borderTopWidth) || 0) - (parseFloat(computedStyle.borderBottomWidth) || 0); } else { contentWidth = parseFloat(computedStyle.width); contentHeight = parseFloat(computedStyle.height); }
                    bmOutput.textContent = `box-sizing: ${boxSizing}\nè®¾ç½® Width: ${width}px, Height: ${height}px\nPadding: ${padding}px, Border: ${border}px, Margin: ${margin}px\nå†…å®¹åŒºå®é™…å°ºå¯¸: ${Math.max(0, contentWidth).toFixed(0)}px Ã— ${Math.max(0, contentHeight).toFixed(0)}px\nå…ƒç´ æ€»å ç”¨å®½åº¦ (å« Padding, Border): ${totalWidth}px\nå…ƒç´ æ€»å ç”¨é«˜åº¦ (å« Padding, Border): ${totalHeight}px\n(å¤–å±‚è™šçº¿ä»£è¡¨ Margin)`;
                    bmContentViz.textContent = `Content\n${Math.max(0, contentWidth).toFixed(0)}x${Math.max(0, contentHeight).toFixed(0)}`; bmContentViz.style.width = `calc(100% - 2px)`; bmContentViz.style.height = `calc(100% - 2px)`;
                }, 0);
            }
            if (bmWidthSlider && bmBox && bmOutput && bmResetBtn && bmVisualizer) { const sliders = [bmWidthSlider, bmHeightSlider, bmPaddingSlider, bmBorderSlider, bmMarginSlider]; sliders.forEach(slider => slider.addEventListener('input', updateBoxModelVisuals)); bmSizingRadios.forEach(radio => radio.addEventListener('change', updateBoxModelVisuals)); bmResetBtn.addEventListener('click', () => { bmWidthSlider.value = 100; bmHeightSlider.value = 50; bmPaddingSlider.value = 10; bmBorderSlider.value = 5; bmMarginSlider.value = 10; document.querySelector('input[name="box-sizing"][value="content-box"]').checked = true; updateBoxModelVisuals(); }); updateBoxModelVisuals(); }


            // --- FIXED: Interactive Position Demo with Context Visualization ---
            const positionControlsContainer = document.getElementById('position-controls'); // Use specific ID
            const targetBox = document.getElementById('target-box');
            const posOutput = document.getElementById('pos-output');
            const posContainer = document.getElementById('position-container');
            const toggleContextCheckbox = document.getElementById('toggle-context');
            const contextArrow = document.getElementById('context-arrow');

            function updatePositionDemo() {
                if (!positionControlsContainer || !targetBox || !posOutput || !posContainer || !toggleContextCheckbox || !contextArrow) {
                    console.error("Position demo elements missing!"); return;
                 }
                const activeButton = positionControlsContainer.querySelector('button.active'); // Use correct container
                const newPosition = activeButton ? activeButton.dataset.pos : 'static';
                const hasContext = toggleContextCheckbox.checked;

                posContainer.classList.toggle('has-relative-context', hasContext);
                posContainer.style.position = hasContext ? 'relative' : '';

                targetBox.className = 'pos-box-interactive pos-box-target';
                targetBox.style.position = ''; targetBox.style.top = ''; targetBox.style.left = '';
                targetBox.style.bottom = ''; targetBox.style.right = ''; targetBox.style.zIndex = '';
                targetBox.style.margin = '';
                contextArrow.classList.remove('visible');

                let outputText = `å½“å‰ Target çŠ¶æ€: ${newPosition}\n`;
                let appliedCSS = `position: ${newPosition};`;

                switch (newPosition) {
                    case 'static': outputText += "è¯´æ˜: åœ¨æ–‡æ¡£æµä¸­, top/left/z-index æ— æ•ˆã€‚"; break;
                    case 'relative': targetBox.classList.add('is-relative'); appliedCSS += `\ntop: 15px;\nleft: 15px;`; outputText += `è¯´æ˜: ç›¸å¯¹è‡ªèº«æ­£å¸¸ä½ç½®åç§»ï¼Œä»å ç©ºé—´ã€‚\nCSS: ${appliedCSS}`; break;
                    case 'absolute':
                        targetBox.classList.add('is-absolute'); appliedCSS += `\ntop: 40px;\nright: 30px;`; outputText += "è¯´æ˜: ç›¸å¯¹";
                        if (hasContext) {
                            outputText += "å®¹å™¨(å®šä½ä¸Šä¸‹æ–‡)";
                            setTimeout(() => {
                                const containerRect = posContainer.getBoundingClientRect(); const targetRect = targetBox.getBoundingClientRect();
                                if (containerRect.width > 0 && targetRect.width > 0) {
                                    contextArrow.style.top = `${targetRect.top - containerRect.top + targetRect.height * 0.5 - 6}px`;
                                    contextArrow.style.left = `${targetRect.left - containerRect.left - 15}px`;
                                    contextArrow.style.transform = 'rotate(135deg)'; contextArrow.classList.add('visible');
                                }
                            }, 50);
                        } else { outputText += "è§†å£/ç¥–å…ˆ"; }
                        outputText += "å®šä½, è„±ç¦»æ–‡æ¡£æµã€‚\nCSS: " + appliedCSS; break;
                    case 'fixed': targetBox.classList.add('is-fixed'); appliedCSS += `\nbottom: 80px;\nright: 40px;`; outputText += `è¯´æ˜: ç›¸å¯¹è§†å£å®šä½, è„±ç¦»æ–‡æ¡£æµã€‚\nCSS: ${appliedCSS}`; break;
                    case 'sticky': targetBox.classList.add('is-sticky'); appliedCSS += `\ntop: 10px;`; outputText += `è¯´æ˜: ç²˜æ€§å®šä½, æ»šåŠ¨æ—¶å›ºå®šåˆ° top: 10pxã€‚\nCSS: ${appliedCSS}`; posContainer.scrollTop = 0; break;
                }
                posOutput.textContent = outputText;
            }

            if (positionControlsContainer && targetBox && posOutput && posContainer && toggleContextCheckbox && contextArrow) {
                positionControlsContainer.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON' && e.target.dataset.pos) {
                        updateActiveButton(positionControlsContainer, e.target);
                        updatePositionDemo();
                    }
                });
                toggleContextCheckbox.addEventListener('change', updatePositionDemo);
                 updateActiveButton(positionControlsContainer, positionControlsContainer.querySelector('button[data-pos="static"]'));
                 updatePositionDemo();
            } else { console.error("Failed to initialize Position Demo - one or more elements not found."); }


             // --- Interactive Z-Index Demo ---
             // [Existing Z-Index Logic - Kept the same]
             const zIndexControls = document.querySelector('.zindex-controls');
             const zIndexVisualizer = document.querySelector('.zindex-visualizer');
             const zIndexBox1 = document.getElementById('zindex-box-1');
             const zIndexBox2 = document.getElementById('zindex-box-2');
             function updateZIndexDemo() {
                 if (!zIndexBox1 || !zIndexBox2 || !zIndexControls) return;
                 const posSelect1 = zIndexControls.querySelector('select[data-target="zindex-box-1"]'); const zIndexInput1 = zIndexControls.querySelector('input[data-target="zindex-box-1"]'); const posSelect2 = zIndexControls.querySelector('select[data-target="zindex-box-2"]'); const zIndexInput2 = zIndexControls.querySelector('input[data-target="zindex-box-2"]');
                 const pos1 = posSelect1.value; const zIndex1 = zIndexInput1.value; const pos2 = posSelect2.value; const zIndex2 = zIndexInput2.value;
                 zIndexBox1.style.position = pos1; zIndexBox2.style.position = pos2;
                 zIndexInput1.disabled = (pos1 === 'static'); zIndexInput2.disabled = (pos2 === 'static');
                 zIndexBox1.style.zIndex = (pos1 !== 'static') ? zIndex1 : ''; zIndexBox2.style.zIndex = (pos2 !== 'static') ? zIndex2 : '';
                 const z1 = (pos1 !== 'static') ? parseInt(zIndex1) || 0 : 0; const z2 = (pos2 !== 'static') ? parseInt(zIndex2) || 0 : 0;
                 zIndexBox1.style.boxShadow = (pos1 !== 'static') ? `0 ${Math.min(z1 * 2 + 2, 10)}px ${Math.min(z1 * 3 + 5, 15)}px rgba(0,0,0,${Math.min(0.1 + z1 * 0.02, 0.25)})` : ''; zIndexBox2.style.boxShadow = (pos2 !== 'static') ? `0 ${Math.min(z2 * 2 + 2, 10)}px ${Math.min(z2 * 3 + 5, 15)}px rgba(0,0,0,${Math.min(0.1 + z2 * 0.02, 0.25)})` : '';
             }
             if (zIndexControls && zIndexVisualizer) { zIndexControls.querySelectorAll('select, input').forEach(control => { control.addEventListener('change', updateZIndexDemo); control.addEventListener('input', updateZIndexDemo); }); updateZIndexDemo(); }


             // --- FIXED: Interactive Display Demo with Animation & Button Feedback ---
            const displayControlsContainer = document.getElementById('display-controls'); // Use specific ID
            const displayTargetItem = document.getElementById('display-target-item');
            const displayOutput = document.getElementById('display-output');
            const displayContainer = document.getElementById('display-container');

             if (displayControlsContainer && displayTargetItem && displayOutput && displayContainer) {
                 displayControlsContainer.addEventListener('click', (e) => {
                     if (e.target.tagName === 'BUTTON' && e.target.dataset.disp) {
                         const newDisplay = e.target.dataset.disp;
                         updateActiveButton(displayControlsContainer, e.target); // Use correct container ID

                         // Animation Logic (same as before)
                         if (newDisplay === 'none') {
                             displayTargetItem.classList.add('is-hiding');
                             setTimeout(() => {
                                 displayTargetItem.style.display = 'none';
                             }, 300);
                         } else {
                             const wasNone = displayTargetItem.style.display === 'none';
                             if (wasNone) {
                                 displayTargetItem.style.display = '';
                                 void displayTargetItem.offsetWidth;
                             }
                             displayTargetItem.classList.remove('is-hiding', 'is-block', 'is-inline-block');
                             displayTargetItem.style.display = newDisplay;
                             displayTargetItem.style.width = ''; displayTargetItem.style.height = '';
                             displayTargetItem.style.padding = ''; displayTargetItem.style.margin = '';
                             displayTargetItem.style.borderWidth = ''; displayTargetItem.style.opacity = '';
                             displayTargetItem.style.transform = '';

                             requestAnimationFrame(() => {
                                 if (newDisplay === 'block') displayTargetItem.classList.add('is-block');
                                 if (newDisplay === 'inline-block') displayTargetItem.classList.add('is-inline-block');
                             });
                         }

                         // Update Output Text (same as before)
                         let outputText = `å½“å‰ Target çŠ¶æ€: ${newDisplay}`;
                         switch(newDisplay) {
                             case 'inline': outputText += " (åŒè¡Œæ’åˆ—, å®½é«˜æ— æ•ˆ)"; break;
                             case 'block': outputText += " (ç‹¬å ä¸€è¡Œ, å¯è®¾å®½é«˜)"; break;
                             case 'inline-block': outputText += " (åŒè¡Œæ’åˆ—, å¯è®¾å®½é«˜)"; break;
                             case 'none': outputText += " (éšè—ä¸”ä¸å ç©ºé—´)"; break;
                         }
                         displayOutput.textContent = outputText;
                     }
                 });
                 // Set initial active button for Display
                 updateActiveButton(displayControlsContainer, displayControlsContainer.querySelector('button[data-disp="inline"]'));
             } else {
                 console.error("Failed to initialize Display Demo - one or more elements not found.");
             }


            // --- UPDATED: Interactive Flexbox Playground ---
            // [Flexbox JS Logic - Kept the same]
            const flexContainer = document.getElementById('flex-pg-container');
            const flexDirectionSelect = document.getElementById('flex-direction');
            const justifyContentSelect = document.getElementById('justify-content');
            const alignItemsSelect = document.getElementById('align-items');
            const flexWrapSelect = document.getElementById('flex-wrap');
            const alignContentSelect = document.getElementById('align-content');
            const flexResetBtn = document.getElementById('flex-reset-btn');
            const flexOutput = document.getElementById('flex-output');
            function updateFlexContainer() { if (!flexContainer || !flexOutput) return; const direction = flexDirectionSelect.value; const justify = justifyContentSelect.value; const alignItems = alignItemsSelect.value; const wrap = flexWrapSelect.value; const alignContent = alignContentSelect.value; flexContainer.style.flexDirection = direction; flexContainer.style.justifyContent = justify; flexContainer.style.alignItems = alignItems; flexContainer.style.flexWrap = wrap; flexContainer.style.alignContent = alignContent; alignContentSelect.disabled = (wrap === 'nowrap'); flexOutput.textContent = `ä¸»è½´æ–¹å‘: ${direction}, ä¸»è½´å¯¹é½: ${justify}, äº¤å‰è½´å¯¹é½: ${alignItems}, æ¢è¡Œ: ${wrap}${wrap !== 'nowrap' ? `, å¤šè¡Œå¯¹é½: ${alignContent}` : ''}`; }
            if (flexContainer && flexDirectionSelect && justifyContentSelect && alignItemsSelect && flexWrapSelect && alignContentSelect && flexResetBtn && flexOutput) { const flexControls = [flexDirectionSelect, justifyContentSelect, alignItemsSelect, flexWrapSelect, alignContentSelect]; flexControls.forEach(control => control.addEventListener('change', updateFlexContainer)); flexResetBtn.addEventListener('click', () => { flexDirectionSelect.value = 'row'; justifyContentSelect.value = 'flex-start'; alignItemsSelect.value = 'stretch'; flexWrapSelect.value = 'nowrap'; alignContentSelect.value = 'stretch'; updateFlexContainer(); }); updateFlexContainer(); }


             // --- FIXED: Interactive BFC Demo with Visualization ---
             const bfcMarginToggle = document.getElementById('bfc-margin-toggle');
             const bfcMarginTargetContainer = document.getElementById('bfc-p2-container');
             const bfcMarginOutput = document.getElementById('bfc-margin-output');
             const bfcP1 = document.getElementById('bfc-p1');
             const bfcP2 = document.getElementById('bfc-p2');
             const bfcFloatToggle = document.getElementById('bfc-float-toggle');
             const bfcFloatParent = document.getElementById('bfc-float-parent');
             const bfcFloatOutput = document.getElementById('bfc-float-output');

             function setupMarginVisuals(pElement) {
                 if (!pElement) return;
                 pElement.querySelectorAll('.margin-visual').forEach(v => v.remove());
                 const topVisual = document.createElement('span'); topVisual.className = 'margin-visual margin-visual-top';
                 const bottomVisual = document.createElement('span'); bottomVisual.className = 'margin-visual margin-visual-bottom';
                 pElement.prepend(topVisual); pElement.appendChild(bottomVisual);
                 // Set initial state based on whether the container has BFC initially
                 const containerHasBfc = pElement.parentElement.classList.contains('has-bfc');
                 if (pElement.id === 'bfc-p2') { // Only adjust p2's top visual based on container BFC
                    topVisual.style.top = containerHasBfc ? '0px' : '-10px';
                 } else {
                    topVisual.style.top = '-10px'; // p1's top margin always visualised normally
                 }
                 bottomVisual.style.bottom = '-10px';
             }
             setupMarginVisuals(bfcP1); setupMarginVisuals(bfcP2);

             if (bfcMarginToggle && bfcMarginTargetContainer && bfcMarginOutput && bfcP1 && bfcP2) {
                 let marginBfcActive = bfcMarginTargetContainer.classList.contains('has-bfc');
                 const p2MarginTopVisual = bfcP2.querySelector('.margin-visual-top');

                 bfcMarginToggle.addEventListener('click', (e) => {
                     marginBfcActive = !marginBfcActive;
                     // Use display: flow-root instead of overflow: hidden
                     bfcMarginTargetContainer.style.display = marginBfcActive ? 'flow-root' : '';
                     bfcMarginTargetContainer.classList.toggle('has-bfc', marginBfcActive); // Keep class for styling if needed

                     // Ensure button update happens correctly
                     const buttonGroup = e.target.closest('.demo-controls');
                     if (buttonGroup) {
                         updateActiveButton(buttonGroup, e.target);
                     } else { // Fallback if structure changes
                         updateActiveButton(e.target.parentElement, e.target);
                     }


                     if (marginBfcActive) {
                         if(p2MarginTopVisual) p2MarginTopVisual.style.top = '0px'; // Animate separation
                         bfcMarginOutput.textContent = 'åˆ›å»ºBFC (display: flow-root)åï¼Œæ®µè½2çš„é¡¶éƒ¨å¤–è¾¹è·ä¸å†ä¸æ®µè½1çš„åº•éƒ¨å¤–è¾¹è·å¡Œé™·ã€‚';
                         bfcMarginToggle.textContent = 'ç§»é™¤æ®µè½2å®¹å™¨BFC';
                     } else {
                         if(p2MarginTopVisual) p2MarginTopVisual.style.top = '-10px'; // Animate collapse
                         bfcMarginOutput.textContent = 'ç§»é™¤BFCåï¼Œå¤–è¾¹è·å†æ¬¡å¡Œé™·ã€‚';
                         bfcMarginToggle.textContent = 'ä¸ºæ®µè½2å®¹å™¨åˆ›å»ºBFC';
                         // updateActiveButton handles removing 'active' and adding 'button-secondary'
                         e.target.classList.remove('active');
                         e.target.classList.add('button-secondary');
                     }
                 });
                 // Set initial button state
                 const marginButtonGroup = bfcMarginToggle.closest('.demo-controls');
                 if (marginButtonGroup) {
                     if (marginBfcActive) { updateActiveButton(marginButtonGroup, bfcMarginToggle); }
                     else { bfcMarginToggle.classList.add('button-secondary'); bfcMarginToggle.classList.remove('active'); }
                 }
             }

             if (bfcFloatToggle && bfcFloatParent && bfcFloatOutput) {
                 let floatBfcActive = bfcFloatParent.classList.contains('has-bfc');
                 bfcFloatToggle.addEventListener('click', (e) => {
                     floatBfcActive = !floatBfcActive;
                     // Use display: flow-root instead of overflow: hidden
                     bfcFloatParent.style.display = floatBfcActive ? 'flow-root' : '';
                     bfcFloatParent.classList.toggle('has-bfc', floatBfcActive);
                     bfcFloatParent.classList.toggle('show-bg', floatBfcActive);

                     const buttonGroup = e.target.closest('.demo-controls');
                     if (buttonGroup) {
                         updateActiveButton(buttonGroup, e.target);
                     } else {
                          updateActiveButton(e.target.parentElement, e.target);
                     }


                     if (floatBfcActive) {
                         bfcFloatOutput.textContent = 'ä¸ºçˆ¶å®¹å™¨åˆ›å»ºBFC (display: flow-root)åï¼Œå…¶é«˜åº¦è‡ªåŠ¨æ‰©å±•ä»¥åŒ…å«æµ®åŠ¨å…ƒç´  (èƒŒæ™¯å¯è§)ã€‚';
                         bfcFloatToggle.textContent = 'ç§»é™¤çˆ¶å®¹å™¨BFC';
                     } else {
                         bfcFloatOutput.textContent = 'ç§»é™¤BFCåï¼Œçˆ¶å®¹å™¨é«˜åº¦å¯èƒ½å¡Œé™· (èƒŒæ™¯æ¶ˆå¤±)ã€‚';
                         bfcFloatToggle.textContent = 'ä¸ºçˆ¶å®¹å™¨åˆ›å»ºBFC';
                         e.target.classList.remove('active');
                         e.target.classList.add('button-secondary');
                     }
                 });
                 // Set initial button state
                 const floatButtonGroup = bfcFloatToggle.closest('.demo-controls');
                 if(floatButtonGroup){
                     if (floatBfcActive) { updateActiveButton(floatButtonGroup, bfcFloatToggle); }
                     else { bfcFloatToggle.classList.add('button-secondary'); bfcFloatToggle.classList.remove('active'); }
                 }
             }


            // --- Centering Demo ---
            // No JS needed

        }); // End DOMContentLoaded
    </script>

</body>

</html>
