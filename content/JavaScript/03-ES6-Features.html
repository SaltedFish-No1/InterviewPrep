<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES6+ å¸¸ç”¨ç‰¹æ€§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../../global.css"> <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />

    <style>
        /* --- Page Specific Adjustments & Material Design Alignment --- */
        html {
            scroll-padding-top: 2rem; /* Adjust if header is sticky */
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family-sans);
            background-color: var(--bg-color-lighter);
            color: var(--text-color-default);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Ensure headings have scroll margin for TOC */
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 2rem;
        }

        /* Consistent section heading style (Using global.css head classes) */
        .content-section h2 {
            /* Styles from global.css .head2 */
            border-bottom: 1px solid var(--border-color-light);
            padding-bottom: 0.5rem; /* Adjust as needed */
            margin-bottom: 1.5rem; /* Space below heading */
            display: flex;
            align-items: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        .content-section h2 .material-icons {
             color: var(--primary-color); /* Use primary color for icons */
             font-size: 1.75rem; /* Match size */
             vertical-align: middle; /* Align icon nicely */
        }

        /* Card Styling - Enhance shadow for Material feel */
        .content-card {
            /* Inherit base styles from global.css */
            box-shadow: 0 2px 4px -1px rgba(0,0,0,0.1), 0 4px 5px 0 rgba(0,0,0,0.07), 0 1px 10px 0 rgba(0,0,0,0.06); /* Material-like shadow */
            transition: box-shadow 0.3s ease-in-out;
        }
        .content-card:hover {
             box-shadow: 0 5px 5px -3px rgba(0,0,0,0.1), 0 8px 10px 1px rgba(0,0,0,0.07), 0 3px 14px 2px rgba(0,0,0,0.06);
        }
        .content-card > .content-card { /* Adjust nested card shadow if needed */
             box-shadow: var(--card-shadow-nested-level1);
        }

        /* Styling for lists within article content */
        article ul:not([class]), article ol:not([class]) {
            padding-left: 1.75em; /* Indentation */
            margin-bottom: 1em;
        }
        article ul:not([class]) { list-style: disc; }
        article ol:not([class]) { list-style: decimal; }
        article li { margin-bottom: 0.5em; }
        article ul ul, article ol ol, article ul ol, article ol ul { margin-top: 0.5em; margin-bottom: 0.5em; }

        /* Code block styling */
        article pre {
            font-family: var(--font-family-mono);
            border-radius: 0.375rem; /* rounded-md */
            margin: 1.25rem 0; /* my-5 */
            padding: 1em;
            overflow-x: auto;
            background-color: #272822; /* Okaidia theme background */
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        article pre code[class*="language-"] {
            font-family: inherit;
            font-size: 0.9em; /* Slightly larger code font */
            line-height: 1.6;
            background: none;
            color: #f8f8f2; /* Okaidia theme text */
            padding: 0;
            text-shadow: none;
            white-space: pre;
            display: block;
        }
         /* Inline code */
         article :not(pre) > code {
            font-family: var(--font-family-mono);
            font-size: 0.9em;
            background-color: var(--primary-color-light);
            color: var(--primary-color-dark);
            padding: 0.15rem 0.4rem;
            border-radius: 0.25rem; /* rounded-sm */
            vertical-align: baseline;
        }

        /* Emphasis for key terms */
        .key-term {
            font-weight: 600; /* font-semibold */
            color: var(--primary-color-dark); /* Use primary dark color */
            /* Optional: Add subtle background or border */
            /* background-color: var(--primary-color-light); padding: 0.1rem 0.2rem; border-radius: 3px; */
        }
        .important-note {
            color: var(--danger-color); /* Use danger color for important notes/warnings */
            font-weight: 600;
        }

        /* Add margin between cards within a section */
        .content-section > .content-card + .content-card {
            margin-top: 1.5rem; /* mb-6 */
        }

        /* Remove bottom margin from last element inside a card */
        .content-card > *:last-child {
            margin-bottom: 0 !important;
        }
        .content-card > .quiz-card:last-child {
            margin-bottom: 0 !important;
        }

        /* --- Fade-in Animation --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-section {
            opacity: 0;
            animation: fadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

         /* --- Tooltip Styles --- */
        .tooltip-term {
            border-bottom: 1px dotted var(--primary-color-dark);
            cursor: help;
            position: relative;
            color: var(--primary-color-dark);
            font-weight: 500;
        }
        .tooltip-term::before, .tooltip-term::after {
             content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-10px); /* Increased distance */
            background-color: #323232; /* Darker background */
            color: white;
            padding: 0.5rem 0.8rem; /* Slightly larger padding */
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 400; /* Normal weight */
            line-height: 1.4;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out, transform 0.2s ease-in-out;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .tooltip-term::after {
            content: '';
            border-width: 6px; /* Slightly larger arrow */
            border-style: solid;
            border-color: #323232 transparent transparent transparent;
            transform: translateX(-50%) translateY(-1px); /* Position below tooltip */
        }
        .tooltip-term:hover::before, .tooltip-term:hover::after {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-8px); /* Move slightly on hover */
        }

        /* --- Quiz Card Styles --- */
        .quiz-card {
            /* Use styles from global.css */
            margin-top: 1.5rem; /* Add top margin */
        }
        .quiz-question .material-icons {
            color: var(--primary-color-dark);
            font-size: 1.25rem;
            vertical-align: text-bottom; /* Better alignment */
            margin-right: 0.3rem;
        }
         .quiz-answer {
            max-height: 0;
            opacity: 0;
            transition: max-height 0.4s ease-out, opacity 0.3s ease-out, padding-top 0.4s ease-out, padding-bottom 0.4s ease-out, margin-top 0.4s ease-out;
            overflow: hidden;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            border: 1px solid var(--border-color-default);
            background-color: var(--bg-color-light); /* Slightly different background */
            border-radius: 0 0 0.5rem 0.5rem; /* Round bottom corners */
            color: var(--text-color-default);
            border-top: none; /* Remove top border as card has one */
         }
        .quiz-answer.visible {
            max-height: 1000px; /* Adjust if needed */
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
            margin-top: 0; /* Remove margin-top, handled by padding */
            overflow: auto;
        }
        .quiz-toggle {
            /* Use .button and .button-secondary from global.css */
            margin-top: 1rem; /* Add space above button */
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }
        .quiz-toggle .button-text { pointer-events: none; }
        .quiz-toggle .material-icons { font-size: 1.2rem; transition: transform 0.3s ease-in-out; }
        .quiz-toggle .icon-arrow.rotated { transform: rotate(180deg); }
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(59, 130, 246, 0.3); /* Primary color ripple */
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }

        /* Sidebar Link Feedback */
        .local-side-nav li a:hover {
             background-color: var(--bg-color-light);
             color: var(--text-color-dark);
             /* transform: translateX(2px); Optional subtle move */
        }
        .local-side-nav li a:focus-visible {
            /* Use global focus style */
            outline: none;
            box-shadow: 0 0 0 3px var(--focus-ring-color);
            z-index: 10;
        }
        .local-side-nav li a.active {
            background-color: var(--primary-color-light);
            color: var(--primary-color-dark);
            font-weight: 600; /* Make active link bolder */
            border-left-color: var(--primary-color);
        }

        /* Interview Point Marker */
        .interview-point::before {
            content: "âœ¨";
            margin-right: 0.3em;
            font-size: 1.1em;
        }

    </style>
</head>

<body class="bg-gray-100">
    <div class="page-container">

        <aside class="local-side-nav">
            <h4 class="head5 font-semibold text-gray-800 mb-4 pl-2">ES6+ å¸¸ç”¨ç‰¹æ€§</h4> <ul id="local-toc">
                <li><a href="#intro" class="active"><span class="material-icons nav-icon">description</span>å¼•è¨€</a></li>
                <li><a href="#let-const-var"><span class="material-icons nav-icon">difference</span>let/const vs var</a></li>
                <li><a href="#arrow-functions"><span class="material-icons nav-icon">functions</span>ç®­å¤´å‡½æ•° & this</a></li>
                <li><a href="#template-literals"><span class="material-icons nav-icon">text_fields</span>æ¨¡æ¿å­—ç¬¦ä¸²</a></li>
                <li><a href="#destructuring"><span class="material-icons nav-icon">scatter_plot</span>è§£æ„èµ‹å€¼</a></li>
                <li><a href="#spread-rest"><span class="material-icons nav-icon">control_point_duplicate</span>å±•å¼€ä¸å‰©ä½™</a></li>
                <li><a href="#array-methods"><span class="material-icons nav-icon">list_alt</span>æ•°ç»„å¸¸ç”¨æ–¹æ³•</a></li>
                <li><a href="#modules"><span class="material-icons nav-icon">hub</span>æ¨¡å—åŒ–</a></li>
            </ul>
            <a href="../../index.html" class="back-link"> &larr; è¿”å›å¤§çº²ç›®å½•
            </a>
        </aside>

        <main class="content-main">
            <article>
                <section id="intro" class="content-section fade-in-section">
                    <h1 class="head1 flex items-center gap-2"><span class="material-icons text-3xl text-blue-600">stars</span>ES6+ å¸¸ç”¨ç‰¹æ€§</h1>
                    <p class="text-lg text-gray-600 mb-4">æ¬¢è¿æ¥åˆ° ES6+ (ECMAScript 2015 åŠä¹‹åç‰ˆæœ¬) å¸¸ç”¨ç‰¹æ€§ä»‹ç»ã€‚æŒæ¡è¿™äº›ç°ä»£ JavaScript ç‰¹æ€§å¯¹äºç¼–å†™ç®€æ´ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„ä»£ç è‡³å…³é‡è¦ã€‚æœ¬é¡µå°†é€ä¸€ä»‹ç»è¿™äº›æ ¸å¿ƒæ¦‚å¿µã€‚</p>
                    <p class="mt-4 bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-md text-sm shadow-sm">ğŸ’¡
                        <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ç›¸åº”ä¸»é¢˜ã€‚ä»£ç ç¤ºä¾‹å’Œ Quiz å¡ç‰‡å¯å¸®åŠ©å·©å›ºç†è§£ã€‚
                    </p>
                </section>

                <section id="let-const-var" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">difference</span>let ä¸ const vs var</h2>
                    <div class="content-card">
                        <h3 class="head3">ä½œç”¨åŸŸå·®å¼‚ (Scope Differences)</h3>
                        <p>ç†è§£å˜é‡å£°æ˜æ–¹å¼çš„ä½œç”¨åŸŸæ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ã€‚</p>
                        <ul>
                            <li><code>var</code>: å…·æœ‰<strong class="key-term">å‡½æ•°ä½œç”¨åŸŸ</strong>æˆ–<strong class="key-term">å…¨å±€ä½œç”¨åŸŸ</strong>ã€‚å­˜åœ¨<strong class="key-term">å˜é‡æå‡ (hoisting)</strong>ï¼Œå£°æ˜ä¼šè¢«æå‡ï¼Œä½†èµ‹å€¼ç•™åœ¨åŸåœ°ï¼ˆæå‡åå€¼ä¸º <code>undefined</code>ï¼‰ã€‚</li>
                            <li><code>let</code> & <code>const</code>: å…·æœ‰<strong class="key-term">å—çº§ä½œç”¨åŸŸ</strong> (<code>{}</code> å†…æœ‰æ•ˆ)ã€‚ä¹Ÿå­˜åœ¨æå‡ï¼Œä½†å¼•å…¥äº† <strong class="key-term tooltip-term" data-tooltip="Temporal Dead Zone: ä»å—ä½œç”¨åŸŸå¼€å§‹åˆ°å˜é‡å£°æ˜è¯­å¥ä¹‹é—´çš„åŒºåŸŸã€‚åœ¨æ­¤åŒºåŸŸè®¿é—®å˜é‡ä¼šæŠ¥é”™ã€‚">æš‚æ—¶æ€§æ­»åŒº (TDZ)</strong>ï¼Œåœ¨å£°æ˜å‰è®¿é—®ä¼šæŠ›å‡º <code>ReferenceError</code>ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">// var: å‡½æ•°ä½œç”¨åŸŸ & æå‡
function varScopeTest() {
  console.log(a); // undefined (hoisted)
  if (true) {
    var a = 10;
  }
  console.log(a); // 10 (accessible outside block because var is function-scoped)
}
varScopeTest();

// let/const: å—çº§ä½œç”¨åŸŸ & TDZ
function letScopeTest() {
  // console.log(b); // ReferenceError: Cannot access 'b' before initialization (TDZ)
  if (true) {
    let b = 20;
    const c = 30;
    console.log(b); // 20
    console.log(c); // 30
  }
  // console.log(b); // ReferenceError: b is not defined (outside its block scope)
}
letScopeTest();</code></pre>
                        <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> æ¸…æ™°è§£é‡Š <code>var</code>, <code>let</code>, <code>const</code> çš„åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯ä½œç”¨åŸŸã€æå‡è¡Œä¸ºå’Œ TDZã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">é‡å¤å£°æ˜ä¸èµ‹å€¼ (Redeclaration & Reassignment)</h3>
                        <ul>
                            <li><code>var</code>: <strong class="text-yellow-600">å…è®¸</strong>åœ¨åŒä¸€ä½œç”¨åŸŸå†…é‡å¤å£°æ˜ã€‚</li>
                            <li><code>let</code> & <code>const</code>: <strong class="important-note">ä¸å…è®¸</strong>åœ¨åŒä¸€ä½œç”¨åŸŸå†…é‡å¤å£°æ˜ã€‚</li>
                            <li><code>let</code>: å…è®¸é‡æ–°èµ‹å€¼ã€‚</li>
                            <li><code>const</code>: <strong class="important-note">ä¸å…è®¸</strong>é‡æ–°èµ‹å€¼ã€‚å£°æ˜æ—¶<strong class="important-note">å¿…é¡»</strong>åˆå§‹åŒ–ã€‚</li>
                        </ul>
                        <p><strong>å…³é”®æ³¨æ„ (<code>const</code> ä¸å¯¹è±¡/æ•°ç»„):</strong> ä½¿ç”¨ <code>const</code> å£°æ˜å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå˜é‡æœ¬èº«ï¼ˆå­˜å‚¨çš„å†…å­˜åœ°å€/å¼•ç”¨ï¼‰ä¸å¯å˜ï¼Œä½†å¯¹è±¡å†…éƒ¨çš„å±æ€§æˆ–æ•°ç»„å†…éƒ¨çš„å…ƒç´ æ˜¯<strong class="key-term">å¯ä»¥ä¿®æ”¹</strong>çš„ã€‚</p>
                        <pre><code class="language-javascript">var x = 1;
var x = 2; // Allowed, but often leads to confusion

let y = 1;
// let y = 2; // SyntaxError: Identifier 'y' has already been declared

let z = 1;
z = 2; // Allowed

const PI = 3.14;
// PI = 3.14159; // TypeError: Assignment to constant variable.
// const E; // SyntaxError: Missing initializer in const declaration.

// --- const with objects/arrays ---
const userProfile = { name: 'Alice' };
userProfile.name = 'Bob'; // OK: Modifying property of constant object
userProfile.city = 'New York'; // OK: Adding property
// userProfile = { id: 1 }; // TypeError: Assignment to constant variable.

const scores = [90, 85];
scores.push(99); // OK: Modifying constant array
scores[0] = 92;  // OK
// scores = [100]; // TypeError: Assignment to constant variable.</code></pre>
                        <p class="mt-4 font-medium bg-green-50 p-3 rounded border border-green-200 text-sm"><strong>æœ€ä½³å®è·µ:</strong> é»˜è®¤ä½¿ç”¨ <code>const</code> å¢å¼ºä»£ç å¯é¢„æµ‹æ€§ã€‚ä»…åœ¨ç¡®å®šå˜é‡éœ€è¦é‡æ–°èµ‹å€¼æ—¶ä½¿ç”¨ <code>let</code>ã€‚é¿å…ä½¿ç”¨ <code>var</code> ä»¥å‡å°‘ä½œç”¨åŸŸå’Œæå‡ç›¸å…³çš„æ½œåœ¨é—®é¢˜ã€‚</p>

                        <div class="quiz-card" id="quiz-let-const">
                            <div class="quiz-question"><span class="material-icons">quiz</span>é—®é¢˜: ä¸‹é¢çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ
                                <pre><code class="language-javascript">const config = { setting: 'A' };
config.setting = 'B';
config = { setting: 'C' }; // è¿™è¡Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
console.log(config.setting);</code></pre>
                            </div>
                            <button class="quiz-toggle button button-secondary">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text"> æŸ¥çœ‹ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> ä»£ç ä¼šåœ¨ `config = { setting: 'C' };` è¿™ä¸€è¡ŒæŠ›å‡º `TypeError: Assignment to constant variable.`ã€‚</p>
                                <p><strong>è§£æ:</strong></p>
                                <ol>
                                    <li>`const config = { setting: 'A' };` å£°æ˜äº†ä¸€ä¸ªå¸¸é‡ `config`ï¼Œå®ƒå¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ã€‚</li>
                                    <li>`config.setting = 'B';` æ˜¯å…è®¸çš„ï¼Œå› ä¸ºå®ƒä¿®æ”¹çš„æ˜¯ `config` æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…éƒ¨å±æ€§ï¼Œè€Œä¸æ˜¯ `config` å˜é‡æœ¬èº«ã€‚</li>
                                    <li>`config = { setting: 'C' };` è¯•å›¾å°† `config` å˜é‡é‡æ–°èµ‹å€¼ç»™ä¸€ä¸ªæ–°çš„å¯¹è±¡å¼•ç”¨ã€‚ç”±äº `config` æ˜¯ç”¨ `const` å£°æ˜çš„ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸å…è®¸çš„ï¼Œå› æ­¤ä¼šæŠ›å‡º TypeErrorã€‚</li>
                                </ol>
                                <p class="mt-2 font-medium">å…³é”®åœ¨äºåŒºåˆ†ä¿®æ”¹å¯¹è±¡å±æ€§å’Œé‡æ–°èµ‹å€¼å¸¸é‡å˜é‡ã€‚</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="arrow-functions" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">functions</span>ç®­å¤´å‡½æ•°åŠå…¶ this æŒ‡å‘</h2>
                    <div class="content-card">
                        <h3 class="head3">ç®€æ´è¯­æ³• (Concise Syntax)</h3>
                        <p>ç®­å¤´å‡½æ•° (<code>=></code>) æä¾›äº†æ›´çŸ­çš„å‡½æ•°ä¹¦å†™æ–¹å¼ï¼Œå°¤å…¶é€‚ç”¨äºç®€å•çš„å›è°ƒå‡½æ•°ã€‚</p>
                        <pre><code class="language-javascript">// Traditional Function Expression
const add = function(a, b) {
  return a + b;
};

// Arrow Function Equivalent
const subtract = (a, b) => {
  return a - b;
};

// Implicit return for single expression
const multiply = (a, b) => a * b;

// Single parameter (parentheses optional)
const square = x => x * x;

// No parameters
const getRandom = () => Math.random();

console.log(multiply(5, 4)); // 20
console.log(square(7));      // 49</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">æ ¸å¿ƒåŒºåˆ«: `this` æŒ‡å‘ (Lexical `this`)</h3>
                        <p>è¿™æ˜¯ç®­å¤´å‡½æ•°ä¸ä¼ ç»Ÿå‡½æ•°æœ€æœ¬è´¨çš„åŒºåˆ«ï¼š</p>
                        <ul>
                            <li><strong>ç®­å¤´å‡½æ•°:</strong> <strong class="important-note">æ²¡æœ‰è‡ªå·±çš„ <code>this</code></strong>ã€‚å®ƒä¼š<strong class="key-term">æ•è·</strong>å…¶<strong class="key-term">å®šä¹‰æ—¶</strong>æ‰€åœ¨çš„<strong class="key-term tooltip-term" data-tooltip="å‡½æ•°å®šä¹‰æ—¶æ‰€å¤„çš„ä½œç”¨åŸŸ">è¯æ³•ä½œç”¨åŸŸ (lexical scope)</strong> çš„ <code>this</code> å€¼ã€‚è¿™ä¸ª <code>this</code> å€¼åœ¨ç®­å¤´å‡½æ•°å†…éƒ¨æ˜¯<strong class="important-note">å›ºå®šä¸å˜çš„</strong>ï¼Œä¸èƒ½é€šè¿‡ <code>.call()</code>, <code>.apply()</code>, <code>.bind()</code> æˆ– <code>new</code> æ¥æ”¹å˜ã€‚</li>
                            <li><strong>ä¼ ç»Ÿå‡½æ•°:</strong> <code>this</code> çš„å€¼å–å†³äº<strong class="key-term">å‡½æ•°å¦‚ä½•è¢«è°ƒç”¨</strong>ï¼ˆè°ƒç”¨æ–¹å¼å†³å®š <code>this</code>ï¼Œä¾‹å¦‚ï¼šä½œä¸ºå¯¹è±¡æ–¹æ³•ã€æ™®é€šå‡½æ•°ã€æ„é€ å‡½æ•°ã€æˆ–é€šè¿‡ `call/apply/bind` è°ƒç”¨ï¼‰ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">'use strict'; // Recommended for predictable 'this' behavior

const timer = {
  seconds: 0,
  startTraditional: function() {
    console.log("Traditional outer this:", this); // 'this' is 'timer' object
    // Problem: 'this' inside setTimeout callback refers to global/undefined
    setTimeout(function() {
      console.log("Traditional inner this:", this); // undefined in strict mode
      // console.log(this.seconds); // TypeError in strict mode
    }, 500);
  },
  startArrow: function() {
    console.log("Arrow outer this:", this); // 'this' is 'timer' object
    // Solution: Arrow function captures 'this' from the surrounding 'startArrow' scope
    setTimeout(() => {
      console.log("Arrow inner this:", this); // 'this' is 'timer' object
      this.seconds++;
      console.log("Seconds:", this.seconds); // Correctly increments timer.seconds
    }, 1000);
  }
};

// timer.startTraditional();
timer.startArrow(); // This will work as expected</code></pre>
                        <p class="mt-3"><strong>åº”ç”¨åœºæ™¯:</strong> ç®­å¤´å‡½æ•°éå¸¸é€‚åˆç”¨åœ¨éœ€è¦ä¿æŒå¤–éƒ¨ <code>this</code> ä¸Šä¸‹æ–‡çš„å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚ <code>setTimeout</code>, <code>setInterval</code>, äº‹ä»¶ç›‘å¬å™¨, ä»¥åŠ <code>.map()</code>, <code>.filter()</code> ç­‰æ•°ç»„æ–¹æ³•çš„å›è°ƒã€‚</p>
                        <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> è§£é‡Šç®­å¤´å‡½æ•° `this` çš„è¯æ³•ç»‘å®šç‰¹æ€§ï¼Œä¸ä¼ ç»Ÿå‡½æ•° `this` çš„åŠ¨æ€ç»‘å®šè¿›è¡Œå¯¹æ¯”ã€‚çŸ¥é“å¦‚ä½•è§£å†³å›è°ƒä¸­ `this` ä¸¢å¤±çš„é—®é¢˜ã€‚</p>
                    </div>
                     <div class="content-card">
                        <h3 class="head3">å…¶ä»–é™åˆ¶ (Other Characteristics)</h3>
                        <ul>
                            <li><strong class="important-note">ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°:</strong> ä½¿ç”¨ <code>new</code> è°ƒç”¨ç®­å¤´å‡½æ•°ä¼šæŠ›å‡º <code>TypeError</code>ã€‚</li>
                            <li><strong class="important-note">æ²¡æœ‰ <code>arguments</code> å¯¹è±¡:</strong> éœ€è¦è®¿é—®æ‰€æœ‰ä¼ å…¥å‚æ•°æ—¶ï¼Œåº”ä½¿ç”¨<strong class="key-term">å‰©ä½™å‚æ•° (`...rest`)</strong>ã€‚</li>
                            <li><strong class="important-note">æ²¡æœ‰ <code>prototype</code> å±æ€§:</strong> å› ä¸ºä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸éœ€è¦ <code>prototype</code>ã€‚</li>
                            <li>é€šå¸¸ä¸èƒ½ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•ï¼ˆé™¤éä¸ä¾èµ– <code>this</code> æˆ–æ˜ç¡®çŸ¥é“è¯æ³• <code>this</code> æ˜¯ä»€ä¹ˆï¼‰ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">// 1. Not a constructor
const MyArrowClass = () => {};
// const instance = new MyArrowClass(); // TypeError: MyArrowClass is not a constructor

// 2. No 'arguments' object
const sumArgs = (...args) => { // Use rest parameters instead
  // console.log(arguments); // ReferenceError
  return args.reduce((sum, num) => sum + num, 0);
};
console.log(sumArgs(1, 2, 3, 4)); // 10

// 3. No 'prototype' property
console.log(MyArrowClass.prototype); // undefined

// 4. As an object method (lexical this matters)
const counter = {
    count: 0,
    increment: () => {
        // 'this' here is NOT the 'counter' object.
        // It's inherited from the scope where 'counter' object is defined (likely global/window or undefined).
        // this.count++; // This will likely cause an error or unexpected behavior.
        console.log("Arrow method 'this':", this);
    }
};
// counter.increment(); // Avoid using arrow functions for methods that rely on the object's 'this'.</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> äº†è§£ç®­å¤´å‡½æ•°çš„è¿™äº›é™åˆ¶ï¼ŒçŸ¥é“ä½•æ—¶ä¸é€‚åˆä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p>

                         <div class="quiz-card" id="quiz-arrow-this">
                            <div class="quiz-question"><span class="material-icons">quiz</span>é—®é¢˜: åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œä»¥ä¸‹ä»£ç  `obj.arrowMethod()` ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ
                                <pre><code class="language-javascript">const obj = {
  value: 'Inside obj',
  arrowMethod: () => {
    console.log(this.value);
  }
};

const value = 'Global value'; // Assume this is global

obj.arrowMethod(); // è¾“å‡º?</code></pre>
                            </div>
                            <button class="quiz-toggle button button-secondary">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text"> æŸ¥çœ‹ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> è¾“å‡º `Global value` (éä¸¥æ ¼æ¨¡å¼ä¸‹) æˆ– `undefined` (ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœå…¨å±€æ²¡æœ‰ `value` å±æ€§)ã€‚</p>
                                <p><strong>è§£æ:</strong></p>
                                <ol>
                                    <li>ç®­å¤´å‡½æ•° `arrowMethod` åœ¨å®šä¹‰æ—¶æ•è·å…¶è¯æ³•ä½œç”¨åŸŸçš„ `this`ã€‚</li>
                                    <li>å¯¹è±¡å­—é¢é‡ `{...}` æœ¬èº«ä¸åˆ›å»ºæ–°çš„ `this` ä½œç”¨åŸŸã€‚å› æ­¤ï¼Œ`arrowMethod` å®šä¹‰æ—¶æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ˜¯å…¨å±€ä½œç”¨åŸŸï¼ˆæˆ–æ¨¡å—ä½œç”¨åŸŸï¼‰ã€‚</li>
                                    <li>åœ¨éä¸¥æ ¼æ¨¡å¼çš„æµè§ˆå™¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œ`this` æŒ‡å‘ `window` å¯¹è±¡ã€‚å› æ­¤ `this.value` è®¿é—®çš„æ˜¯å…¨å±€å˜é‡ `value`ã€‚</li>
                                     <li>åœ¨ä¸¥æ ¼æ¨¡å¼æˆ–æ¨¡å—ä½œç”¨åŸŸä¸­ï¼Œé¡¶å±‚ `this` æ˜¯ `undefined`ï¼Œè®¿é—® `this.value` ä¼šå¯¼è‡´ TypeError æˆ–è¾“å‡º `undefined`ï¼ˆå–å†³äºå…¨å±€æ˜¯å¦æœ‰ `value`ï¼‰ã€‚</li>
                                </ol>
                                <p class="mt-2 font-medium">å…³é”®åœ¨äºç®­å¤´å‡½æ•° `this` çš„è¯æ³•ç»‘å®šç‰¹æ€§ï¼Œå®ƒä¸çœ‹è°ƒç”¨æ–¹å¼ï¼Œåªçœ‹å®šä¹‰æ—¶çš„ç¯å¢ƒã€‚</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="template-literals" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">text_fields</span>æ¨¡æ¿å­—ç¬¦ä¸² (Template Literals)</h2>
                    <div class="content-card">
                        <h3 class="head3">åŸºæœ¬è¯­æ³•ä¸ä¼˜åŠ¿</h3>
                        <p>ä½¿ç”¨åå¼•å· (<code>`</code>) å®šä¹‰å­—ç¬¦ä¸²ï¼Œæä¾›äº†æ¯”ä¼ ç»Ÿå•å¼•å·/åŒå¼•å·æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
                        <p><strong>ä¸»è¦ä¼˜åŠ¿ï¼š</strong></p>
                        <ul>
                            <li><strong>å­—ç¬¦ä¸²æ’å€¼ (Interpolation):</strong> ä½¿ç”¨ <code>${expression}</code> è½»æ¾åµŒå…¥å˜é‡å’Œè¡¨è¾¾å¼ï¼Œä»£ç æ›´æ¸…æ™°ã€‚</li>
                            <li><strong>å¤šè¡Œå­—ç¬¦ä¸²:</strong> ç›´æ¥ä¹¦å†™è·¨è¶Šå¤šè¡Œçš„å­—ç¬¦ä¸²ï¼Œä¿æŒä»£ç æ ¼å¼ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">const userName = "Alex";
const score = 88;
const level = Math.floor(score / 10);

// Interpolation Example
const report = `User: ${userName.toUpperCase()}
Score: ${score}
Level: ${level}
Status: ${score >= 60 ? 'Passed' : 'Failed'}`;

console.log(report);
/* Output:
User: ALEX
Score: 88
Level: 8
Status: Passed
*/

// Comparison with traditional concatenation
const traditionalReport = "User: " + userName.toUpperCase() + "\n" +
                         "Score: " + score + "\n" +
                         "Level: " + level + "\n" +
                         "Status: " + (score >= 60 ? 'Passed' : 'Failed');
console.log(traditionalReport === report); // true (but template literal is more readable)</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">æ ‡ç­¾æ¨¡æ¿ (Tagged Templates)</h3>
                        <p>è¿™æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ç‰¹æ€§ï¼Œå…è®¸ä½ é€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ˆæ ‡ç­¾ï¼‰æ¥å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²çš„å„ä¸ªéƒ¨åˆ†ã€‚</p>
                        <p>æ ‡ç­¾å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
                        <ol>
                            <li>å­—ç¬¦ä¸²å­—é¢é‡ç»„æˆçš„æ•°ç»„ (è¢«æ’å€¼åˆ†å‰²çš„éƒ¨åˆ†)ã€‚</li>
                            <li>ä¾æ¬¡æ’åˆ—çš„æ’å€¼è¡¨è¾¾å¼çš„ç»“æœã€‚</li>
                        </ol>
                        <p>å¸¸ç”¨äºï¼šHTML/SQL è½¬ä¹‰ã€å›½é™…åŒ– (i18n)ã€æ ·å¼åŒ–ç»„ä»¶ (å¦‚ `styled-components`) ç­‰ã€‚</p>
                         <pre><code class="language-javascript">// Example: Simple HTML escaping tag
function sanitizeHTML(strings, ...values) {
  let result = '';
  strings.forEach((str, i) => {
    result += str;
    if (values[i] !== undefined) {
      let valueStr = String(values[i]);
      // Basic escaping (replace <, >, &) - real scenarios need more robust libraries
      result += valueStr.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }
  });
  return result;
}

const userInput = '&lt;script&gt;alert("XSS")&lt;/script&gt;';
const safeHTML = sanitizeHTML`&lt;p&gt;User comment: ${userInput}&lt;/p&gt;`;

console.log(safeHTML);
// Output: &lt;p&gt;User comment: &lt;script&gt;alert("XSS")&lt;/script&gt;&lt;/p&gt;</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> äº†è§£æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸºæœ¬ç”¨æ³•ï¼ˆæ’å€¼ã€å¤šè¡Œï¼‰ã€‚çŸ¥é“æ ‡ç­¾æ¨¡æ¿çš„å­˜åœ¨åŠå…¶åŸºæœ¬å·¥ä½œåŸç†ï¼ˆå‡½æ•°æ¥æ”¶å­—ç¬¦ä¸²æ•°ç»„å’Œå€¼ï¼‰ã€‚</p>
                    </div>
                </section>

                <section id="destructuring" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">scatter_plot</span>è§£æ„èµ‹å€¼ (Destructuring Assignment)</h2>
                    <p>ä¸€ç§æ–¹ä¾¿åœ°ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–æ•°æ®å¹¶èµ‹å€¼ç»™å˜é‡çš„è¯­æ³•ã€‚</p>
                    <div class="content-card">
                        <h3 class="head3">æ•°ç»„è§£æ„ (Array Destructuring)</h3>
                        <p>æŒ‰<strong class="key-term">ä½ç½®</strong>æå–ã€‚</p>
                        <ul>
                            <li>åŸºæœ¬èµ‹å€¼ã€è·³è¿‡å…ƒç´ ã€å‰©ä½™å…ƒç´  (`...rest`)ã€é»˜è®¤å€¼ã€å˜é‡äº¤æ¢ã€‚</li>
                        </ul>
                         <pre><code class="language-javascript">const rgbColor = [255, 128, 0];

// Basic
const [red, green, blue] = rgbColor;
console.log(`R: ${red}, G: ${green}, B: ${blue}`); // R: 255, G: 128, B: 0

// With rest
const [r, ...gb] = rgbColor;
console.log(r, gb); // 255, [ 128, 0 ]

// With default value
const coordinates = [10];
const [x = 0, y = 0, z = 0] = coordinates;
console.log(`X: ${x}, Y: ${y}, Z: ${z}`); // X: 10, Y: 0, Z: 0

// Swapping
let a = 1, b = 2;
[a, b] = [b, a];
console.log(a, b); // 2, 1</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">å¯¹è±¡è§£æ„ (Object Destructuring)</h3>
                        <p>æŒ‰<strong class="key-term">å±æ€§å</strong>æå–ã€‚</p>
                        <ul>
                            <li>åŸºæœ¬èµ‹å€¼ï¼ˆå˜é‡åéœ€ä¸å±æ€§åç›¸åŒï¼‰ã€èµ‹ç»™æ–°å˜é‡åã€å‰©ä½™å±æ€§ (`...rest`)ã€é»˜è®¤å€¼ã€åµŒå¥—è§£æ„ã€å‡½æ•°å‚æ•°è§£æ„ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">const user = {
  id: 'u001',
  details: { name: 'Diana', age: 28 },
  role: 'admin',
  prefs: { theme: 'dark' }
};

// Basic
const { role } = user;
console.log(role); // admin

// New variable name & default value
const { id: userId, status = 'active' } = user;
console.log(userId, status); // u001 active

// Nested & new name
const { details: { name: userName }, prefs: { theme = 'light' } } = user;
console.log(userName, theme); // Diana dark

// Rest properties
const { details, ...otherInfo } = user;
console.log(details);    // { name: 'Diana', age: 28 }
console.log(otherInfo); // { id: 'u001', role: 'admin', prefs: { theme: 'dark' } }

// Function parameter destructuring with default value
function displayUser({ details: { name }, role = 'guest' }) {
  console.log(`Name: ${name}, Role: ${role}`);
}
displayUser(user); // Name: Diana, Role: admin
displayUser({ details: { name: 'Guest' } }); // Name: Guest, Role: guest</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> ç†Ÿç»ƒä½¿ç”¨æ•°ç»„å’Œå¯¹è±¡è§£æ„ï¼ŒåŒ…æ‹¬é‡å‘½åã€é»˜è®¤å€¼ã€å‰©ä½™è¯­æ³•å’ŒåµŒå¥—è§£æ„ã€‚ç†è§£å…¶åœ¨ç®€åŒ–ä»£ç ï¼ˆå¦‚å¤„ç†å‡½æ•°å‚æ•°ã€è¿”å›å€¼ï¼‰æ–¹é¢çš„åº”ç”¨ã€‚</p>
                    </div>
                </section>

                <section id="spread-rest" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">control_point_duplicate</span>å±•å¼€è¯­æ³• (...) ä¸ å‰©ä½™å‚æ•° (...)</h2>
                    <p>å®ƒä»¬ä½¿ç”¨ç›¸åŒçš„ <code>...</code> è¯­æ³•ï¼Œä½†æ ¹æ®ä¸Šä¸‹æ–‡å«ä¹‰ä¸åŒã€‚</p>
                    <div class="content-card">
                        <h3 class="head3">å±•å¼€è¯­æ³• (Spread Syntax)</h3>
                        <p>å°†å¯è¿­ä»£å¯¹è±¡ï¼ˆæ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰æˆ–å¯¹è±¡â€œå±•å¼€â€ä¸ºç‹¬ç«‹çš„å…ƒç´ æˆ–å±æ€§ã€‚ç”¨äº<strong class="key-term">æ„å»º</strong>æ–°çš„æ•°ç»„/å¯¹è±¡æˆ–<strong class="key-term">ä¼ é€’</strong>å‚æ•°ã€‚</p>
                        <pre><code class="language-javascript">// --- In Arrays ---
const parts = ['shoulders', 'knees'];
const body = ['head', ...parts, 'toes']; // ['head', 'shoulders', 'knees', 'toes']
const arrCopy = [...body]; // Shallow copy

// --- In Function Calls ---
const numbers = [1, 5, 2, 8];
console.log(Math.max(...numbers)); // 8 (Passes 1, 5, 2, 8 as individual args)

// --- In Objects (ES2018+) ---
const defaults = { color: 'blue', size: 'M' };
const custom = { size: 'L', material: 'cotton' };
const product = { ...defaults, ...custom, id: 123 };
// { color: 'blue', size: 'L', material: 'cotton', id: 123 } (custom.size overrides defaults.size)
const defaultsCopy = { ...defaults }; // Shallow copy

console.log(body);
console.log(product);</code></pre>
                        <p><strong>æ³¨æ„:</strong> å±•å¼€è¯­æ³•è¿›è¡Œçš„æ˜¯<strong class="important-note">æµ…æ‹·è´</strong>ã€‚å¦‚æœæ•°ç»„æˆ–å¯¹è±¡ä¸­åŒ…å«å…¶ä»–å¯¹è±¡æˆ–æ•°ç»„ï¼Œæ‹·è´çš„æ˜¯å®ƒä»¬çš„å¼•ç”¨ã€‚</p>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">å‰©ä½™å‚æ•° (Rest Parameters)</h3>
                        <p>ç”¨åœ¨<strong class="key-term">å‡½æ•°å®šä¹‰</strong>çš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œå°†<strong class="key-term">ä¸å®šæ•°é‡</strong>çš„ä¼ å…¥å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ª<strong class="key-term">çœŸæ­£çš„æ•°ç»„</strong>ä¸­ã€‚å¿…é¡»æ˜¯<strong class="important-note">æœ€åä¸€ä¸ª</strong>å‚æ•°ã€‚</p>
                        <p>å®ƒæä¾›äº†æ¯”æ—§çš„ <code>arguments</code> å¯¹è±¡æ›´ç°ä»£ã€æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥å¤„ç†å¯å˜æ•°é‡çš„å‚æ•°ã€‚</p>
                        <pre><code class="language-javascript">function multiply(multiplier, ...numbersToMultiply) {
  // multiplier = 2
  // numbersToMultiply = [1, 5, 10] (a real array)
  console.log('Multiplier:', multiplier);
  console.log('Numbers to multiply:', numbersToMultiply);
  return numbersToMultiply.map(n => n * multiplier);
}

const result = multiply(2, 1, 5, 10);
console.log('Result:', result); // Result: [ 2, 10, 20 ]

function logArgs(arg1, ...restArgs) {
    console.log("First Arg:", arg1);
    console.log("Rest Args Array:", restArgs);
    // console.log(arguments); // Avoid using 'arguments' when rest parameters are available
}
logArgs('hello', true, 100, 'world');
// First Arg: hello
// Rest Args Array: [ true, 100, 'world' ]</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> åŒºåˆ†å±•å¼€è¯­æ³•å’Œå‰©ä½™å‚æ•°çš„ä½¿ç”¨åœºæ™¯å’Œä½œç”¨ã€‚çŸ¥é“å‰©ä½™å‚æ•°æ˜¯çœŸæ•°ç»„ï¼Œè€Œ `arguments` æ˜¯ç±»æ•°ç»„å¯¹è±¡ã€‚</p>

                        <div class="quiz-card" id="quiz-spread-rest">
                            <div class="quiz-question"><span class="material-icons">quiz</span>é—®é¢˜: ä»¥ä¸‹ä»£ç ä¸­ `...` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ
                                <pre><code class="language-javascript">function process(x, ...y) {
  const arr = [0, ...y];
  console.log(arr);
}
const data = [1, 2, 3];
process(...data); // è¾“å‡º?</code></pre>
                            </div>
                            <button class="quiz-toggle button button-secondary">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text"> æŸ¥çœ‹ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> è¾“å‡º `[ 0, 2, 3 ]`</p>
                                <p><strong>è§£æ:</strong></p>
                                <ol>
                                    <li>`process(...data)`: è¿™é‡Œçš„ `...` æ˜¯<strong class="key-term">å±•å¼€è¯­æ³•</strong>ã€‚å®ƒå°†æ•°ç»„ `data` ([1, 2, 3]) å±•å¼€æˆç‹¬ç«‹çš„å‚æ•°ä¼ é€’ç»™ `process` å‡½æ•°ã€‚ç›¸å½“äºè°ƒç”¨ `process(1, 2, 3)`ã€‚</li>
                                    <li>`function process(x, ...y)`: è¿™é‡Œçš„ `...y` æ˜¯<strong class="key-term">å‰©ä½™å‚æ•°</strong>ã€‚å®ƒä¼šå°†ç¬¬ä¸€ä¸ªå‚æ•° (`1`) èµ‹å€¼ç»™ `x`ï¼Œå¹¶å°†<strong class="important-note">å‰©ä½™çš„</strong>å‚æ•° (`2`, `3`) æ”¶é›†åˆ°ä¸€ä¸ªåä¸º `y` çš„<strong class="key-term">æ•°ç»„</strong>ä¸­ã€‚æ‰€ä»¥ `y` å˜ä¸º `[2, 3]`ã€‚</li>
                                    <li>`const arr = [0, ...y]`: è¿™é‡Œçš„ `...y` å†æ¬¡æ˜¯<strong class="key-term">å±•å¼€è¯­æ³•</strong>ã€‚å®ƒå°†æ•°ç»„ `y` ([2, 3]) å±•å¼€æˆç‹¬ç«‹çš„å…ƒç´ æ”¾å…¥æ–°æ•°ç»„ `arr` ä¸­ã€‚æ‰€ä»¥ `arr` å˜ä¸º `[0, 2, 3]`ã€‚</li>
                                    <li>`console.log(arr)` è¾“å‡º `[ 0, 2, 3 ]`ã€‚</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="array-methods" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">list_alt</span>æ•°ç»„å¸¸ç”¨æ–¹æ³•</h2>
                    <p>ES5/ES6+ æä¾›äº†ä¸°å¯Œçš„æ•°ç»„æ–¹æ³•ï¼Œä½¿å¾—æ•°ç»„æ“ä½œæ›´å‡½æ•°åŒ–ã€æ›´æ˜“è¯»ã€‚</p>
                    <div class="content-card">
                        <h3 class="head3">éå†ä¸è½¬æ¢ (<code>forEach</code>, <code>map</code>)</h3>
                        <ul>
                            <li><code>forEach(callback)</code>: éå†æ‰§è¡Œï¼Œæ— è¿”å›å€¼ã€‚</li>
                            <li><code>map(callback)</code>: æ˜ å°„è½¬æ¢ï¼Œè¿”å›æ–°æ•°ç»„ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">const items = [
  { name: 'Pen', price: 1.5 },
  { name: 'Paper', price: 0.5 },
  { name: 'Book', price: 10 }
];

// forEach: Log item names
items.forEach(item => console.log(item.name)); // Pen, Paper, Book

// map: Get an array of prices
const prices = items.map(item => item.price);
console.log(prices); // [ 1.5, 0.5, 10 ]</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">ç­›é€‰ (`filter`)</h3>
                        <ul>
                            <li><code>filter(callback)</code>: æ ¹æ®æ¡ä»¶ç­›é€‰ï¼Œè¿”å›æ–°æ•°ç»„ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">// filter: Get items with price >= 1
const expensiveItems = items.filter(item => item.price >= 1);
console.log(expensiveItems); // [ { name: 'Pen', price: 1.5 }, { name: 'Book', price: 10 } ]</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">èšåˆ (`reduce`)</h3>
                        <ul>
                            <li><code>reduce(callback, initialValue)</code>: å°†æ•°ç»„å…ƒç´ ç´¯ç§¯è®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">// reduce: Calculate total price
const totalPrice = items.reduce((sum, item) => sum + item.price, 0);
console.log(totalPrice); // 12</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> ç†Ÿç»ƒä½¿ç”¨ `map`, `filter`, `reduce`ã€‚ç†è§£å®ƒä»¬çš„ä½œç”¨ã€å‚æ•°ã€è¿”å›å€¼ä»¥åŠæ˜¯å¦ä¿®æ”¹åŸæ•°ç»„ï¼ˆè¿™äº›æ–¹æ³•éƒ½ä¸ä¿®æ”¹åŸæ•°ç»„ï¼‰ã€‚å¯èƒ½ä¼šè¦æ±‚æ‰‹å†™ `map`, `filter` æˆ– `reduce` çš„ç®€å•å®ç°ã€‚</p>
                    </div>
                     <div class="content-card">
                        <h3 class="head3">æŸ¥æ‰¾ (`find`, `findIndex`, `includes`)</h3>
                         <ul>
                            <li><code>find(callback)</code>: æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</li>
                            <li><code>findIndex(callback)</code>: æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ç´¢å¼•ã€‚</li>
                            <li><code>includes(value)</code>: åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå€¼ (å¯æŸ¥ NaN)ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">const book = items.find(item => item.name === 'Book');
console.log(book); // { name: 'Book', price: 10 }

const paperIndex = items.findIndex(item => item.name === 'Paper');
console.log(paperIndex); // 1

console.log(prices.includes(0.5)); // true</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">æ£€æŸ¥ (`some`, `every`)</h3>
                         <ul>
                            <li><code>some(callback)</code>: æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶ã€‚</li>
                            <li><code>every(callback)</code>: æ˜¯å¦æ‰€æœ‰éƒ½æ»¡è¶³æ¡ä»¶ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">const hasCheapItem = items.some(item => item.price < 1);
console.log(hasCheapItem); // true (Paper)

const allItemsPriced = items.every(item => item.price > 0);
console.log(allItemsPriced); // true</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> ç†è§£ `find`/`findIndex`, `includes`, `some`/`every` çš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯ã€‚</p>
                    </div>
                </section>

                <section id="modules" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">hub</span>æ¨¡å—åŒ– (import/export)</h2>
                    <p>ES6 æ¨¡å—åŒ– (ESM) æä¾›äº†å®˜æ–¹çš„ã€åŸºäºæ–‡ä»¶çš„æ¨¡å—ç³»ç»Ÿã€‚</p>
                    <div class="content-card">
                        <h3 class="head3">å¯¼å‡º (`export`)</h3>
                        <p>å®šä¹‰æ¨¡å—çš„å…¬å…±æ¥å£ã€‚</p>
                        <ul>
                            <li><strong>å‘½åå¯¼å‡º (Named):</strong> <code>export const/let/var/function/class ...</code> æˆ– <code>export { name1, name2 }</code>ã€‚</li>
                            <li><strong>é»˜è®¤å¯¼å‡º (Default):</strong> <code>export default ...</code> (æ¯ä¸ªæ¨¡å—æœ€å¤šä¸€ä¸ª)ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">// --- logger.js ---
export const logLevel = 'info'; // Named export

export function logMessage(message) { // Named export
  console.log(`[${logLevel.toUpperCase()}]: ${message}`);
}

function format(msg) { // Internal helper, not exported
    return `Formatted: ${msg}`;
}

export default class Logger { // Default export
    constructor(prefix) {
        this.prefix = prefix;
    }
    info(message) {
        logMessage(`${this.prefix} - ${format(message)}`);
    }
}</code></pre>
                    </div>
                    <div class="content-card">
                        <h3 class="head3">å¯¼å…¥ (`import`)</h3>
                        <p>ä½¿ç”¨å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p>
                        <ul>
                            <li><strong>å¯¼å…¥å‘½åå¯¼å‡º:</strong> <code>import { name1, name2 as alias } from './module.js'</code></li>
                            <li><strong>å¯¼å…¥é»˜è®¤å¯¼å‡º:</strong> <code>import anyName from './module.js'</code></li>
                            <li><strong>å¯¼å…¥å‘½åç©ºé—´:</strong> <code>import * as namespace from './module.js'</code></li>
                            <li><strong>æ··åˆå¯¼å…¥:</strong> <code>import defaultName, { named1, named2 } from './module.js'</code></li>
                            <li><strong>ä»…æ‰§è¡Œå‰¯ä½œç”¨:</strong> <code>import './module.js'</code> (ä¸å¯¼å…¥ä»»ä½•å˜é‡ï¼Œä»…æ‰§è¡Œæ¨¡å—ä»£ç )</li>
                        </ul>
                        <pre><code class="language-javascript">// --- app.js ---
import DefaultLogger, { logMessage, logLevel as level } from './logger.js';
import * as LoggerUtils from './logger.js';

console.log(`Current log level: ${level}`); // info

logMessage("Application starting..."); // [INFO]: Application starting...

const appLogger = new DefaultLogger("APP");
appLogger.info("User logged in."); // [INFO]: APP - Formatted: User logged in.

console.log(LoggerUtils.logLevel); // info
LoggerUtils.logMessage("Using namespace import."); // [INFO]: Using namespace import.</code></pre>
                         <p class="mt-3"><strong class="interview-point">é¢è¯•è€ƒç‚¹:</strong> ç†è§£å‘½åå¯¼å‡ºå’Œé»˜è®¤å¯¼å‡ºçš„åŒºåˆ«ã€‚æŒæ¡ä¸åŒçš„ `import` è¯­æ³•ã€‚äº†è§£ ESM çš„åŸºæœ¬ç‰¹æ€§ï¼ˆä¸¥æ ¼æ¨¡å¼ã€æ¨¡å—ä½œç”¨åŸŸã€é™æ€åˆ†æï¼‰ã€‚</p>
                    </div>
                     <div class="content-card">
                        <h3 class="head3">ç¯å¢ƒä¸åŠ è½½</h3>
                        <ul>
                            <li><strong>æµè§ˆå™¨:</strong> ä½¿ç”¨ <code>&lt;script type="module"&gt;</code>ã€‚æ¨¡å—é»˜è®¤<strong class="key-term">å»¶è¿Ÿ (defer)</strong> åŠ è½½å’Œæ‰§è¡Œã€‚</li>
                            <li><strong>Node.js:</strong> ä½¿ç”¨ <code>.mjs</code> æˆ–åœ¨ <code>package.json</code> ä¸­è®¾ç½® <code>"type": "module"</code>ã€‚</li>
                            <li><strong>æ„å»ºå·¥å…·:</strong> Webpack, Rollup ç­‰ä¼šå¤„ç†ä¾èµ–å¹¶æ‰“åŒ…ã€‚</li>
                        </ul>
                        <p>ES æ¨¡å—æ˜¯<strong class="key-term">é™æ€è§£æ</strong>çš„ï¼Œæ„å‘³ç€å¯¼å…¥å’Œå¯¼å‡ºå…³ç³»åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œè¿™æœ‰åŠ©äºä¼˜åŒ–å’Œ Tree Shakingã€‚</p>
                         <div class="quiz-card" id="quiz-modules">
                            <div class="quiz-question"><span class="material-icons">quiz</span>é—®é¢˜: å¦‚ä½•ä»ä¸€ä¸ªæ¨¡å—ä¸­åŒæ—¶å¯¼å…¥é»˜è®¤å¯¼å‡ºå’Œä¸€ä¸ªå‘½åå¯¼å‡ºï¼Ÿ</div>
                            <button class="quiz-toggle button button-secondary">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text"> æŸ¥çœ‹ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> ä½¿ç”¨æ··åˆå¯¼å…¥è¯­æ³•ã€‚</p>
                                <pre><code class="language-javascript">// Assuming module './myModule.js' has:
// export default function myFunc() {}
// export const myVar = 123;

import defaultFunction, { myVar } from './myModule.js';

// Usage:
defaultFunction();
console.log(myVar);</code></pre>
                                <p class="mt-2 font-medium">é»˜è®¤å¯¼å‡ºçš„åç§°å†™åœ¨å‰é¢ï¼Œé€—å·éš”å¼€ï¼Œç„¶åæ˜¯èŠ±æ‹¬å·åŒ…è£¹çš„å‘½åå¯¼å‡ºã€‚</p>
                            </div>
                        </div>
                    </div>
                </section>

                 <section id="conclusion" class="content-section fade-in-section">
                    <h2 class="head2"><span class="material-icons">flag</span>æ€»ç»“</h2>
                    <div class="content-card">
                        <p>æŒæ¡è¿™äº› ES6+ æ ¸å¿ƒç‰¹æ€§æ˜¯ç°ä»£ JavaScript å¼€å‘çš„åŸºç¡€ã€‚ç†è§£å®ƒä»¬çš„ä½œç”¨åŸŸã€`this` è¡Œä¸ºã€è¯­æ³•ç³–ä»¥åŠæ¨¡å—åŒ–æœºåˆ¶ï¼Œå°†æå¤§åœ°æå‡ä½ çš„ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚</p>
                        <p>ç»§ç»­å®è·µï¼Œæ¢ç´¢æ›´å¤š ES æ–°ç‰¹æ€§ï¼ˆå¦‚ Promise, async/await, Set, Map ç­‰ï¼‰ï¼Œå¹¶æ·±å…¥ç†è§£å®ƒä»¬åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ï¼</p>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // --- Ripple Effect Logic ---
        function createRipple(event) {
            const button = event.currentTarget;
            // Apply ripple only to elements with the 'button' class (or specific quiz-toggle if needed)
            if (!button || !button.classList.contains('button')) return;

            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            circle.style.width = circle.style.height = `${diameter}px`;
            const rect = button.getBoundingClientRect();
            circle.style.left = `${event.clientX - rect.left - radius}px`;
            circle.style.top = `${event.clientY - rect.top - radius}px`;
            circle.classList.add("ripple");
            const existingRipple = button.querySelector(".ripple");
            if (existingRipple) existingRipple.remove();
            button.appendChild(circle);
            setTimeout(() => circle.remove(), 600);
        }

        // --- Quiz Toggle Logic ---
        function toggleAnswer(quizId, buttonElement) {
            const quizCard = document.getElementById(quizId);
            if (!quizCard) return;
            const answer = quizCard.querySelector('.quiz-answer');
            const icon = buttonElement.querySelector('.icon-arrow');
            const buttonTextSpan = buttonElement.querySelector('.button-text');
            if (!answer || !icon || !buttonTextSpan) return;

            const isVisible = answer.classList.contains('visible');
            if (isVisible) {
                answer.style.maxHeight = '0';
                answer.style.opacity = '0';
                 // Reset padding/margin after transition
                 answer.addEventListener('transitionend', () => {
                    if (!answer.classList.contains('visible')) { // Check again in case it was quickly reopened
                        answer.style.paddingTop = '0';
                        answer.style.paddingBottom = '0';
                        // answer.style.marginTop = '0'; // Keep margin-top handled by button/question
                    }
                }, { once: true }); // Remove listener after it runs once
                answer.classList.remove('visible');
                icon.classList.remove('rotated');
                buttonTextSpan.textContent = ' æŸ¥çœ‹ç­”æ¡ˆ';
            } else {
                // Set final state styles needed for measurement
                answer.style.paddingTop = '1rem';
                answer.style.paddingBottom = '1rem';
                // answer.style.marginTop = '1rem'; // Keep margin-top handled by button/question

                // Make it visible to measure scrollHeight, then start transition
                answer.classList.add('visible'); // Add class first
                answer.style.maxHeight = answer.scrollHeight + 'px'; // Set max-height to trigger transition
                answer.style.opacity = '1';

                icon.classList.add('rotated');
                buttonTextSpan.textContent = ' éšè—ç­”æ¡ˆ';
            }
        }

        // Combined click handler for Quiz Toggle
        function handleQuizToggleClick(quizId, buttonElement, event) {
            createRipple(event); // Add ripple to the button
            toggleAnswer(quizId, buttonElement);
        }

        // --- Intersection Observer for TOC & Fade-in ---
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('main > article > section[id]'); // Target direct children sections
            const tocLinks = document.querySelectorAll('#local-toc a');
            const mainContentSections = document.querySelectorAll('main > article > section.content-section'); // For fade-in

            // --- Event Listeners ---
            // Add ripple/toggle listeners to Quiz Buttons
            const quizToggles = document.querySelectorAll('.quiz-toggle');
            quizToggles.forEach(button => {
                const quizCard = button.closest('.quiz-card');
                const quizId = quizCard?.id;
                if (quizId) {
                    button.addEventListener('click', (event) => handleQuizToggleClick(quizId, button, event));
                } else {
                     // Add ripple to non-quiz buttons too if they have the 'button' class
                     if(button.classList.contains('button')) {
                        button.addEventListener('click', createRipple);
                     }
                }
            });

            // --- TOC Highlighting ---
            const tocObserverOptions = { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 };
            let lastActiveTocLink = null;
            const tocObserverCallback = (entries) => {
                let bestVisibleEntry = null;
                // Find the topmost visible entry
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) {
                            bestVisibleEntry = entry;
                        }
                    }
                });

                // Update active link if a best entry is found
                if (bestVisibleEntry) {
                    const id = bestVisibleEntry.target.getAttribute('id');
                    const activeLink = document.querySelector(`#local-toc a[href="#${id}"]`);
                    if (activeLink && activeLink !== lastActiveTocLink) {
                        if (lastActiveTocLink) lastActiveTocLink.classList.remove('active');
                        activeLink.classList.add('active');
                        lastActiveTocLink = activeLink;
                    }
                }
                // Fallback if no section is clearly "best" (e.g., scrolled past all) - maybe deactivate all or keep last?
                // Current logic keeps the last active one if nothing new is detected.
            };
            const tocObserver = new IntersectionObserver(tocObserverCallback, tocObserverOptions);
            sections.forEach(section => tocObserver.observe(section));

            // --- Initial TOC Active Link ---
            const currentHash = window.location.hash;
            let foundInitial = false;
            if (currentHash) {
                const initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`);
                if (initialActiveLink) {
                    tocLinks.forEach(link => link.classList.remove('active'));
                    initialActiveLink.classList.add('active');
                    lastActiveTocLink = initialActiveLink;
                    foundInitial = true;
                }
            }
            // If no hash or hash link not found, activate the first link
            if (!foundInitial && tocLinks.length > 0) {
                 tocLinks.forEach(link => link.classList.remove('active')); // Ensure clean state
                 tocLinks[0].classList.add('active');
                 lastActiveTocLink = tocLinks[0];
            }

            // --- Fade-in Animation ---
            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 }; // Trigger when 10% visible
            const fadeObserverCallback = (entries, observer) => {
                entries.forEach((entry, index) => { // Use index for stagger calculation
                    if (entry.isIntersecting) {
                        // Use the actual index from the observed elements list for delay
                        const delayIndex = Array.from(mainContentSections).indexOf(entry.target);
                        entry.target.style.animationDelay = `${delayIndex * 0.1}s`; // Slower stagger
                        entry.target.classList.add('fade-in-section');
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            mainContentSections.forEach(section => fadeObserver.observe(section));
        });
    </script>

</body>
</html>
