<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS å…¶ä»–é«˜é¢‘è€ƒç‚¹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../../global.css"> <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />

    <style>
        /* Minimal inline styles - Primarily rely on global.css and Tailwind */

        /* --- Base & Layout Adjustments --- */
        html {
            scroll-padding-top: 2rem; /* Adjust if header is sticky */
        }

        body {
            /* Base font, bg, color assumed from global.css */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Typography (Assuming base H1-H6, p, strong, a, pre, code from global.css) --- */
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 2rem; /* Offset for sticky nav */
        }

        /* Specific heading styles if needed, complementing global.css */
        h2 {
            /* global.css might already style head2, add border if not */
            /* border-bottom: 1px solid var(--border-color-light); */ /* Removed border based on feedback */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem; /* Consistent spacing */
        }

        h3 {
            /* global.css might style head3, adjust color/margins for cards */
            margin-top: 0; /* Reset top margin as card handles spacing */
            margin-bottom: 1.25rem; /* Increased bottom margin */
            color: var(--primary-color-dark); /* Use a distinct color for card titles */
            font-size: 1.25rem; /* Ensure size consistency */
            display: flex; /* Align icon and text */
            align-items: center; /* Align icon and text */
        }
        h3 .material-icons {
            margin-right: 0.5rem; /* Space between icon and text */
            font-size: 1.4rem; /* Slightly larger icon */
            color: var(--primary-color); /* Match primary color */
        }

        /* Specific list styling within article (using global.css .prose/.content-main styles) */
        article ul { list-style: disc; padding-left: 1.5em; margin-bottom: 1.25em; } /* Increased margin */
        article ol { list-style: decimal; padding-left: 1.5em; margin-bottom: 1.25em; } /* Increased margin */
        article li { margin-bottom: 0.6em; } /* Increased margin */
        article ul ul, article ol ol, article ul ol, article ol ul { margin-top: 0.6em; margin-bottom: 0.6em; } /* Increased margin */

        /* Ensure pre uses the mono font and has appropriate styling */
        article pre {
            font-family: var(--font-family-mono);
            border-radius: 0.375rem; /* Ensure rounding */
            margin: 1.25rem 0; /* Increased margin */
            padding: 1.25em; /* Increased padding */
            overflow: auto;
            /* Background/border assumed from global.css or Prism theme */
        }

        /* Reset inline code styles within pre for Prism */
        article pre code[class*="language-"] {
            background: none; color: inherit; padding: 0; border-radius: 0;
            font-size: inherit; font-family: inherit; line-height: inherit;
            text-shadow: none; white-space: pre; display: block;
        }

        /* Add margin between nested cards */
        .content-section > .content-card + .content-card {
            margin-top: 2rem; /* Increased margin */
        }

        /* Remove bottom margin from last element inside a card */
        .content-card > *:last-child {
            margin-bottom: 0 !important; /* Use !important if needed */
        }

        /* --- Content Section Spacing --- */
        .content-section {
             padding-bottom: 1rem; /* Reduced padding as border is removed */
             margin-bottom: 3rem; /* Increased margin between sections */
             /* border-bottom: 1px solid var(--border-color-light); */ /* Removed border */
        }
        .content-section:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
        }


         /* --- Tooltips (Keep as is) --- */
        .tooltip-term {
            border-bottom: 1px dotted var(--primary-color); cursor: help;
            position: relative; color: var(--primary-color); font-weight: 500;
        }
        .tooltip-term::before {
            content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%;
            transform: translateX(-50%) translateY(-8px); background-color: rgba(0, 0, 0, 0.85);
            color: white; padding: 0.4rem 0.75rem; border-radius: 4px; font-size: 0.8rem;
            white-space: nowrap; opacity: 0; visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out; z-index: 10;
        }
        .tooltip-term::after {
            content: ''; position: absolute; bottom: 100%; left: 50%;
            transform: translateX(-50%) translateY(0px); border-width: 5px; border-style: solid;
            border-color: rgba(0, 0, 0, 0.85) transparent transparent transparent;
            opacity: 0; visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out; z-index: 10;
        }
        .tooltip-term:hover::before, .tooltip-term:hover::after {
            opacity: 1; visibility: visible;
        }

        /* --- Fade-in Animation (Keep as is) --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-section {
            opacity: 0; animation: fadeIn 0.5s ease-out forwards;
        }

        /* --- Card Hover Effect --- */
        .content-card {
            /* Base shadow from global.css assumed */
            transition: box-shadow 0.2s ease-in-out;
        }
        .content-card:hover {
             box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* Tailwind shadow-lg */
        }

        /* --- Quiz Card Styling (Improved Feedback) --- */
        .quiz-toggle {
            position: relative; overflow: hidden;
        }
        .ripple {
            position: absolute; border-radius: 50%;
            background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.4);
            transform: scale(0); animation: ripple-animation 0.6s linear; pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        .quiz-toggle .material-icons { font-size: 1.1rem; transition: transform 0.3s ease-in-out; }
        .quiz-toggle .icon-arrow.rotated { transform: rotate(180deg); }
        .quiz-answer {
            max-height: 0; opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, padding-top 0.5s ease-in-out, padding-bottom 0.5s ease-in-out, margin-top 0.5s ease-in-out;
            overflow: hidden; padding-top: 0; padding-bottom: 0; margin-top: 0;
            border: 1px solid var(--border-color-default); background-color: var(--bg-color-lighter);
            border-radius: 0.375rem; color: var(--text-color-default);
        }
        .quiz-answer.visible {
            max-height: 1000px; opacity: 1; padding-top: 1rem; padding-bottom: 1rem;
            margin-top: 1rem; overflow: auto;
        }
         /* Enhanced Quiz Option Styles */
        .quiz-option {
            /* Base from global.css */
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
        }
        .quiz-option:hover {
             background-color: var(--quiz-option-hover-bg, rgba(59, 130, 246, 0.05)); /* Lighter hover */
             border-color: var(--primary-color);
        }
        .quiz-option.selected {
            border-color: var(--primary-color-dark);
            background-color: var(--primary-color-light); /* More distinct selection */
            transform: scale(1.01); /* Subtle scale effect */
        }
        .quiz-option.correct {
             border-color: var(--success-color, #10b981);
             background-color: var(--success-color-light, #ecfdf5);
        }
        .quiz-option.incorrect {
             border-color: var(--danger-color, #ef4444);
             background-color: var(--danger-color-light, #fee2e2);
        }
         /* Ensure feedback text colors match background intentions */
        .quiz-feedback.correct { color: var(--success-color, #047857); }
        .quiz-feedback.incorrect { color: var(--danger-color, #b91c1c); }
        .quiz-feedback.warning { color: var(--warning-color, #c2410c); }


        /* --- SVG Diagram Styling --- */
        .svg-diagram {
            display: block;
            margin: 1.5rem auto;
            /* max-width: 100%; */ /* Let container handle width */
            width: 100%; /* Make SVG take full width of container */
            max-width: 450px; /* Optional: Set a max-width for larger screens */
            height: auto;
            background-color: var(--bg-color-light);
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid var(--border-color-light);
            overflow: visible; /* Ensure content isn't clipped if viewBox is tight */
        }
        .svg-diagram text {
            font-family: var(--font-family-sans);
            font-size: 12px;
            fill: var(--text-color-default);
        }
        .svg-diagram .label { font-weight: 500; }
        .svg-diagram .arrow { stroke: var(--text-color-light); stroke-width: 1.5; fill: var(--text-color-light); }
        .svg-diagram .box { fill: white; stroke: var(--border-color-default); stroke-width: 1; }
        .svg-diagram .box-nested { fill: #e0f2fe; /* Light blue */ stroke: #7dd3fc; /* Blue-300 */ }
        .svg-diagram .line { stroke: var(--text-color-light); stroke-width: 1.5; stroke-dasharray: 3,3; }


        /* --- Interactive Demo Styling --- */
        .interactive-demo {
            border: 1px dashed var(--border-color-default);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            background-color: var(--bg-color-light);
        }
        .interactive-demo label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color-dark);
        }
        .interactive-demo input[type="text"],
        .interactive-demo textarea {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color-default);
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            font-family: var(--font-family-sans);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }
        .interactive-demo input[type="text"]:focus,
        .interactive-demo textarea:focus {
             border-color: var(--primary-color);
             outline: none;
             box-shadow: 0 0 0 2px var(--focus-ring-color);
        }
        .interactive-demo .output-area {
            background-color: var(--bg-color-lighter);
            border: 1px solid var(--border-color-light);
            border-radius: 0.375rem;
            padding: 0.75rem;
            min-height: 50px;
            font-family: var(--font-family-mono);
            font-size: 0.875rem;
            color: var(--text-color-default);
            white-space: pre-wrap;
            word-wrap: break-word;
        }
         .interactive-demo .button-group {
             display: flex;
             flex-wrap: wrap;
             gap: 0.75rem; /* space-x-3 approx */
             margin-top: 1rem;
             margin-bottom: 0.5rem;
         }


    </style>

</head>

<body class="bg-gray-100"> <div class="page-container">

        <aside class="local-side-nav">
            <h4 class="head4">JS å…¶ä»–é«˜é¢‘è€ƒç‚¹</h4>
            <ul id="local-toc">
                <li><a href="#copy" class="active"><span class="material-icons nav-icon">content_copy</span>æ·±/æµ…æ‹·è´</a></li>
                <li><a href="#error-handling"><span class="material-icons nav-icon">error_outline</span>é”™è¯¯å¤„ç†</a></li>
                <li><a href="#json"><span class="material-icons nav-icon">data_object</span>JSON</a></li>
                <li><a href="#debounce-throttle"><span class="material-icons nav-icon">timer</span>é˜²æŠ–ä¸èŠ‚æµ</a></li>
            </ul>
            <a href="../../index.html" class="back-link"> &larr; è¿”å›å¤§çº²ç›®å½•
            </a>
        </aside>

        <main class="content-main space-y-8"> <article>
                <section id="intro" class="content-section fade-in-section" style="animation-delay: 0s;">
                    <h1 class="head1 flex items-center gap-2">
                        <span class="material-icons text-3xl text-blue-600">checklist</span>JavaScript å…¶ä»–é«˜é¢‘è€ƒç‚¹
                    </h1>
                    <p class="leading-relaxed">é™¤äº†æ ¸å¿ƒæ¦‚å¿µå¤–ï¼ŒJavaScript ä¸­è¿˜æœ‰ä¸€äº›åœ¨é¢è¯•å’Œå®é™…å¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„é‡è¦çŸ¥è¯†ç‚¹ã€‚æœ¬èŠ‚å°†é‡ç‚¹ä»‹ç»æ·±æ‹·è´ä¸æµ…æ‹·è´ã€é”™è¯¯å¤„ç†æœºåˆ¶ã€JSON çš„ä½¿ç”¨ä»¥åŠæ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸­çš„é˜²æŠ–å’ŒèŠ‚æµã€‚</p>
                     <p class="mt-6 bg-blue-50 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md text-sm">ğŸ’¡
                        <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬ã€‚ç†è§£è¿™äº›æ¦‚å¿µå¯¹äºç¼–å†™å¥å£®ã€é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ã€‚
                    </p>
                </section>

                <section id="copy" class="content-section fade-in-section" style="animation-delay: 0.05s;">
                    <h2 class="flex items-center head2"><span class="material-icons">content_copy</span>æ·±æ‹·è´ä¸æµ…æ‹·è´</h2>
                    <p class="mb-8 leading-relaxed">åœ¨ JavaScript ä¸­å¤åˆ¶å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œç†è§£æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå…³ç³»åˆ°åŸå§‹æ•°æ®å’Œå‰¯æœ¬ä¹‹é—´çš„å…³è”æ€§ã€‚</p>

                    <div class="content-card mb-8"> <h3 class="head3"><span class="material-icons">science</span>æ¦‚å¿µ</h3>
                        <ul class="space-y-3"> <li><strong>æµ…æ‹·è´ (Shallow Copy):</strong> åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡/æ•°ç»„ï¼Œç„¶åå°†åŸå§‹å¯¹è±¡/æ•°ç»„çš„<strong class="text-red-600">ç¬¬ä¸€å±‚</strong>å±æ€§/å…ƒç´ å¤åˆ¶è¿‡å»ã€‚å¦‚æœå±æ€§å€¼æ˜¯<strong class="text-blue-600">åŸå§‹ç±»å‹</strong>ï¼Œåˆ™å¤åˆ¶å€¼ï¼›å¦‚æœæ˜¯<strong class="text-green-600">å¼•ç”¨ç±»å‹</strong>ï¼Œåˆ™å¤åˆ¶<strong class="text-red-600">å†…å­˜åœ°å€å¼•ç”¨</strong>ã€‚è¿™æ„å‘³ç€å‰¯æœ¬å’ŒåŸå§‹å¯¹è±¡<strong class="text-red-600">å…±äº«å†…éƒ¨</strong>çš„å¼•ç”¨ç±»å‹æ•°æ®ã€‚</li>
                            <li><strong>æ·±æ‹·è´ (Deep Copy):</strong> åˆ›å»ºä¸€ä¸ª<strong class="text-red-600">å®Œå…¨ç‹¬ç«‹</strong>çš„æ–°å¯¹è±¡/æ•°ç»„ï¼Œ<strong class="text-red-600">é€’å½’</strong>å¤åˆ¶åŸå§‹å¯¹è±¡/æ•°ç»„çš„æ‰€æœ‰å±‚çº§ã€‚æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬åµŒå¥—çš„å¼•ç”¨ç±»å‹ï¼‰éƒ½æ˜¯<strong class="text-red-600">æ–°çš„å‰¯æœ¬</strong>ï¼Œä¿®æ”¹å‰¯æœ¬<strong class="text-red-600">ä¸ä¼šå½±å“</strong>åŸå§‹å¯¹è±¡ã€‚</li>
                        </ul>
                    </div>

                     <svg class="svg-diagram" viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"> <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280"/>
                            </marker>
                        </defs>

                        <text x="100" y="20" text-anchor="middle" class="label">æµ…æ‹·è´ (Shallow Copy)</text>
                        <rect x="20" y="40" width="80" height="50" class="box"/>
                        <text x="60" y="65" text-anchor="middle">Original</text>
                        <rect x="20" y="100" width="80" height="50" class="box box-nested"/>
                        <text x="60" y="125" text-anchor="middle">Nested Obj</text>
                        <line x1="60" y1="90" x2="60" y2="100" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowhead)"/>

                        <rect x="140" y="40" width="80" height="50" class="box"/>
                        <text x="180" y="65" text-anchor="middle">Shallow Copy</text>
                        <line x1="180" y1="90" x2="60" y2="100" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                        <text x="120" y="110" fill="#ef4444" font-size="10" font-weight="bold">å…±äº«å¼•ç”¨!</text>


                        <text x="300" y="20" text-anchor="middle" class="label">æ·±æ‹·è´ (Deep Copy)</text>
                        <rect x="220" y="40" width="80" height="50" class="box"/>
                        <text x="260" y="65" text-anchor="middle">Original</text>
                        <rect x="220" y="100" width="80" height="50" class="box box-nested"/>
                        <text x="260" y="125" text-anchor="middle">Nested Obj A</text>
                         <line x1="260" y1="90" x2="260" y2="100" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowhead)"/>

                        <rect x="340" y="40" width="80" height="50" class="box"/>
                        <text x="380" y="65" text-anchor="middle">Deep Copy</text>
                        <rect x="340" y="100" width="80" height="50" class="box box-nested"/>
                        <text x="380" y="125" text-anchor="middle">Nested Obj B</text>
                        <line x1="380" y1="90" x2="380" y2="100" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                         <text x="320" y="110" fill="#10b981" font-size="10" font-weight="bold">å®Œå…¨ç‹¬ç«‹</text>
                    </svg>


                    <div class="content-card mb-8"> <h3 class="head3"><span class="material-icons">difference</span>åŒºåˆ«</h3>
                        <p class="mb-4">ä¸»è¦åŒºåˆ«åœ¨äºå¦‚ä½•å¤„ç†<strong class="text-red-600">åµŒå¥—çš„å¼•ç”¨ç±»å‹</strong>ï¼š</p>
                        <ul class="space-y-2">
                            <li>æµ…æ‹·è´åªå¤åˆ¶ç¬¬ä¸€å±‚ï¼ŒåµŒå¥—çš„å¼•ç”¨ç±»å‹å…±äº«å†…å­˜åœ°å€ã€‚</li>
                            <li>æ·±æ‹·è´é€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯ç‹¬ç«‹çš„å‰¯æœ¬ã€‚</li>
                        </ul>
                         <pre><code class="language-javascript">// æµ…æ‹·è´ç¤ºä¾‹
const originalShallow = { a: 1, b: { c: 2 } };
const shallowCopy = { ...originalShallow }; // ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦è¿›è¡Œæµ…æ‹·è´
// å…³é”®ç‚¹: shallowCopy.b ä»ç„¶å¼•ç”¨ originalShallow.b æŒ‡å‘çš„å¯¹è±¡

shallowCopy.a = 10;
shallowCopy.b.c = 20; // ä¿®æ”¹åµŒå¥—å¯¹è±¡çš„å±æ€§

console.log('åŸå§‹æµ…æ‹·è´:', originalShallow); // { a: 1, b: { c: 20 } } <-- b.c è¢«æ”¹å˜

// æ·±æ‹·è´ç¤ºä¾‹ (ä½¿ç”¨ JSON æ–¹æ³•ï¼Œæœ‰å±€é™æ€§)
const originalDeep = { a: 1, b: { c: 2 } };
const deepCopy = JSON.parse(JSON.stringify(originalDeep));

deepCopy.a = 10;
deepCopy.b.c = 20; // ä¿®æ”¹åµŒå¥—å¯¹è±¡çš„å±æ€§

console.log('åŸå§‹æ·±æ‹·è´:', originalDeep); // { a: 1, b: { c: 2 } } <-- æœªè¢«æ”¹å˜</code></pre>
                    </div>

                    <div class="content-card mb-8"> <h3 class="head3"><span class="material-icons">code</span>å®ç°</h3>
                        <p class="mb-4"><strong>æµ…æ‹·è´å¸¸è§æ–¹æ³•:</strong></p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li><code>Object.assign({}, obj)</code></li>
                            <li>å±•å¼€è¿ç®—ç¬¦: <code>{ ...obj }</code> æˆ– <code>[ ...arr ]</code></li>
                            <li>æ•°ç»„æ–¹æ³•: <code>arr.slice()</code>, <code>arr.concat()</code>, <code>Array.from(arr)</code></li>
                        </ul>
                        <p class="mt-6 mb-4"><strong>æ·±æ‹·è´å¸¸è§æ–¹æ³•:</strong></p>
                        <ul class="list-disc list-inside space-y-3 ml-4">
                            <li><strong><code>JSON.parse(JSON.stringify(obj))</code>:</strong>
                                <ul class="list-circle list-inside space-y-1 ml-6 mt-1 text-sm text-gray-600">
                                    <li>ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ã€‚</li>
                                    <li>ç¼ºç‚¹ï¼šæ— æ³•å¤„ç†å‡½æ•°ã€<code>undefined</code>ã€<code>Symbol</code>ã€<code>Date</code> (å˜å­—ç¬¦ä¸²)ã€å¾ªç¯å¼•ç”¨ (æŠ¥é”™) ç­‰ã€‚</li>
                                </ul>
                            </li>
                            <li><strong>é€’å½’å‡½æ•°:</strong> æ‰‹åŠ¨ç¼–å†™é€’å½’é€»è¾‘ï¼Œæœ€çµæ´»ä½†å¤æ‚ã€‚</li>
                            <li><strong>ç¬¬ä¸‰æ–¹åº“:</strong> å¦‚ Lodash çš„ <code>_.cloneDeep()</code>ï¼ŒåŠŸèƒ½å®Œå–„ï¼Œæ¨èåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</li>
                        </ul>
                         <pre><code class="language-javascript">// Lodash ç¤ºä¾‹ (éœ€å¼•å…¥åº“)
// import _ from 'lodash'; // or const _ = require('lodash');
// const deepCopyLodash = _.cloneDeep(originalObject);</code></pre>
                    </div>

                     <div class="interactive-demo">
                        <h4 class="head4 mb-4 text-lg font-medium">äº¤äº’å¼æ‹·è´ç¤ºä¾‹</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="originalObjectDisplay">åŸå§‹å¯¹è±¡:</label>
                                <pre id="originalObjectDisplay" class="output-area h-40 overflow-auto"></pre>
                            </div>
                            <div>
                                <label for="copiedObjectDisplay">æ‹·è´åçš„å¯¹è±¡:</label>
                                <pre id="copiedObjectDisplay" class="output-area h-40 overflow-auto"></pre>
                            </div>
                        </div>
                        <div class="button-group">
                            <button id="shallowCopyBtn" class="button button-secondary">æµ…æ‹·è´ (...)</button>
                            <button id="deepCopyJsonBtn" class="button button-secondary">æ·±æ‹·è´ (JSON)</button>
                            <button id="modifyCopyBtn" class="button button-primary" disabled>ä¿®æ”¹æ‹·è´å¯¹è±¡ (b.c = 99)</button>
                            <button id="resetCopyBtn" class="button button-danger">é‡ç½®</button>
                        </div>
                        <div id="copyStatus" class="text-sm text-gray-600 mt-2">ç‚¹å‡»æŒ‰é’®è¿›è¡Œæ‹·è´æ“ä½œã€‚</div>
                    </div>


                     <div class="quiz-card mt-8" id="quiz-copy"> <div class="quiz-question"><span class="material-icons mr-1">quiz</span>æµ‹éªŒï¼š<code>JSON.parse(JSON.stringify(obj))</code> è¿›è¡Œæ·±æ‹·è´æ—¶ï¼Œæ— æ³•æ­£ç¡®å¤„ç†å“ªäº›ç±»å‹çš„æ•°æ®ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="a"><span>å‡½æ•° (Function)</span></label>
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="b"><span>Undefined</span></label>
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="c"><span>Symbol</span></label>
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="d"><span>Date å¯¹è±¡ (ä¼šå˜å­—ç¬¦ä¸²)</span></label>
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="e"><span>å¾ªç¯å¼•ç”¨ (ä¼šæŠ¥é”™)</span></label>
                            <label class="quiz-option"><input type="checkbox" name="q_copy" value="f"><span>æ•°å­— (Number)</span></label>
                        </div>
                        <div class="quiz-feedback mt-4" id="feedback-q_copy"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_copy', ['a', 'b', 'c', 'd', 'e'], true)">
                             <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer" style="display: none;">
                            <p><strong>ç­”æ¡ˆ:</strong> A, B, C, D, E</p>
                            <p><strong>è§£æ:</strong> <code>JSON.stringify</code> ä¼šå¿½ç•¥å‡½æ•°ã€<code>undefined</code> å’Œ <code>Symbol</code> ç±»å‹çš„å±æ€§ï¼Œä¼šå°† <code>Date</code> å¯¹è±¡è½¬æ¢ä¸º ISO æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ï¼ˆä¼šæŠ›å‡º TypeErrorï¼‰ã€‚æ•°å­— (Number) ç±»å‹å¯ä»¥è¢«æ­£ç¡®å¤„ç†ã€‚</p>
                        </div>
                    </div>
                </section>

                <section id="error-handling" class="content-section fade-in-section" style="animation-delay: 0.1s;">
                    <h2 class="flex items-center head2"><span class="material-icons">error_outline</span>é”™è¯¯å¤„ç† (try...catch...finally)</h2>
                    <div class="content-card space-y-4"> <h3 class="head3"><span class="material-icons">construction</span>åŸºæœ¬ç»“æ„</h3>
                        <p>JavaScript ä½¿ç”¨ <code>try...catch...finally</code> è¯­å¥æ¥å¤„ç†ä»£ç æ‰§è¡ŒæœŸé—´å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼ˆå¼‚å¸¸ï¼‰ã€‚</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li><strong><code>try</code> å—:</strong> åŒ…å«å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚</li>
                            <li><strong><code>catch (error)</code> å—:</strong> å¦‚æœ <code>try</code> å—ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™æ‰§è¡Œæ­¤å—ã€‚<code>error</code> å¯¹è±¡åŒ…å«é”™è¯¯ä¿¡æ¯ (å¦‚ <code>error.message</code>, <code>error.stack</code>)ã€‚</li>
                            <li><strong><code>finally</code> å— (å¯é€‰):</strong> æ— è®ºæ˜¯å¦å‘ç”Ÿé”™è¯¯ï¼Œ<strong class="text-red-600">æ€»æ˜¯</strong>ä¼šæ‰§è¡Œæ­¤å—ä¸­çš„ä»£ç ï¼Œé€šå¸¸ç”¨äº<strong class="text-blue-600">æ¸…ç†æ“ä½œ</strong>ï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€æ–­å¼€è¿æ¥ï¼‰ã€‚</li>
                        </ul>
                        <pre><code class="language-javascript">function divide(a, b) {
  console.log(`\nAttempting to divide ${a} by ${b}...`);
  try {
    if (b === 0) {
      // ä¸»åŠ¨æŠ›å‡ºé”™è¯¯ï¼Œå¯ä»¥è‡ªå®šä¹‰é”™è¯¯ç±»å‹
      throw new Error("Division by zero is not allowed.");
    }
    if (typeof a !== 'number' || typeof b !== 'number') {
        throw new TypeError("Both arguments must be numbers.");
    }
    let result = a / b;
    console.log("âœ… Result:", result);
    return result; // å¦‚æœæˆåŠŸï¼Œåœ¨è¿™é‡Œè¿”å›
  } catch (error) {
    // æ ¹æ®é”™è¯¯ç±»å‹è¿›è¡Œä¸åŒå¤„ç†
    if (error instanceof TypeError) {
         console.error("âŒ Type Error:", error.message);
    } else {
         console.error("âŒ Runtime Error:", error.message);
    }
    // console.error("Stack trace:", error.stack); // å¯ä»¥è®°å½•æ›´è¯¦ç»†çš„å †æ ˆä¿¡æ¯
    return null; // æˆ–è€…è¿”å›ä¸€ä¸ªè¡¨ç¤ºå¤±è´¥çš„å€¼
  } finally {
    // æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä¼šæ‰§è¡Œ
    console.log("ğŸ”š Division attempt finished.");
  }
}

divide(10, 2);
divide(10, 0);
divide("10", 2);
divide(5, 1);</code></pre>
                        <p class="mt-4">âœ¨ <strong>é¢è¯•è€ƒç‚¹ï¼š</strong> ç†è§£ <code>try</code>, <code>catch</code>, <code>finally</code> å„è‡ªçš„ä½œç”¨å’Œæ‰§è¡Œæ—¶æœºã€‚çŸ¥é“å¯ä»¥ä¸»åŠ¨ä½¿ç”¨ <code>throw</code> æŠ›å‡ºé”™è¯¯ï¼Œä»¥åŠ <code>error</code> å¯¹è±¡åŒ…å«å“ªäº›ä¿¡æ¯ã€‚</p>
                    </div>
                </section>

                <section id="json" class="content-section fade-in-section" style="animation-delay: 0.15s;">
                    <h2 class="flex items-center head2"><span class="material-icons">data_object</span>JSON (JavaScript Object Notation)</h2>
                    <div class="content-card space-y-4"> <h3 class="head3"><span class="material-icons">swap_horiz</span>è½¬æ¢æ–¹æ³•</h3>
                        <p>JSON æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼ŒåŸºäº JavaScript å¯¹è±¡å­—é¢é‡è¯­æ³•çš„ä¸€ä¸ªå­é›†ï¼Œä½†æœ‰æ›´ä¸¥æ ¼çš„è§„åˆ™ï¼ˆå¦‚é”®å¿…é¡»æ˜¯åŒå¼•å·å­—ç¬¦ä¸²ï¼‰ã€‚</p>
                        <ul class="list-disc list-inside ml-4 space-y-2">
                            <li><strong><code>JSON.stringify(value[, replacer[, space]])</code>:</strong>
                                <p>å°† JavaScript å€¼ï¼ˆé€šå¸¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼‰è½¬æ¢ä¸º JSON <strong class="text-red-600">å­—ç¬¦ä¸²</strong>ã€‚</p>
                                <ul class="list-circle list-inside ml-6 text-sm text-gray-600 space-y-1">
                                    <li><code>replacer</code>: å‡½æ•°æˆ–æ•°ç»„ï¼Œç”¨äºè¿‡æ»¤æˆ–è½¬æ¢å±æ€§ã€‚</li>
                                    <li><code>space</code>: æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼ˆç¼©è¿›ï¼‰ã€‚</li>
                                    <li>å¸¸ç”¨äºå‘é€æ•°æ®åˆ°æœåŠ¡å™¨æˆ–å­˜å‚¨åœ¨ `localStorage`ã€‚</li>
                                    <li><strong class="text-red-500">æ³¨æ„å±€é™æ€§:</strong> å¿½ç•¥å‡½æ•°ã€<code>undefined</code>ã€<code>Symbol</code>ï¼›<code>Date</code> è½¬å­—ç¬¦ä¸²ï¼›æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ã€‚</li>
                                </ul>
                            </li>
                            <li><strong><code>JSON.parse(text[, reviver])</code>:</strong>
                                <p>å°† JSON <strong class="text-red-600">å­—ç¬¦ä¸²</strong>è§£æä¸ºç›¸åº”çš„ JavaScript å€¼ã€‚</p>
                                 <ul class="list-circle list-inside ml-6 text-sm text-gray-600 space-y-1">
                                     <li><code>reviver</code>: å‡½æ•°ï¼Œç”¨äºåœ¨è§£æè¿‡ç¨‹ä¸­è½¬æ¢é”®å€¼å¯¹ã€‚</li>
                                     <li>å¸¸ç”¨äºå¤„ç†ä»æœåŠ¡å™¨æ¥æ”¶çš„æ•°æ®ã€‚</li>
                                     <li><strong class="text-red-500">æ³¨æ„:</strong> è‹¥å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆ JSONï¼Œä¼šæŠ›å‡º <code>SyntaxError</code>ï¼Œå»ºè®®åœ¨ <code>try...catch</code> ä¸­ä½¿ç”¨ã€‚</li>
                                 </ul>
                            </li>
                        </ul>
                        <pre><code class="language-javascript">const user = {
  id: 123,
  name: "Alice",
  isAdmin: false,
  courses: ["Math", "Physics"],
  registerDate: new Date(), // Date object
  secret: undefined,       // Will be ignored
  toJSON: () => ({ id: user.id, name: user.name }) // Custom serialization
};

// è½¬æ¢ä¸º JSON å­—ç¬¦ä¸² (ä½¿ç”¨ toJSON å’Œ space)
const jsonString = JSON.stringify(user, null, 2); // ä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›
console.log("JSON String (using toJSON):\n", jsonString);
/* Output:
{
  "id": 123,
  "name": "Alice"
}
*/

// è½¬æ¢ä¸º JSON å­—ç¬¦ä¸² (ä¸ä½¿ç”¨ toJSON, æ¼”ç¤º Date è½¬æ¢)
const fullJsonString = JSON.stringify({ ...user, toJSON: undefined }, null, 2);
console.log("\nFull JSON String (Date becomes string):\n", fullJsonString);
/* Output (Date string format may vary slightly):
{
  "id": 123,
  "name": "Alice",
  "isAdmin": false,
  "courses": [
    "Math",
    "Physics"
  ],
  "registerDate": "2025-04-24T23:17:00.000Z" // Example Date string
}
*/


// ä» JSON å­—ç¬¦ä¸²è§£æå›å¯¹è±¡ (å¸¦ reviver è½¬æ¢æ—¥æœŸ)
const dataFromServer = `{"id": 456, "name": "Bob", "lastLogin": "2025-04-23T10:00:00.000Z"}`;
try {
  const parsedUser = JSON.parse(dataFromServer, (key, value) => {
    // å¦‚æœ key æ˜¯ 'lastLogin' å¹¶ä¸” value æ˜¯å­—ç¬¦ä¸², å°è¯•è½¬å› Date å¯¹è±¡
    if (key === 'lastLogin' && typeof value === 'string') {
      const date = new Date(value);
      // ç®€å•éªŒè¯æ˜¯å¦æ˜¯æœ‰æ•ˆæ—¥æœŸ
      return !isNaN(date.getTime()) ? date : value;
    }
    return value; // å…¶ä»–æƒ…å†µæ­£å¸¸è¿”å›
  });
  console.log("\nParsed User Object (with reviver):", parsedUser);
  console.log("Last Login Type:", Object.prototype.toString.call(parsedUser.lastLogin)); // "[object Date]"
} catch (error) {
  console.error("Failed to parse JSON:", error);
}</code></pre>
                        <p class="mt-4">âœ¨ <strong>é¢è¯•è€ƒç‚¹ï¼š</strong> æŒæ¡ <code>JSON.stringify</code> å’Œ <code>JSON.parse</code> çš„åŸºæœ¬ç”¨æ³•åŠå¯é€‰å‚æ•° (<code>replacer</code>, <code>space</code>, <code>reviver</code>)ã€‚ç†è§£ JSON æ ¼å¼çš„è§„åˆ™ï¼ˆé”®å¿…é¡»æ˜¯åŒå¼•å·å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚äº†è§£ <code>stringify</code> çš„å±€é™æ€§ã€‚</p>
                    </div>
                </section>

                <section id="debounce-throttle" class="content-section fade-in-section" style="animation-delay: 0.2s;">
                    <h2 class="flex items-center head2"><span class="material-icons">timer</span>é˜²æŠ– (Debounce) ä¸ èŠ‚æµ (Throttle)</h2>
                    <p class="mb-8 leading-relaxed">é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä¸¤ç§å¸¸ç”¨çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œæ ¸å¿ƒç›®æ ‡éƒ½æ˜¯<strong class="text-blue-600">å‡å°‘</strong>é«˜é¢‘è§¦å‘äº‹ä»¶ï¼ˆå¦‚ `resize`, `scroll`, `input`, `mousemove`ï¼‰çš„å›è°ƒå‡½æ•°çš„<strong class="text-blue-600">å®é™…æ‰§è¡Œæ¬¡æ•°</strong>ï¼Œä½†ç­–ç•¥ä¸åŒã€‚</p>

                     <svg class="svg-diagram" viewBox="0 0 450 220" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"> <defs>
                            <marker id="arrowhead-dt" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
                                <polygon points="0 0, 7 2.5, 0 5" fill="#6b7280"/>
                            </marker>
                        </defs>

                        <line x1="20" y1="180" x2="430" y2="180" stroke="#9ca3af" stroke-width="1" marker-end="url(#arrowhead-dt)"/>
                        <text x="435" y="185" font-size="10">Time</text>

                        <text x="20" y="20" class="label">é˜²æŠ– (Debounce) - åœæ­¢è§¦å‘åæ‰§è¡Œä¸€æ¬¡</text>
                        <text x="20" y="40" font-size="10">äº‹ä»¶è§¦å‘ (Input):</text>
                        <circle cx="50" cy="50" r="3" fill="#f97316"/>
                        <circle cx="70" cy="50" r="3" fill="#f97316"/>
                        <circle cx="90" cy="50" r="3" fill="#f97316"/>
                        <circle cx="150" cy="50" r="3" fill="#f97316"/>
                        <circle cx="170" cy="50" r="3" fill="#f97316"/>

                        <text x="20" y="70" font-size="10">å‡½æ•°æ‰§è¡Œ:</text>
                        <rect x="200" y="75" width="30" height="10" fill="#3b82f6" rx="2"/>
                        <line x1="170" y1="50" x2="215" y2="75" class="line"/>
                        <text x="215" y="95" font-size="10">Delayåæ‰§è¡Œ</text>

                        <text x="20" y="120" class="label">èŠ‚æµ (Throttle) - å›ºå®šé—´éš”æœ€å¤šæ‰§è¡Œä¸€æ¬¡</text>
                        <text x="20" y="140" font-size="10">äº‹ä»¶è§¦å‘ (Scroll):</text>
                        <circle cx="50" cy="150" r="3" fill="#f97316"/>
                        <circle cx="70" cy="150" r="3" fill="#f97316"/>
                        <circle cx="90" cy="150" r="3" fill="#f97316"/>
                        <circle cx="110" cy="150" r="3" fill="#f97316"/>
                        <circle cx="130" cy="150" r="3" fill="#f97316"/>
                        <circle cx="190" cy="150" r="3" fill="#f97316"/>
                        <circle cx="210" cy="150" r="3" fill="#f97316"/>

                        <text x="20" y="170" font-size="10">å‡½æ•°æ‰§è¡Œ:</text>
                        <rect x="50" y="175" width="30" height="10" fill="#10b981" rx="2"/>
                        <rect x="190" y="175" width="30" height="10" fill="#10b981" rx="2"/>
                        <line x1="50" y1="150" x2="65" y2="175" class="line"/>
                        <line x1="190" y1="150" x2="205" y2="175" class="line"/>
                        <text x="120" y="195" font-size="10">é—´éš”å†…åªæ‰§è¡Œä¸€æ¬¡</text>
                    </svg>


                    <div class="content-card mb-8"> <h3 class="head3"><span class="material-icons">history_toggle_off</span>é˜²æŠ– (Debounce)</h3>
                        <p><strong>æ¦‚å¿µï¼š</strong> åœ¨äº‹ä»¶è§¦å‘å<strong class="text-red-600">å»¶è¿Ÿ</strong> `n` ç§’æ‰§è¡Œå›è°ƒã€‚å¦‚æœåœ¨è¿™ `n` ç§’å†…äº‹ä»¶<strong class="text-red-600">å†æ¬¡</strong>è§¦å‘ï¼Œåˆ™<strong class="text-red-600">é‡æ–°è®¡æ—¶</strong>ã€‚åªæœ‰å½“äº‹ä»¶<strong class="text-blue-600">åœæ­¢è§¦å‘</strong>å¹¶ä¸”ç­‰å¾…äº† `n` ç§’åï¼Œå›è°ƒæ‰ä¼šæœ€ç»ˆæ‰§è¡Œ<strong class="text-red-600">ä¸€æ¬¡</strong>ã€‚</p>
                        <p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ç­‰å¾…ç”¨æˆ·æ“ä½œ<strong class="text-blue-600">ç¨³å®š</strong>ä¸‹æ¥åå†å“åº”ã€‚</p>
                        <p><strong>å¸¸è§åœºæ™¯ï¼š</strong></p>
                        <ul class="list-disc list-inside ml-4 text-sm text-gray-600">
                             <li>æœç´¢æ¡†è¾“å…¥å»ºè®® (åœæ­¢è¾“å…¥åæ‰å‘è¯·æ±‚)</li>
                             <li>çª—å£å¤§å°è°ƒæ•´ (`resize`) åçš„å¸ƒå±€é‡æ–°è®¡ç®— (åœæ­¢è°ƒæ•´åæ‰è®¡ç®—)</li>
                             <li>è¡¨å•éªŒè¯ (åœæ­¢è¾“å…¥åæ‰æ ¡éªŒ)</li>
                        </ul>
                        <pre><code class="language-javascript">// ç®€æ˜“é˜²æŠ–å®ç° (ç«‹å³æ‰§è¡Œç‰ˆå¯é€‰)
function debounce(func, delay, immediate = false) {
  let timeoutId;
  return function(...args) {
    const context = this;
    const later = function() {
      timeoutId = null;
      if (!immediate) func.apply(context, args);
    };
    const callNow = immediate && !timeoutId;
    clearTimeout(timeoutId);
    timeoutId = setTimeout(later, delay);
    if (callNow) func.apply(context, args);
  };
}</code></pre>
                    </div>

                    <div class="content-card mb-8"> <h3 class="head3"><span class="material-icons">speed</span>èŠ‚æµ (Throttle)</h3>
                        <p><strong>æ¦‚å¿µï¼š</strong> åœ¨<strong class="text-red-600">å›ºå®šæ—¶é—´é—´éš”</strong> `n` ç§’å†…ï¼Œå›è°ƒå‡½æ•°<strong class="text-red-600">æœ€å¤šåªæ‰§è¡Œä¸€æ¬¡</strong>ã€‚æ— è®ºäº‹ä»¶è§¦å‘å¤šä¹ˆé¢‘ç¹ï¼Œéƒ½ä¼šä»¥<strong class="text-blue-600">å›ºå®šçš„é¢‘ç‡</strong>æ‰§è¡Œã€‚</p>
                         <p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> <strong class="text-blue-600">ç¨€é‡Š</strong>é«˜é¢‘äº‹ä»¶çš„å“åº”é¢‘ç‡ã€‚</p>
                         <p><strong>å¸¸è§åœºæ™¯ï¼š</strong></p>
                         <ul class="list-disc list-inside ml-4 text-sm text-gray-600">
                              <li>é¡µé¢æ»šåŠ¨äº‹ä»¶ (`scroll`) ç›‘å¬ (å¦‚æ‡’åŠ è½½ã€æ»šåŠ¨åŠ¨ç”»)</li>
                              <li>æ‹–æ‹½ (`mousemove`) æ—¶çš„ä½ç½®æ›´æ–°</li>
                              <li>æ¸¸æˆä¸­çš„å°„å‡»é¢‘ç‡æ§åˆ¶</li>
                         </ul>
                        <pre><code class="language-javascript">// ç®€æ˜“èŠ‚æµå®ç° (æ—¶é—´æˆ³ + å®šæ—¶å™¨ ç»“åˆç‰ˆ)
function throttle(func, delay) {
  let timeoutId = null;
  let lastExecTime = 0;
  return function(...args) {
    const context = this;
    const now = Date.now();
    const remaining = delay - (now - lastExecTime);

    clearTimeout(timeoutId); // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„å°¾éƒ¨è°ƒç”¨å®šæ—¶å™¨

    if (remaining <= 0 || remaining > delay) { // ç«‹å³æ‰§è¡Œçš„æƒ…å†µ
      lastExecTime = now;
      func.apply(context, args);
    } else { // å»¶è¿Ÿåˆ°æ—¶é—´é—´éš”ç»“æŸæ—¶æ‰§è¡Œ (å°¾éƒ¨è°ƒç”¨)
      timeoutId = setTimeout(() => {
        lastExecTime = Date.now();
        timeoutId = null;
        func.apply(context, args);
      }, remaining);
    }
  };
}</code></pre>
                    </div>

                     <div class="interactive-demo">
                        <h4 class="head4 mb-4 text-lg font-medium">äº¤äº’å¼é˜²æŠ–/èŠ‚æµç¤ºä¾‹ (å»¶è¿Ÿ 500ms)</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="debounceInput">é˜²æŠ–è¾“å…¥æ¡†:</label>
                                <input type="text" id="debounceInput" placeholder="å¿«é€Ÿè¾“å…¥ï¼Œåœæ­¢åçœ‹æ•ˆæœ">
                                <label for="debounceOutput" class="mt-2">é˜²æŠ–è¾“å‡º (å‡½æ•°æ‰§è¡Œæ—¥å¿—):</label>
                                <div id="debounceOutput" class="output-area h-24 overflow-auto"></div>
                            </div>
                             <div>
                                <label for="throttleInput">èŠ‚æµè¾“å…¥æ¡†:</label>
                                <input type="text" id="throttleInput" placeholder="å¿«é€Ÿè¾“å…¥ï¼Œçœ‹å›ºå®šé¢‘ç‡æ•ˆæœ">
                                <label for="throttleOutput" class="mt-2">èŠ‚æµè¾“å‡º (å‡½æ•°æ‰§è¡Œæ—¥å¿—):</label>
                                <div id="throttleOutput" class="output-area h-24 overflow-auto"></div>
                            </div>
                        </div>
                    </div>


                    <div class="quiz-card mt-8" id="quiz-debounce-throttle"> <div class="quiz-question"><span class="material-icons mr-1">quiz</span>æµ‹éªŒï¼šå¦‚æœç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­å¿«é€Ÿè¿ç»­è¾“å…¥ï¼Œå“ªä¸ªæŠ€æœ¯æ›´é€‚åˆç”¨äºè§¦å‘æœç´¢å»ºè®®çš„ API è¯·æ±‚ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_dt" value="a"><span>é˜²æŠ– (Debounce)</span></label>
                            <label class="quiz-option"><input type="radio" name="q_dt" value="b"><span>èŠ‚æµ (Throttle)</span></label>
                        </div>
                        <div class="quiz-feedback mt-4" id="feedback-q_dt"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_dt', 'a')">
                             <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer" style="display: none;">
                            <p><strong>ç­”æ¡ˆ:</strong> A. é˜²æŠ– (Debounce)</p>
                            <p><strong>è§£æ:</strong> å¯¹äºæœç´¢å»ºè®®ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›åœ¨ç”¨æˆ·<strong class="text-blue-600">åœæ­¢è¾“å…¥</strong>ä¸€å°æ®µæ—¶é—´åæ‰å‘é€è¯·æ±‚ï¼Œä»¥é¿å…åœ¨ç”¨æˆ·å¿«é€Ÿæ‰“å­—è¿‡ç¨‹ä¸­é¢‘ç¹å‘é€æ— æ•ˆè¯·æ±‚ã€‚é˜²æŠ–çš„ç‰¹æ€§ï¼ˆåœæ­¢è§¦å‘åæ‰æ‰§è¡Œä¸€æ¬¡ï¼‰æ­£å¥½ç¬¦åˆè¿™ä¸ªéœ€æ±‚ã€‚èŠ‚æµï¼ˆå›ºå®šé¢‘ç‡æ‰§è¡Œï¼‰å¯èƒ½ä¼šåœ¨ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­å°±å‘é€è¯·æ±‚ã€‚</p>
                        </div>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        // --- Utility Functions (Debounce, Throttle) ---
        function debounce(func, delay, immediate = false) {
          let timeoutId;
          return function(...args) {
            const context = this;
            const later = function() {
              timeoutId = null;
              if (!immediate) func.apply(context, args);
            };
            const callNow = immediate && !timeoutId;
            clearTimeout(timeoutId);
            timeoutId = setTimeout(later, delay);
            if (callNow) func.apply(context, args);
          };
        }

        function throttle(func, delay) {
          let timeoutId = null;
          let lastExecTime = 0;
          return function(...args) {
            const context = this;
            const now = Date.now();
            // Calculate remaining time until next execution is allowed
            // If lastExecTime is 0, remaining will be negative, allowing immediate execution
            const remaining = delay - (now - lastExecTime);

            clearTimeout(timeoutId); // Clear any pending timeout for the trailing edge call

            if (remaining <= 0 || remaining > delay) { // Allow execution if delay has passed or it's the first call
              lastExecTime = now;
              func.apply(context, args);
            } else { // Schedule the trailing edge call if needed
              timeoutId = setTimeout(() => {
                lastExecTime = Date.now();
                timeoutId = null;
                func.apply(context, args);
              }, remaining);
            }
          };
        }


        // --- Ripple Effect Logic ---
        function createRipple(event) {
            const button = event.currentTarget;
            if (!button || typeof button.getBoundingClientRect !== 'function') return;
            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            const primaryColorRgb = getComputedStyle(document.documentElement).getPropertyValue('--primary-color-rgb') || '59, 130, 246';
            circle.style.width = circle.style.height = `${diameter}px`;
            const rect = button.getBoundingClientRect();
            circle.style.left = `${event.clientX - rect.left - radius}px`;
            circle.style.top = `${event.clientY - rect.top - radius}px`;
            circle.style.backgroundColor = `rgba(${primaryColorRgb}, 0.4)`;
            circle.classList.add("ripple");
            const existingRipple = button.querySelector(".ripple");
            if (existingRipple) existingRipple.remove();
            button.appendChild(circle);
            setTimeout(() => circle.remove(), 600);
        }

        // --- Quiz Toggle Logic ---
        function toggleAnswer(quizId, buttonElement) {
            const quizCard = document.getElementById(quizId);
            if (!quizCard) return;
            const answer = quizCard.querySelector('.quiz-answer');
            const icon = buttonElement.querySelector('.icon-arrow');
            const buttonTextSpan = buttonElement.querySelector('.button-text');
            if (!answer || !icon || !buttonTextSpan) return;
            const isVisible = answer.classList.contains('visible');
            if (isVisible) {
                answer.style.maxHeight = '0';
                answer.style.opacity = '0';
                answer.style.marginTop = '0';
                answer.style.paddingTop = '0';
                answer.style.paddingBottom = '0';
                answer.classList.remove('visible');
                icon.classList.remove('rotated');
                buttonTextSpan.textContent = ' æŸ¥çœ‹ç­”æ¡ˆ';
                setTimeout(() => { if (!answer.classList.contains('visible')) { answer.style.display = 'none'; } }, 500);
            } else {
                answer.style.display = 'block';
                answer.style.paddingTop = '1rem';
                answer.style.paddingBottom = '1rem';
                answer.style.marginTop = '1rem';
                requestAnimationFrame(() => {
                    answer.style.maxHeight = answer.scrollHeight + 'px';
                    answer.style.opacity = '1';
                    answer.classList.add('visible');
                    icon.classList.add('rotated');
                    buttonTextSpan.textContent = ' éšè—ç­”æ¡ˆ';
                });
            }
        }

       // --- Quiz Check Answer Logic ---
        function checkAnswer(questionName, correctAnswerValue, isCheckbox = false) {
            const options = document.querySelectorAll(`input[name="${questionName}"]`);
            const feedbackElement = document.getElementById(`feedback-${questionName}`);
            const quizCard = feedbackElement ? feedbackElement.closest('.quiz-card') : null;
            let selectedValues = [];
            let correctValuesArray = Array.isArray(correctAnswerValue) ? correctAnswerValue : [correctAnswerValue];
            if (!feedbackElement || !quizCard) return;
            quizCard.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            feedbackElement.style.display = 'none';
            options.forEach(option => {
                if (option.checked) {
                    selectedValues.push(option.value);
                    const selectedLabel = option.closest('.quiz-option');
                    if (selectedLabel) selectedLabel.classList.add('selected');
                }
            });
            if (selectedValues.length === 0) {
                feedbackElement.textContent = "è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªé€‰é¡¹ï¼";
                feedbackElement.className = 'quiz-feedback warning';
                feedbackElement.style.display = 'block';
                return;
            }
            let isCorrect = false;
            if (isCheckbox) {
                isCorrect = selectedValues.length === correctValuesArray.length && selectedValues.every(val => correctValuesArray.includes(val));
            } else {
                isCorrect = selectedValues.length === 1 && selectedValues[0] === correctAnswerValue;
            }
            if (isCorrect) {
                feedbackElement.textContent = "å›ç­”æ­£ç¡®ï¼";
                feedbackElement.className = 'quiz-feedback correct';
                quizCard.querySelectorAll('.quiz-option.selected').forEach(opt => opt.classList.add('correct'));
            } else {
                feedbackElement.textContent = "å›ç­”é”™è¯¯ã€‚";
                 feedbackElement.className = 'quiz-feedback incorrect';
                options.forEach(opt => {
                     const label = opt.closest('.quiz-option');
                     if (!label) return;
                     if (correctValuesArray.includes(opt.value)) { label.classList.add('correct'); }
                     if (opt.checked && !correctValuesArray.includes(opt.value)) { label.classList.add('incorrect'); }
                });
            }
            feedbackElement.style.display = 'block';
            const answerSection = quizCard.querySelector('.quiz-answer');
            const toggleButton = quizCard.querySelector('.quiz-toggle');
            if (answerSection && toggleButton && !answerSection.classList.contains('visible')) {
                 toggleAnswer(quizCard.id, toggleButton);
            }
        }

        // --- Deep/Shallow Copy Interactive Demo Logic ---
        function setupCopyDemo() {
            const originalDisplay = document.getElementById('originalObjectDisplay');
            const copiedDisplay = document.getElementById('copiedObjectDisplay');
            const shallowCopyBtn = document.getElementById('shallowCopyBtn');
            const deepCopyJsonBtn = document.getElementById('deepCopyJsonBtn');
            const modifyCopyBtn = document.getElementById('modifyCopyBtn');
            const resetCopyBtn = document.getElementById('resetCopyBtn');
            const copyStatus = document.getElementById('copyStatus');

            let originalObject = {};
            let copiedObject = null;
            let currentCopyType = ''; // To track which copy was made

            // Utility to safely stringify (handles potential circular refs if we add other deep copy methods)
            function safeStringify(obj) {
                try {
                    return JSON.stringify(obj, (key, value) => {
                        // Handle Date objects specifically for display
                        if (value instanceof Date) {
                            return `Date(${value.toISOString()})`; // Indicate it's a Date
                        }
                        return value;
                    }, 2);
                } catch (e) {
                    return `// Error stringifying: ${e.message}`;
                }
            }


            function resetState() {
                // Resetting the object structure
                originalObject = {
                    a: 1,
                    b: { c: 2, d: ['x', 'y'] },
                    date: new Date() // Include date for JSON copy demo
                };
                copiedObject = null;
                currentCopyType = '';
                originalDisplay.textContent = safeStringify(originalObject);
                copiedDisplay.textContent = '// ç‚¹å‡»æŒ‰é’®è¿›è¡Œæ‹·è´';
                modifyCopyBtn.disabled = true;
                copyStatus.textContent = 'çŠ¶æ€å·²é‡ç½®ã€‚ç‚¹å‡»æŒ‰é’®è¿›è¡Œæ‹·è´æ“ä½œã€‚';
            }

            shallowCopyBtn.addEventListener('click', () => {
                // Correct Shallow Copy: Only copy top-level properties. Nested objects/arrays are referenced.
                copiedObject = { ...originalObject };
                // DO NOT do copiedObject.b = { ...originalObject.b }; that's a nested shallow copy
                // DO NOT do copiedObject.b.d = [...originalObject.b.d];

                currentCopyType = 'shallow';
                copiedDisplay.textContent = safeStringify(copiedObject);
                modifyCopyBtn.disabled = false;
                copyStatus.textContent = 'å·²æ‰§è¡Œæµ…æ‹·è´ (ä½¿ç”¨ ...)ã€‚åµŒå¥—å¯¹è±¡ b å’Œæ•°ç»„ d æ˜¯å…±äº«å¼•ç”¨ã€‚è¯·å°è¯•ä¿®æ”¹æ‹·è´å¯¹è±¡ã€‚';
            });

            deepCopyJsonBtn.addEventListener('click', () => {
                 try {
                    copiedObject = JSON.parse(JSON.stringify(originalObject));
                    currentCopyType = 'deep-json';
                    copiedDisplay.textContent = safeStringify(copiedObject); // Use safeStringify here too
                    modifyCopyBtn.disabled = false;
                    copyStatus.textContent = 'å·²æ‰§è¡Œæ·±æ‹·è´ (ä½¿ç”¨ JSON)ã€‚æ³¨æ„ Date å·²å˜å­—ç¬¦ä¸²ã€‚è¯·å°è¯•ä¿®æ”¹æ‹·è´å¯¹è±¡ã€‚';
                 } catch (e) {
                     copiedDisplay.textContent = `// JSON æ·±æ‹·è´å¤±è´¥: ${e.message}`;
                     copyStatus.textContent = `JSON æ·±æ‹·è´å¤±è´¥: ${e.message}`;
                     modifyCopyBtn.disabled = true;
                     currentCopyType = '';
                 }
            });

            modifyCopyBtn.addEventListener('click', () => {
                if (copiedObject && copiedObject.b) {
                    copiedObject.a = 55; // Modify top-level primitive
                    copiedObject.b.c = 99; // Modify nested property
                    if (Array.isArray(copiedObject.b.d)) {
                         copiedObject.b.d.push('z'); // Modify nested array
                    } else if (currentCopyType === 'deep-json' && !copiedObject.b.d) {
                         // Handle case where JSON stringify might have removed an empty array if it was initially so
                         // This part is less likely with the current initial object but good to consider
                    }

                    // Update displays
                    copiedDisplay.textContent = safeStringify(copiedObject);
                    originalDisplay.textContent = safeStringify(originalObject); // Update original display to show if it changed

                    // Update status based on copy type
                    if (currentCopyType === 'shallow') {
                        copyStatus.textContent = 'ä¿®æ”¹äº†æµ…æ‹·è´å¯¹è±¡: a=55, b.c=99, b.d.push("z")ã€‚è§‚å¯ŸåŸå§‹å¯¹è±¡ï¼ša ä¸å˜ï¼Œä½† b.c å’Œ b.d æ”¹å˜äº† (å…±äº«å¼•ç”¨)ã€‚';
                    } else if (currentCopyType === 'deep-json') {
                        copyStatus.textContent = 'ä¿®æ”¹äº†æ·±æ‹·è´å¯¹è±¡: a=55, b.c=99, b.d.push("z")ã€‚è§‚å¯ŸåŸå§‹å¯¹è±¡ï¼šæ‰€æœ‰å±æ€§å‡æœªæ”¹å˜ (å®Œå…¨ç‹¬ç«‹)ã€‚';
                    } else {
                         copyStatus.textContent = 'å·²ä¿®æ”¹æ‹·è´å¯¹è±¡ã€‚è¯·æ³¨æ„æ‹·è´ç±»å‹ã€‚';
                    }
                }
            });

            resetCopyBtn.addEventListener('click', resetState);

            // Initial setup
            resetState();
        }


        // --- Debounce/Throttle Interactive Demo Logic ---
        function setupDebounceThrottleDemo() {
            const debounceInput = document.getElementById('debounceInput');
            const debounceOutput = document.getElementById('debounceOutput');
            const throttleInput = document.getElementById('throttleInput');
            const throttleOutput = document.getElementById('throttleOutput');
            const delay = 500; // ms

            const logDebounce = (value) => {
                const time = new Date().toLocaleTimeString();
                debounceOutput.textContent += `[${time}] Debounced: ${value}\n`;
                debounceOutput.scrollTop = debounceOutput.scrollHeight; // Scroll to bottom
            };

            const logThrottle = (value) => {
                 const time = new Date().toLocaleTimeString();
                 throttleOutput.textContent += `[${time}] Throttled: ${value}\n`;
                 throttleOutput.scrollTop = throttleOutput.scrollHeight; // Scroll to bottom
            };

            const debouncedLog = debounce(logDebounce, delay);
            const throttledLog = throttle(logThrottle, delay);

            debounceInput.addEventListener('input', (event) => {
                debouncedLog(event.target.value);
            });

            throttleInput.addEventListener('input', (event) => {
                throttledLog(event.target.value);
            });
        }


        // --- DOMContentLoaded Event Listener ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- TOC Highlighting Logic ---
            const sections = document.querySelectorAll('main section[id]');
            const tocLinks = document.querySelectorAll('#local-toc a');
            let lastActiveTocLink = null;
            const tocObserverOptions = { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 };
            const tocObserverCallback = (entries) => {
                let bestVisibleEntry = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) {
                            bestVisibleEntry = entry;
                        }
                    }
                });
                if (bestVisibleEntry) {
                    const id = bestVisibleEntry.target.getAttribute('id');
                    const activeLink = document.querySelector(`#local-toc a[href="#${id}"]`);
                    if (activeLink && activeLink !== lastActiveTocLink) {
                        if (lastActiveTocLink) lastActiveTocLink.classList.remove('active');
                        activeLink.classList.add('active');
                        lastActiveTocLink = activeLink;
                    }
                }
            };
            const tocObserver = new IntersectionObserver(tocObserverCallback, tocObserverOptions);
            sections.forEach(section => tocObserver.observe(section));
            const currentHash = window.location.hash;
            if (currentHash) {
                const initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`);
                if (initialActiveLink) {
                    tocLinks.forEach(link => link.classList.remove('active'));
                    initialActiveLink.classList.add('active');
                    lastActiveTocLink = initialActiveLink;
                }
            } else if (tocLinks.length > 0 && !lastActiveTocLink) {
                 tocLinks.forEach(link => link.classList.remove('active'));
                 tocLinks[0].classList.add('active');
                 lastActiveTocLink = tocLinks[0];
            }

            // --- Fade-in Animation Logic ---
            const mainContentSections = document.querySelectorAll('main > article > section.content-section');
            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const fadeObserverCallback = (entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        const delayIndex = Array.from(mainContentSections).indexOf(entry.target);
                        entry.target.style.animationDelay = `${delayIndex * 0.05}s`;
                        entry.target.classList.add('fade-in-section');
                        observer.unobserve(entry.target);
                    }
                });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            mainContentSections.forEach(section => fadeObserver.observe(section));

            // --- Attach Ripple Effect to Buttons ---
             document.querySelectorAll('.button, .quiz-toggle').forEach(button => {
                 button.addEventListener('click', createRipple);
             });

            // --- Initialize Interactive Demos ---
            try {
                 setupCopyDemo();
                 setupDebounceThrottleDemo();
            } catch (e) {
                console.error("Error initializing interactive demos:", e);
            }

        });
    </script>

</body>

</html>
