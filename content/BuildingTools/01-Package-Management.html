<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ…ç®¡ç†ä¸æ¨¡å—åŒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../global.css"> <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <style>
        /* Minimal inline styles - Primarily rely on global.css and Tailwind */

        /* Adjust scroll padding/margin based on potential sticky header */
        html {
            scroll-padding-top: 6rem;
        }
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 6rem;
        }

        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-color-lighter, #f3f4f6); /* Use variable with fallback */
            color: var(--text-color-default, #374151);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Enhanced Heading Styles --- */
        /* Using Tailwind classes directly in HTML is preferred, but these serve as fallback/reference */
        /* H1: Already handled by .head1 in global.css */
        /* H2: Make more prominent */
        .content-section > h2 { /* Target direct children H2 */
             /* Use head2 from global.css if defined, otherwise: */
            font-size: 1.75rem; /* ~text-2xl */
            font-weight: 600; /* font-semibold */
            padding-bottom: 0.75rem; /* pb-3 */
            margin-bottom: 1.75rem; /* mb-7 */
            border-bottom: 1px solid var(--border-color-light, #e5e7eb);
            color: var(--text-color-dark, #1f2937);
        }
        /* H3: Card titles */
        .content-card > h3 {
            /* Use head3 from global.css if defined, otherwise: */
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            color: var(--primary-color-dark, #2563eb); /* Distinct color */
            margin-bottom: 1rem; /* mb-4 */
        }
        /* H4: Sub-headings within cards */
         .content-card > h4 {
            /* Use head4 from global.css if defined, otherwise: */
            font-size: 1.1rem; /* ~text-lg */
            font-weight: 600; /* font-semibold */
            color: var(--text-color-dark, #1f2937);
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .content-card > *:first-child > h4:first-child { /* Remove top margin if H4 is first element */
             margin-top: 0;
        }


        /* --- Card Styling Enhancements --- */
        .content-card {
            /* Add subtle shadow from global.css or Tailwind */
            box-shadow: var(--card-shadow-default, 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)); /* Tailwind shadow-md */
            margin-bottom: 2rem; /* Increased spacing between cards mb-8 */
            transition: box-shadow 0.3s ease-in-out;
        }
        .content-card:hover {
             box-shadow: var(--card-shadow-hover, 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)); /* Tailwind shadow-lg */
        }

        /* --- Frequency/Level Tags --- */
        .level-tag {
            display: inline-block;
            margin-left: 0.5rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            padding: 0.1rem 0.5rem;
            border-radius: 0.25rem; /* rounded-sm */
            vertical-align: middle;
            border: 1px solid transparent;
        }
        .level-tag-high { background-color: var(--danger-color-light, #fee2e2); color: var(--danger-color, #ef4444); border-color: var(--danger-color, #ef4444); }
        .level-tag-medium { background-color: var(--warning-color-light, #fff7ed); color: var(--warning-color, #f97316); border-color: var(--warning-color, #f97316); }
        .level-tag-low { background-color: var(--secondary-color-light, #ecfdf5); color: var(--secondary-color, #10b981); border-color: var(--secondary-color, #10b981); }

        /* --- Fade-in Animation --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-section { opacity: 0; animation: fadeIn 0.5s ease-out forwards; }

        /* --- Code Block Enhancements --- */
        article pre {
            position: relative; /* Needed for absolute positioning of the button */
            font-family: var(--font-family-mono, 'Roboto Mono', monospace);
            border-radius: 0.375rem;
            margin: 1rem 0;
            padding: 1em;
            padding-top: 2.5em; /* Make space for the button */
            overflow: auto;
            background-color: #272822;
            color: #f8f8f2;
            border: 1px solid #4d4d4d;
        }
        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            background-color: #4a5568; /* gray-700 */
            color: #f7fafc; /* gray-100 */
            border: none;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        .copy-button:hover {
            opacity: 1;
            background-color: #2d3748; /* gray-800 */
        }
        .copy-button .fa-copy { margin-right: 0.25rem; }
        .copy-button .copy-feedback { margin-left: 0.25rem; }

        /* --- Inline Code & Lists --- */
        article ul { list-style: disc; padding-left: 1.5em; margin-bottom: 1em; }
        article ol { list-style: decimal; padding-left: 1.5em; margin-bottom: 1em; }
        article li { margin-bottom: 0.5em; }
        article ul ul, article ol ol, article ul ol, article ol ul { margin-top: 0.5em; margin-bottom: 0.5em; }
        *:not(pre) > code {
            background-color: var(--primary-color-light, #eff6ff);
            color: var(--primary-color-dark, #2563eb);
            padding: 0.1rem 0.4rem;
            border-radius: 0.25rem;
            font-family: var(--font-family-mono, 'Roboto Mono', monospace);
            font-size: 0.9em;
        }
        article pre code[class*="language-"] {
            background: none; color: inherit; padding: 0; border-radius: 0;
            font-size: inherit; font-family: inherit; line-height: inherit;
            text-shadow: none; white-space: pre; display: block;
        }

        /* --- Tooltips --- */
        .tooltip-term {
            border-bottom: 1px dotted var(--primary-color, #3b82f6);
            cursor: help;
            position: relative;
            color: var(--primary-color-dark, #2563eb);
            font-weight: 500;
        }
        .tooltip-term::before { /* Tooltip text */
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px); /* Position above */
            background-color: rgba(31, 41, 55, 0.9); /* gray-800 with opacity */
            color: white;
            padding: 0.4rem 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 400; /* Normal weight for tooltip */
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
            z-index: 10;
        }
        .tooltip-term::after { /* Tooltip arrow */
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(0px); /* Arrow position */
            border-width: 5px;
            border-style: solid;
            border-color: rgba(31, 41, 55, 0.9) transparent transparent transparent;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
            z-index: 10;
        }
        .tooltip-term:hover::before,
        .tooltip-term:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* --- Mermaid Diagram Styling --- */
         .mermaid {
            margin: 1.5rem 0; /* Add some vertical spacing */
            text-align: center; /* Center the diagram */
            background-color: var(--bg-color-light, #f9fafb); /* Light background for contrast */
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid var(--border-color-light, #e5e7eb);
        }
        .mermaid svg { max-width: 100%; height: auto; display: block; margin: 0 auto; }

        /* --- Comparison Table Styling --- */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid var(--border-color-default, #d1d5db);
            padding: 0.75rem;
            text-align: left;
            vertical-align: top;
        }
        .comparison-table thead th {
            background-color: var(--bg-color-lighter, #f3f4f6);
            font-weight: 600;
            color: var(--text-color-dark, #1f2937);
        }
        .comparison-table tbody tr:nth-child(odd) {
            background-color: var(--bg-color-light, #f9fafb);
        }
        .comparison-table tbody tr:hover {
            background-color: var(--primary-color-light, #eff6ff);
        }
        .comparison-table td:first-child {
            font-weight: 500;
            width: 25%; /* Adjust as needed */
        }

        /* --- Quiz Card Styling (Adapted from example.html, ensure compatibility with global.css) --- */
        /* Use .quiz-card styles from global.css if available */
        .quiz-card {
            background-color: var(--quiz-bg, var(--primary-color-light, #eff6ff));
            border: 1px solid var(--border-color-default, #d1d5db);
            border-left: 4px solid var(--quiz-border-color, var(--primary-color, #3b82f6));
            border-radius: 0.5rem; /* rounded-lg */
            padding: var(--quiz-padding, 1.5rem); /* p-6 */
            margin-top: 2rem; /* Add margin top for spacing */
            margin-bottom: 1.5rem; /* mb-6 */
            box-shadow: var(--card-shadow-default, 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)); /* shadow-md */
        }
        .quiz-question { font-size: 1.1rem; font-weight: 500; color: var(--text-color-dark, #1f2937); margin-bottom: 1.25rem; display: flex; align-items: center; gap: 0.5rem; }
        .quiz-options { display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1.25rem; }
        .quiz-option { display: block; padding: 0.75rem 1rem; border: 1px solid var(--border-color-default, #d1d5db); border-radius: 0.375rem; background-color: var(--bg-color-white, white); cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; display: flex; align-items: center; }
        .quiz-option:hover { background-color: var(--quiz-option-hover-bg, rgba(59, 130, 246, 0.1)); border-color: var(--primary-color, #3b82f6); }
        .quiz-option input[type="radio"] { margin-right: 0.75rem; width: 1rem; height: 1rem; accent-color: var(--primary-color, #3b82f6); cursor: pointer; flex-shrink: 0; }
        .quiz-option span { flex-grow: 1; cursor: pointer; color: var(--text-color-default, #374151); }
        .quiz-option.selected { border-color: var(--primary-color, #3b82f6); background-color: rgba(59, 130, 246, 0.15); }
        .quiz-option.selected span { font-weight: 500; } /* font-medium */
        .quiz-option.correct { border-color: var(--success-color, #10b981); background-color: var(--success-color-light, #ecfdf5); }
        .quiz-option.incorrect { border-color: var(--danger-color, #ef4444); background-color: var(--danger-color-light, #fee2e2); }
        .quiz-feedback { margin-top: 1rem; padding: 0.75rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500; display: none; border: 1px solid transparent; }
        .quiz-feedback.correct { background-color: var(--quiz-feedback-correct-bg, var(--success-color-light, #ecfdf5)); color: var(--quiz-feedback-correct-text, var(--success-color, #10b981)); border-color: var(--success-color, #10b981); }
        .quiz-feedback.incorrect { background-color: var(--quiz-feedback-incorrect-bg, var(--danger-color-light, #fee2e2)); color: var(--quiz-feedback-incorrect-text, var(--danger-color, #ef4444)); border-color: var(--danger-color, #ef4444); }
        .quiz-feedback.warning { background-color: var(--warning-color-light, #fff7ed); color: var(--warning-color, #f97316); border-color: var(--warning-color, #f97316); }
        /* Quiz Toggle Button */
        .quiz-toggle { /* Inherit from .button if defined, or use Tailwind */
             /* Example using Tailwind */
             /* padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; border-radius: 0.375rem; transition: all 0.2s; */
             /* Ensure it aligns items */
             display: inline-flex; align-items: center; gap: 0.25rem;
             /* Add ripple effect styles if using JS ripple */
             position: relative; overflow: hidden;
        }
        .quiz-toggle .material-icons { font-size: 1.1rem; transition: transform 0.3s ease-in-out; }
        .quiz-toggle .icon-arrow.rotated { transform: rotate(180deg); }
        .quiz-answer {
            max-height: 0; opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, padding-top 0.5s ease-in-out, padding-bottom 0.5s ease-in-out, margin-top 0.5s ease-in-out;
            overflow: hidden; padding-top: 0; padding-bottom: 0; margin-top: 0;
            border: 1px solid var(--border-color-default, #d1d5db);
            background-color: var(--bg-color-lighter, #f3f4f6);
            border-radius: 0.375rem;
            color: var(--text-color-default, #374151);
        }
        .quiz-answer.visible {
            max-height: 1000px; /* Large enough for content */
            opacity: 1; padding-top: 1rem; padding-bottom: 1rem; margin-top: 1rem;
            overflow: auto;
        }
        .quiz-answer p { margin-bottom: 0.5rem; }
        .quiz-answer ul { margin-top: 0.5rem; }

        /* Ripple effect for buttons */
        .ripple {
            position: absolute; border-radius: 50%;
            background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.4); /* Use RGB for opacity */
            transform: scale(0); animation: ripple-animation 0.6s linear; pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }

    </style>
</head>

<body class="bg-gray-100">
    <div class="page-container">

        <aside class="local-side-nav">
            <h4 class="head4">åŒ…ç®¡ç†ä¸æ¨¡å—åŒ–</h4>
            <ul id="local-toc">
                <li><a href="#intro" class="active"><span class="material-icons nav-icon">inventory_2</span>ç®€ä»‹</a></li>
                <li><a href="#package-managers"><span class="material-icons nav-icon">construction</span>åŒ…ç®¡ç†å™¨</a></li>
                <li><a href="#npm-yarn-basic"><span class="material-icons nav-icon text-sm ml-4">terminal</span>npm/yarn åŸºç¡€</a></li>
                <li><a href="#deps-vs-devdeps"><span class="material-icons nav-icon text-sm ml-4">difference</span>ä¾èµ–ç±»å‹</a></li>
                <li><a href="#semver"><span class="material-icons nav-icon text-sm ml-4">pin</span>ç‰ˆæœ¬æ§åˆ¶ (SemVer)</a></li>
                <li><a href="#lockfiles"><span class="material-icons nav-icon text-sm ml-4">lock</span>Lock æ–‡ä»¶</a></li>
                <li><a href="#npm-ci"><span class="material-icons nav-icon text-sm ml-4">build_circle</span>npm ci</a></li>
                <li><a href="#npx"><span class="material-icons nav-icon text-sm ml-4">play_circle</span>npx</a></li>
                <li><a href="#modules"><span class="material-icons nav-icon">hub</span>æ¨¡å—åŒ–ç³»ç»Ÿ</a></li>
                <li><a href="#esm"><span class="material-icons nav-icon text-sm ml-4">javascript</span>ES Modules</a></li>
                <li><a href="#commonjs"><span class="material-icons nav-icon text-sm ml-4">javascript</span>CommonJS</a></li>
                <li><a href="#esm-vs-cjs"><span class="material-icons nav-icon text-sm ml-4">compare_arrows</span>ESM vs CJS å¯¹æ¯”</a></li>
                <li><a href="#pnpm"><span class="material-icons nav-icon">savings</span>pnpm ä¼˜åŠ¿</a></li>
            </ul>
            <a href="../../index.html" class="back-link"> &larr; è¿”å›å¤§çº²ç›®å½•
            </a>
        </aside>

        <main class="content-main">
            <article>
                <section id="intro" class="content-section fade-in-section" style="animation-delay: 0s;">
                    <h1 class="head1 flex items-center gap-2">
                        <span class="material-icons text-3xl text-blue-600">widgets</span>(ä¸€) åŒ…ç®¡ç†ä¸æ¨¡å—åŒ–
                    </h1>
                    <p class="text-gray-700 leading-relaxed">
                        åœ¨ç°ä»£å‰ç«¯å’Œå…¨æ ˆå¼€å‘ä¸­ï¼Œé«˜æ•ˆåœ°ç®¡ç†é¡¹ç›®ä¾èµ–å’Œç»„ç»‡ä»£ç ç»“æ„è‡³å…³é‡è¦ã€‚æœ¬èŠ‚å°†æ¢è®¨å¸¸ç”¨çš„åŒ…ç®¡ç†å™¨ï¼ˆå¦‚ npm, yarn, pnpmï¼‰åŠå…¶æ ¸å¿ƒæ¦‚å¿µï¼Œä»¥åŠ JavaScript ä¸­ä¸»æµçš„æ¨¡å—åŒ–è§„èŒƒï¼ˆES Modules å’Œ CommonJSï¼‰ã€‚
                    </p>
                    <p class="mt-4 bg-blue-50 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md text-sm">ğŸ’¡
                        <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬ã€‚æ‹¬å·å†…æ ‡æ³¨äº†çŸ¥è¯†ç‚¹è€ƒå¯Ÿé¢‘ç‡ã€‚ä»£ç å—å³ä¸Šè§’æä¾›<i class="fas fa-copy mx-1"></i>å¤åˆ¶æŒ‰é’®ã€‚æ‚¬åœåœ¨<span class="tooltip-term" data-tooltip="å°±åƒè¿™æ ·ï¼">å¸¦ä¸‹åˆ’çº¿çš„æœ¯è¯­</span>ä¸Šå¯æŸ¥çœ‹è§£é‡Šã€‚
                    </p>
                </section>

                <section id="package-managers" class="content-section fade-in-section" style="animation-delay: 0.05s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">construction</span>åŒ…ç®¡ç†å™¨ (Package Managers)
                        <span class="level-tag level-tag-high">é«˜é¢‘åŸºç¡€</span>
                    </h2>
                    <p class="mb-6 text-gray-600">åŒ…ç®¡ç†å™¨æ˜¯è‡ªåŠ¨åŒ–å®‰è£…ã€æ›´æ–°ã€é…ç½®å’Œå¸è½½è½¯ä»¶åŒ…ï¼ˆé¡¹ç›®ä¾èµ–ï¼‰çš„å·¥å…·ï¼Œæå¤§åœ°ç®€åŒ–äº†ç¬¬ä¸‰æ–¹åº“çš„å¼•å…¥å’Œç®¡ç†æµç¨‹ã€‚</p>

                    <div id="npm-yarn-basic" class="content-card mb-8">
                        <h3 class="head3">1. npm/yarn åŸºæœ¬ä½¿ç”¨</h3>
                        <p class="mb-4"><code>npm</code> (Node Package Manager) æ˜¯ Node.js é»˜è®¤çš„åŒ…ç®¡ç†å™¨ã€‚<code>yarn</code> æ˜¯ç”± Facebook å¼€å‘çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³æ—©æœŸ npm çš„ä¸€äº›æ€§èƒ½å’Œä¸€è‡´æ€§é—®é¢˜ï¼ˆå°½ç®¡ç°ä»£ npm å·²æœ‰å¾ˆå¤§æ”¹è¿›ï¼‰ã€‚å®ƒä»¬çš„æ ¸å¿ƒå‘½ä»¤ç±»ä¼¼ï¼š</p>

                        <h4 class="head4">å®‰è£…ä¾èµ– (Install Dependencies)</h4>
                        <p class="mb-2 text-sm">ä» <code>package.json</code> å®‰è£…æ‰€æœ‰é¡¹ç›®ä¾èµ–ï¼š</p>
                        <pre><code class="language-bash"># ä½¿ç”¨ npm
npm install

# ä½¿ç”¨ yarn
yarn install # æˆ–è€…ç›´æ¥ yarn</code></pre>

                        <h4 class="head4">æ·»åŠ ä¾èµ– (Add Dependency)</h4>
                        <p class="mb-2 text-sm">å®‰è£…ç‰¹å®šåŒ…å¹¶å°†å…¶æ·»åŠ åˆ° <code>dependencies</code> (ç”Ÿäº§ç¯å¢ƒä¾èµ–)ï¼š</p>
                        <pre><code class="language-bash"># ä½¿ç”¨ npm
npm install package-name # æˆ–è€… npm i package-name

# ä½¿ç”¨ yarn
yarn add package-name</code></pre>
                        <p class="mt-2 mb-2 text-sm">å®‰è£…ç‰¹å®šåŒ…å¹¶å°†å…¶æ·»åŠ åˆ° <code>devDependencies</code> (å¼€å‘ç¯å¢ƒä¾èµ–)ï¼š</p>
                        <pre><code class="language-bash"># ä½¿ç”¨ npm
npm install package-name --save-dev # æˆ–è€… -D

# ä½¿ç”¨ yarn
yarn add package-name --dev # æˆ–è€… -D</code></pre>

                        <h4 class="head4">è¿è¡Œè„šæœ¬ (Run Scripts)</h4>
                        <p class="mb-2 text-sm">æ‰§è¡Œå®šä¹‰åœ¨ <code>package.json</code> ä¸­ <code>"scripts"</code> å­—æ®µçš„å‘½ä»¤ï¼š</p>
                        <pre><code class="language-bash"># ä½¿ç”¨ npm (ä¾‹å¦‚è¿è¡Œ "start" è„šæœ¬)
npm run start # å¯¹äº start, test, stop, restart å¯ä»¥çœç•¥ run

# ä½¿ç”¨ yarn
yarn run start # æˆ–è€… yarn start</code></pre>

                         <h4 class="head4">å¸è½½ä¾èµ– (Remove Dependency)</h4>
                        <p class="mb-2 text-sm">ä»é¡¹ç›®ä¸­ç§»é™¤ä¸€ä¸ªåŒ…ï¼š</p>
                        <pre><code class="language-bash"># ä½¿ç”¨ npm
npm uninstall package-name

# ä½¿ç”¨ yarn
yarn remove package-name</code></pre>
                    </div>

                    <div id="deps-vs-devdeps" class="content-card mb-8">
                        <h3 class="head3">2. ä¾èµ–ç±»å‹: dependencies vs devDependencies</h3>
                        <p class="mb-4">åœ¨ <code>package.json</code> ä¸­ï¼Œä¾èµ–è¢«åŒºåˆ†ä¸ºä¸¤ç±»ï¼Œè¿™å¯¹äºé¡¹ç›®æ„å»ºå’Œéƒ¨ç½²è‡³å…³é‡è¦ã€‚</p>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li>
                                <strong><code>dependencies</code> (ç”Ÿäº§ä¾èµ–):</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li>åº”ç”¨è¿è¡Œæ—¶å¿…éœ€çš„åŒ…ï¼ˆä¾‹å¦‚ React, Lodash, Expressï¼‰ã€‚</li>
                                    <li>æ‰§è¡Œ <code>npm install</code> æˆ– <code>yarn install</code> æ—¶ï¼ˆä¸å¸¦é¢å¤–å‚æ•°ï¼‰ä¼šå®‰è£…ã€‚</li>
                                    <li>åœ¨æ‰“åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œè¿™äº›ä¾èµ–é€šå¸¸éœ€è¦è¢«åŒ…å«ã€‚</li>
                                    <li>ä½¿ç”¨ <code>npm install &lt;package&gt;</code> æˆ– <code>yarn add &lt;package&gt;</code> æ·»åŠ ã€‚</li>
                                </ul>
                            </li>
                             <li>
                                <strong><code>devDependencies</code> (å¼€å‘ä¾èµ–):</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li>ä»…åœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦çš„åŒ…ï¼ˆä¾‹å¦‚æµ‹è¯•æ¡†æ¶ Jest, æ‰“åŒ…å·¥å…· Webpack, ä»£ç æ ¼å¼åŒ– Prettier, ç±»å‹æ£€æŸ¥ TypeScriptï¼‰ã€‚</li>
                                     <li>æ‰§è¡Œ <code>npm install</code> æˆ– <code>yarn install</code> æ—¶ä¹Ÿä¼šå®‰è£…ã€‚</li>
                                     <li>ä½†åœ¨ç”Ÿäº§ç¯å¢ƒæ„å»ºæˆ–éƒ¨ç½²æ—¶ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ (<code>NODE_ENV=production</code>) æˆ–ä½¿ç”¨ç‰¹å®šå‘½ä»¤ (<code>npm install --production</code>) æ¥è·³è¿‡å®‰è£…è¿™äº›ä¾èµ–ï¼Œä»¥å‡å°éƒ¨ç½²åŒ…çš„å¤§å°å’Œå®‰è£…æ—¶é—´ã€‚</li>
                                     <li>ä½¿ç”¨ <code>npm install &lt;package&gt; --save-dev</code> æˆ– <code>yarn add &lt;package&gt; --dev</code> æ·»åŠ ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                         <p class="text-sm font-medium text-red-600 mt-4">ğŸ¯ å…³é”®ï¼šæ­£ç¡®åŒºåˆ†ä¾èµ–ç±»å‹æœ‰åŠ©äºä¼˜åŒ–ç”Ÿäº§æ„å»ºçš„å¤§å°å’Œé€Ÿåº¦ã€‚è¿è¡Œæ—¶éœ€è¦çš„æ”¾ <code>dependencies</code>ï¼Œå¼€å‘ã€æµ‹è¯•ã€æ„å»ºæ—¶éœ€è¦çš„æ”¾ <code>devDependencies</code>ã€‚</p>
                    </div>

                    <div id="semver" class="content-card mb-8">
                        <h3 class="head3">3. ç‰ˆæœ¬æ§åˆ¶: <span class="tooltip-term" data-tooltip="Semantic Versioning (è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶) æ˜¯ä¸€ç§å¹¿æ³›é‡‡ç”¨çš„ç‰ˆæœ¬å·æ ¼å¼å’Œçº¦å®šï¼Œæ ¼å¼ä¸º MAJOR.MINOR.PATCHã€‚">SemVer</span></h3>
                        <p class="mb-4"><code>package.json</code> ä¸­ä¾èµ–çš„ç‰ˆæœ¬å·é€šå¸¸éµå¾ª SemVer è§„èŒƒï¼Œå¹¶ä½¿ç”¨ç‰¹å®šå‰ç¼€æ¥æŒ‡å®šç‰ˆæœ¬èŒƒå›´ï¼š</p>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li><strong><code>MAJOR.MINOR.PATCH</code> (ä¾‹å¦‚ <code>1.2.3</code>):</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li><code>MAJOR</code>: ä¸å…¼å®¹çš„ API å˜æ›´ã€‚</li>
                                    <li><code>MINOR</code>: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ã€‚</li>
                                    <li><code>PATCH</code>: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚</li>
                                </ul>
                            </li>
                             <li><strong><code>^</code> (Caret):</strong> å…è®¸æ›´æ–° <code>MINOR</code> å’Œ <code>PATCH</code> ç‰ˆæœ¬ã€‚ä¾‹å¦‚ <code>^1.2.3</code> å…è®¸å®‰è£… <code>1.2.3</code> åˆ° <code>&lt;2.0.0</code> çš„æœ€æ–°ç‰ˆæœ¬ (å³ <code>1.x.x</code>)ã€‚è¿™æ˜¯ <code>npm install package-name</code> çš„é»˜è®¤è¡Œä¸ºã€‚</li>
                             <li><strong><code>~</code> (Tilde):</strong> å…è®¸æ›´æ–° <code>PATCH</code> ç‰ˆæœ¬ã€‚ä¾‹å¦‚ <code>~1.2.3</code> å…è®¸å®‰è£… <code>1.2.3</code> åˆ° <code>&lt;1.3.0</code> çš„æœ€æ–°ç‰ˆæœ¬ (å³ <code>1.2.x</code>)ã€‚</li>
                             <li><strong>æ— å‰ç¼€ (ä¾‹å¦‚ <code>1.2.3</code>):</strong> é”å®šç¡®åˆ‡ç‰ˆæœ¬ã€‚</li>
                             <li><strong><code>*</code> æˆ– <code>latest</code>:</strong> å®‰è£…æœ€æ–°å¯ç”¨ç‰ˆæœ¬ï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ä¾èµ–ï¼‰ã€‚</li>
                        </ul>
                         <p class="text-sm font-medium text-red-600 mt-4">ğŸ¯ å…³é”®ï¼š<code>^</code> å’Œ <code>~</code> æä¾›äº†çµæ´»æ€§ï¼Œå…è®¸è‡ªåŠ¨è·å–è¡¥ä¸å’Œæ–°åŠŸèƒ½ï¼Œä½†ä¹Ÿå¯èƒ½å¼•å…¥æœªé¢„æœŸçš„å˜æ›´ã€‚<code>lock</code> æ–‡ä»¶æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„ã€‚</p>
                    </div>

                    <div id="lockfiles" class="content-card mb-8">
                        <h3 class="head3">4. package.json ä¸ Lock æ–‡ä»¶</h3>
                        <p class="mb-4">è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯åŒ…ç®¡ç†çš„æ ¸å¿ƒï¼Œå…±åŒç¡®ä¿é¡¹ç›®ä¾èµ–çš„ç¨³å®šæ€§å’Œä¸€è‡´æ€§ã€‚</p>

                        <h4 class="head4">package.json</h4>
                         <p class="mb-2 text-sm">é¡¹ç›®çš„æ¸…å•æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®çš„å…ƒæ•°æ®å’Œä¾èµ–å…³ç³»ã€‚</p>
                        <ul class="list-disc list-inside space-y-1 text-sm mb-4">
                            <li><strong>ä½œç”¨ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li>è®°å½•é¡¹ç›®åç§°ã€ç‰ˆæœ¬ã€æè¿°ã€ä½œè€…ç­‰åŸºæœ¬ä¿¡æ¯ã€‚</li>
                                    <li>å®šä¹‰é¡¹ç›®è„šæœ¬ (<code>scripts</code>)ã€‚</li>
                                    <li>å£°æ˜é¡¹ç›®æ‰€éœ€çš„ç”Ÿäº§ä¾èµ– (<code>dependencies</code>) å’Œå¼€å‘ä¾èµ– (<code>devDependencies</code>)ï¼Œä½¿ç”¨ <span class="tooltip-term" data-tooltip="ä¾‹å¦‚ ^1.2.3 æˆ– ~1.2.3ï¼ŒæŒ‡å®šä¸€ä¸ªç‰ˆæœ¬èŒƒå›´è€Œéå›ºå®šç‰ˆæœ¬">SemVer èŒƒå›´</span>ã€‚</li>
                                </ul>
                            </li>
                            <li><strong>ç‰¹ç‚¹ï¼š</strong> æ‰‹åŠ¨æˆ–é€šè¿‡å‘½ä»¤ä¿®æ”¹ï¼Œå®šä¹‰çš„æ˜¯ä¾èµ–çš„ *ç‰ˆæœ¬èŒƒå›´*ã€‚</li>
                        </ul>
                        <pre><code class="language-json">{
  "name": "my-project",
  "version": "1.0.0",
  "description": "A sample project",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "test": "jest"
  },
  "dependencies": {
    "lodash": "^4.17.21" // å…è®¸ 1.x.x
  },
  "devDependencies": {
    "jest": "~27.5.1" // å…è®¸ 27.5.x
  },
  "author": "Your Name",
  "license": "ISC"
}</code></pre>

                        <h4 class="head4 mt-6">package-lock.json (npm) / yarn.lock (yarn)</h4>
                         <p class="mb-2 text-sm">è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç”¨äºé”å®šé¡¹ç›®ä¾èµ–æ ‘ä¸­æ¯ä¸ªåŒ…çš„ *ç¡®åˆ‡ç‰ˆæœ¬*ã€‚</p>
                        <ul class="list-disc list-inside space-y-1 text-sm mb-4">
                            <li><strong>ä½œç”¨ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li>è®°å½•å®‰è£…æ—¶è§£æåˆ°çš„æ¯ä¸ªä¾èµ–ï¼ˆåŒ…æ‹¬é—´æ¥ä¾èµ–ï¼‰çš„ç²¾ç¡®ç‰ˆæœ¬å·ã€‚</li>
                                    <li>è®°å½•ä¾èµ–çš„ä¸‹è½½åœ°å€å’Œå®Œæ•´æ€§å“ˆå¸Œå€¼ (ç”¨äºæ ¡éªŒ)ã€‚</li>
                                    <li>ç¡®ä¿ä¸åŒæ—¶é—´ã€ä¸åŒç¯å¢ƒï¼ˆå¼€å‘è€…æœºå™¨ã€CI/CD æœåŠ¡å™¨ï¼‰ä¸‹æ‰§è¡Œ <code>npm install</code> æˆ– <code>yarn install</code> æ—¶ï¼Œå®‰è£…çš„ä¾èµ–ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ã€‚</li>
                                    <li><span class="tooltip-term" data-tooltip="Lock æ–‡ä»¶è®°å½•äº†æ‰å¹³åŒ–çš„ä¾èµ–æ ‘ç»“æ„ï¼Œæ˜ç¡®äº†å“ªä¸ªç‰ˆæœ¬çš„é—´æ¥ä¾èµ–è¢«æå‡åˆ°é¡¶å±‚ï¼Œè§£å†³äº†æ½œåœ¨çš„ç‰ˆæœ¬å†²çªã€‚">è§£å†³ä¾èµ–å†²çª</span>ï¼šç¡®å®šæœ€ç»ˆå®‰è£…çš„ä¾èµ–ç‰ˆæœ¬ï¼Œå³ä½¿å¤šä¸ªåŒ…ä¾èµ–åŒä¸€ä¸ªåº“çš„ä¸åŒ SemVer èŒƒå›´ç‰ˆæœ¬ã€‚</li>
                                </ul>
                            </li>
                             <li><strong>ç‰¹ç‚¹ï¼š</strong> è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°ï¼Œä¸åº”æ‰‹åŠ¨ä¿®æ”¹ã€‚å¿…é¡»æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚ Gitï¼‰ã€‚</li>
                        </ul>
                        <p class="text-sm font-medium text-red-600">ğŸ¯ å…³é”®åŒºåˆ«ï¼š<code>package.json</code> å®šä¹‰æ„å›¾ï¼ˆç‰ˆæœ¬èŒƒå›´ï¼‰ï¼Œ<code>lock</code> æ–‡ä»¶è®°å½•ç»“æœï¼ˆç¡®åˆ‡ç‰ˆæœ¬ï¼‰ï¼Œä¿è¯ç¯å¢ƒä¸€è‡´æ€§ã€‚</p>

                        <div class="quiz-card" id="quiz-lockfile">
                            <div class="quiz-question"><span class="material-icons">quiz</span>æµ‹éªŒ: <code>package-lock.json</code> æˆ– <code>yarn.lock</code> çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                            <div class="quiz-options">
                                <label class="quiz-option"><input type="radio" name="q_lockfile" value="a"><span>å®šä¹‰é¡¹ç›®éœ€è¦å“ªäº›ä¾èµ–åŒ…ã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_lockfile" value="b"><span>æŒ‡å®šé¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬èŒƒå›´ã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_lockfile" value="c"><span>é”å®šé¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬é—´æ¥ä¾èµ–ï¼‰çš„ç¡®åˆ‡ç‰ˆæœ¬ï¼Œç¡®ä¿å®‰è£…ä¸€è‡´æ€§ã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_lockfile" value="d"><span>è®°å½•é¡¹ç›®çš„è„šæœ¬å‘½ä»¤ã€‚</span></label>
                            </div>
                            <div class="quiz-feedback mt-4" id="feedback-q_lockfile"></div>
                            <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_lockfile', 'c', 'quiz-lockfile')">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> C. é”å®šé¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬é—´æ¥ä¾èµ–ï¼‰çš„ç¡®åˆ‡ç‰ˆæœ¬ï¼Œç¡®ä¿å®‰è£…ä¸€è‡´æ€§ã€‚</p>
                                <p><strong>è§£æ:</strong> A å’Œ B æ˜¯ <code>package.json</code> çš„ä¸»è¦ä½œç”¨ã€‚D æ˜¯ <code>package.json</code> ä¸­ <code>scripts</code> å­—æ®µçš„ä½œç”¨ã€‚Lock æ–‡ä»¶çš„æ ¸å¿ƒä»·å€¼åœ¨äºè®°å½•ä¾èµ–æ ‘çš„ç¡®åˆ‡çŠ¶æ€ï¼Œä¿è¯ä»»ä½•äººåœ¨ä»»ä½•æ—¶é—´å®‰è£…éƒ½èƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚</p>
                            </div>
                        </div>
                    </div>

                     <div id="npm-ci" class="content-card mb-8">
                        <h3 class="head3">5. npm ci</h3>
                         <span class="level-tag level-tag-medium">ä¸­é¢‘</span>
                        <p class="mb-4"><code>npm ci</code> æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºè‡ªåŠ¨åŒ–ç¯å¢ƒï¼ˆå¦‚ CI/CD æœåŠ¡å™¨ï¼‰çš„å‘½ä»¤ï¼Œç”¨äºå®‰è£…ä¾èµ–ã€‚</p>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li><strong>ä¸ <code>npm install</code> çš„å…³é”®åŒºåˆ«ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li><strong>åŸºäº Lock æ–‡ä»¶ï¼š</strong> <code>npm ci</code> ä¸¥æ ¼æŒ‰ç…§ <code>package-lock.json</code> æ–‡ä»¶å®‰è£…ä¾èµ–ã€‚å¦‚æœ lock æ–‡ä»¶ä¸å­˜åœ¨æˆ–ä¸ <code>package.json</code> ä¸ä¸€è‡´ï¼Œå®ƒä¼šæŠ¥é”™é€€å‡ºï¼Œè€Œä¸æ˜¯å°è¯•æ›´æ–° lock æ–‡ä»¶ã€‚</li>
                                    <li><strong>åˆ é™¤ <code>node_modules</code>ï¼š</strong> åœ¨å®‰è£…å‰ï¼Œ<code>npm ci</code> ä¼šå…ˆåˆ é™¤ç°æœ‰çš„ <code>node_modules</code> ç›®å½•ï¼Œç¡®ä¿ä¸€ä¸ªå¹²å‡€çš„å®‰è£…ç¯å¢ƒã€‚</li>
                                    <li><strong>é€Ÿåº¦ï¼š</strong> é€šå¸¸æ¯” <code>npm install</code> æ›´å¿«ï¼Œå› ä¸ºå®ƒè·³è¿‡äº†ä¾èµ–è§£æå’Œ lock æ–‡ä»¶æ›´æ–°çš„æ­¥éª¤ã€‚</li>
                                    <li><strong>ä¸å¯æ›´æ”¹æ€§ï¼š</strong> ä¸ä¼šä¿®æ”¹ <code>package.json</code> æˆ– <code>package-lock.json</code>ã€‚</li>
                                </ul>
                            </li>
                             <li><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> æŒç»­é›†æˆ (CI)ã€è‡ªåŠ¨åŒ–æ„å»ºã€ç”Ÿäº§éƒ¨ç½²ç­‰éœ€è¦ç²¾ç¡®ã€å¿«é€Ÿã€å¯å¤ç°ä¾èµ–å®‰è£…çš„åœºæ™¯ã€‚</li>
                        </ul>
                        <pre><code class="language-bash"># åœ¨ CI/CD æµç¨‹ä¸­æ¨èä½¿ç”¨
npm ci</code></pre>
                         <p class="text-sm font-medium text-red-600 mt-4">ğŸ¯ å…³é”®ï¼šå¼€å‘æ—¶ç”¨ <code>npm install</code> (ä¼šæ›´æ–° lock æ–‡ä»¶)ï¼ŒCI/éƒ¨ç½²æ—¶ç”¨ <code>npm ci</code> (ä¿è¯ä¸¥æ ¼æŒ‰ lock æ–‡ä»¶å®‰è£…)ã€‚</p>
                    </div>

                     <div id="npx" class="content-card">
                        <h3 class="head3">6. npx</h3>
                         <span class="level-tag level-tag-low">ä½é¢‘</span>
                        <p class="mb-4"><code>npx</code> æ˜¯ npm v5.2+ è‡ªå¸¦çš„ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºæ‰§è¡Œ npm åŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li><strong>ä¸»è¦ä½œç”¨ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li><strong>è¿è¡Œæœ¬åœ°å®‰è£…çš„åŒ…å‘½ä»¤ï¼š</strong> æ— éœ€é…ç½® <code>package.json</code> çš„ <code>scripts</code>ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ <code>node_modules/.bin/</code> ä¸‹çš„å‘½ä»¤ã€‚</li>
                                    <li><strong>è¿è¡Œæœªå®‰è£…çš„åŒ…å‘½ä»¤ï¼š</strong> å¦‚æœå‘½ä»¤å¯¹åº”çš„åŒ…æœªåœ¨æœ¬åœ°å®‰è£…ï¼Œ<code>npx</code> ä¼šä¸´æ—¶ä¸‹è½½è¯¥åŒ…ï¼Œè¿è¡Œå…¶å‘½ä»¤ï¼Œç„¶ååˆ é™¤ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                        <pre><code class="language-bash"># å‡è®¾æœ¬åœ°å®‰è£…äº† jest
npx jest --watch # è¿è¡Œæœ¬åœ°çš„ jest å‘½ä»¤

# ä¸´æ—¶ä¸‹è½½å¹¶è¿è¡Œ create-react-appï¼Œæ— éœ€å…¨å±€å®‰è£…
npx create-react-app my-react-app</code></pre>
                         <p class="text-sm font-medium text-red-600 mt-4">ğŸ¯ å…³é”®ï¼šæ–¹ä¾¿åœ°è¿è¡ŒåŒ…æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç‰¹åˆ«æ˜¯ä¸´æ—¶ä½¿ç”¨æˆ–è¿è¡Œæœ¬åœ°å·¥å…·æ—¶ã€‚</p>
                    </div>

                </section>

                <section id="modules" class="content-section fade-in-section" style="animation-delay: 0.1s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">hub</span>æ¨¡å—åŒ–ç³»ç»Ÿ (Module System)
                        <span class="level-tag level-tag-medium">ä¸­é¢‘åŸºç¡€</span>
                    </h2>
                    <p class="mb-6 text-gray-600">æ¨¡å—åŒ–æ˜¯å°†å¤æ‚çš„ç¨‹åºæ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ä»£ç å•å…ƒï¼ˆæ¨¡å—ï¼‰çš„æ–¹å¼ï¼Œæœ‰åŠ©äºæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œç»„ç»‡æ€§ã€‚</p>

                    <div id="esm" class="content-card mb-8">
                        <h3 class="head3">1. ES Modules (ESM)</h3>
                        <p class="mb-2 text-sm">ECMAScript å®˜æ–¹æ ‡å‡†çš„æ¨¡å—åŒ–è§„èŒƒï¼Œæ˜¯ç°ä»£æµè§ˆå™¨å’Œ Node.js (é€šè¿‡ <code>"type": "module"</code> æˆ– <code>.mjs</code> æ–‡ä»¶) æ”¯æŒçš„æ ‡å‡†ã€‚</p>
                        <ul class="list-disc list-inside space-y-1 text-sm mb-4">
                            <li><strong>è¯­æ³•ï¼š</strong> ä½¿ç”¨ <code>import</code> å¯¼å…¥ï¼Œ<code>export</code> å¯¼å‡ºã€‚</li>
                            <li><strong>ç‰¹ç‚¹ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li><strong>é™æ€è§£æï¼š</strong> æ¨¡å—ä¾èµ–å…³ç³»åœ¨ç¼–è¯‘ï¼ˆæˆ–åŠ è½½å‰è§£æï¼‰æ—¶ç¡®å®šï¼Œè¿™ä½¿å¾— <span class="tooltip-term" data-tooltip="ä¸€ç§æ­»ä»£ç æ¶ˆé™¤æŠ€æœ¯ï¼Œå¯ä»¥åœ¨æ‰“åŒ…æ—¶ç§»é™¤ JavaScript ä¸­æœªè¢«å¼•ç”¨çš„ä»£ç ï¼Œå‡å°æœ€ç»ˆæ–‡ä»¶å¤§å°ã€‚">Tree Shaking</span> æˆä¸ºå¯èƒ½ã€‚</li>
                                    <li><code>import</code> è¯­å¥å¿…é¡»åœ¨æ¨¡å—é¡¶å±‚ã€‚</li>
                                    <li>å¯¼å‡ºçš„æ˜¯å€¼çš„ <span class="tooltip-term" data-tooltip="å¯¼å‡ºçš„å˜é‡å’Œå¯¼å…¥çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå¦‚æœå¯¼å‡ºæ¨¡å—å†…éƒ¨ä¿®æ”¹äº†å˜é‡å€¼ï¼Œå¯¼å…¥çš„åœ°æ–¹ä¹Ÿèƒ½æ„ŸçŸ¥åˆ°å˜åŒ–ã€‚">å®æ—¶ç»‘å®š (Live Binding)</span>ã€‚</li>
                                    <li>æ”¯æŒé¡¶å±‚ <code>await</code>ã€‚</li>
                                    <li>æ”¯æŒå¼‚æ­¥åŠ è½½ (<code>import()</code> å‡½æ•°)ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                        <h4 class="head4 text-sm font-semibold mb-1">ç¤ºä¾‹:</h4>
                        <pre><code class="language-javascript">// math.js
export const PI = 3.14159;
let counter = 0;
export function increment() { counter++; }
export function getCount() { return counter; }
export default function multiply(a, b) { return a * b; }

// main.js
import multiply, { PI, increment, getCount } from './math.js';

console.log(PI); // 3.14159
console.log(getCount()); // 0
increment();
console.log(getCount()); // 1 (Live Binding ä½“ç°)
console.log(multiply(2, 3)); // 6

// å¼‚æ­¥å¯¼å…¥
import('./math.js').then(math => {
  console.log('Async PI:', math.PI);
});</code></pre>
                        <h4 class="head4 text-sm font-semibold mt-4 mb-1">åŠ è½½æœºåˆ¶ (ç®€åŒ–æµç¨‹å›¾):</h4>
                        <div class="mermaid">
                            graph TD
                            A["æµè§ˆå™¨/Node.js åŠ è½½ main.js"] --> B["è§£æ main.js"]
                            B -- "å‘ç° import from ./math.js" --> C["åŠ è½½ math.js"]
                            C --> D["è§£æ math.js"]
                            D -- "å‘ç° export" --> E["å»ºç«‹æ¨¡å—è®°å½• math.js"]
                            E -- "å¯¼å‡ºç»‘å®š" --> B
                            B -- "å»ºç«‹æ¨¡å—è®°å½• main.js" --> F["æ‰§è¡Œ main.js ä»£ç "]
                            F -- "è®¿é—®å¯¼å…¥çš„å˜é‡" --> E
                        
                            style A fill:#e0f2fe,stroke:#0ea5e9
                            style B fill:#fefce8,stroke:#ca8a04
                            style C fill:#e0f2fe,stroke:#0ea5e9
                            style D fill:#fefce8,stroke:#ca8a04
                            style E fill:#ecfdf5,stroke:#16a34a
                            style F fill:#f1f5f9,stroke:#64748b
                        
                        </div>
                        <p class="text-xs text-center text-gray-500 mt-1">ESM åŠ è½½è¿‡ç¨‹ï¼šè§£æ -> åŠ è½½ä¾èµ– -> è§£æä¾èµ– -> é“¾æ¥ -> æ‰§è¡Œã€‚</p>
                    </div>

                    <div id="commonjs" class="content-card mb-8">
                        <h3 class="head3">2. CommonJS (CJS)</h3>
                        <p class="mb-2 text-sm">Node.js æ—©æœŸé‡‡ç”¨çš„æ¨¡å—åŒ–è§„èŒƒï¼Œåœ¨æœåŠ¡å™¨ç«¯å¹¿æ³›ä½¿ç”¨ã€‚</p>
                         <ul class="list-disc list-inside space-y-1 text-sm mb-4">
                            <li><strong>è¯­æ³•ï¼š</strong> ä½¿ç”¨ <code>require()</code> å¯¼å…¥ï¼Œ<code>module.exports</code> æˆ– <code>exports</code> å¯¼å‡ºã€‚</li>
                            <li><strong>ç‰¹ç‚¹ï¼š</strong>
                                <ul class="list-['-_'] list-inside ml-4 mt-1 text-gray-600">
                                    <li><strong>åŠ¨æ€åŠ è½½ï¼š</strong> æ¨¡å—åœ¨è¿è¡Œæ—¶åŠ è½½å’Œæ‰§è¡Œï¼Œ<code>require()</code> å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è°ƒç”¨ã€‚</li>
                                    <li>å¯¼å‡ºçš„æ˜¯å€¼çš„ *æ‹·è´* (å¯¹äºåŸå§‹ç±»å‹) æˆ– *å¼•ç”¨* (å¯¹äºå¯¹è±¡ï¼Œä½†å¼•ç”¨çš„æ˜¯å¯¼å‡ºæ—¶çš„é‚£ä¸ªå¯¹è±¡)ã€‚</li>
                                    <li>åŒæ­¥åŠ è½½ (ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä¼šç¼“å­˜ç»“æœ)ã€‚</li>
                                    <li><code>this</code> æŒ‡å‘å½“å‰æ¨¡å—çš„ <code>exports</code> å¯¹è±¡ã€‚</li>
                                    <li>Node.js ç¯å¢ƒæä¾› <code>__filename</code>, <code>__dirname</code> ç­‰å˜é‡ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                        <h4 class="head4 text-sm font-semibold mb-1">ç¤ºä¾‹:</h4>
                        <pre><code class="language-javascript">// utils.js
let counter = 0;
function increment() { counter++; }
function getCount() { return counter; }

module.exports = {
  increment,
  getCount,
  get value() { return counter; } // ä½¿ç”¨ getter æ¨¡æ‹Ÿ live binding (ä¸å®Œå…¨ç­‰åŒ)
};

// app.js
const utils = require('./utils.js');

console.log(utils.getCount()); // 0
utils.increment();
console.log(utils.getCount()); // 1
console.log(utils.value); // 1 (é€šè¿‡ getter è·å–æœ€æ–°å€¼)
// å¦‚æœç›´æ¥å¯¼å‡º counter: module.exports = { counter }, åˆ™å¯¼å…¥çš„æ˜¯ 0 è¿™ä¸ªå€¼çš„æ‹·è´
</code></pre>
                        <h4 class="head4 text-sm font-semibold mt-4 mb-1">åŠ è½½æœºåˆ¶ (ç®€åŒ–æµç¨‹å›¾):</h4>
                         <div class="mermaid">
                            graph TD
                            A["Node.js æ‰§è¡Œ app.js"] --> B["é‡åˆ° require('./utils.js')"]
                            B -- "ç¼“å­˜ä¸­æœ‰ utils.js æ¨¡å—?" --> C["æœ‰"]
                            B -- "ç¼“å­˜ä¸­æ²¡æœ‰" --> D["åŠ è½½ utils.js æ–‡ä»¶"]
                            D --> E["æ‰§è¡Œ utils.js ä»£ç "]
                            E --> F["å°† module.exports çš„å€¼ç¼“å­˜"]
                            F --> C
                            C -- "è¿”å›ç¼“å­˜çš„ module.exports" --> G["utils = è¿”å›å€¼"]
                            G --> H["ç»§ç»­æ‰§è¡Œ app.js åç»­ä»£ç "]
                        
                            style A fill:#e0f2fe,stroke:#0ea5e9
                            style B fill:#fefce8,stroke:#ca8a04
                            style C fill:#fefce8,stroke:#ca8a04
                            style D fill:#e0f2fe,stroke:#0ea5e9
                            style E fill:#f1f5f9,stroke:#64748b
                            style F fill:#ecfdf5,stroke:#16a34a
                            style G fill:#fefce8,stroke:#ca8a04
                            style H fill:#f1f5f9,stroke:#64748b
                        
                        </div>
                         <p class="text-xs text-center text-gray-500 mt-1">CJS åŠ è½½è¿‡ç¨‹ï¼šæ‰§è¡Œ -> é‡åˆ° require -> åŠ è½½/æ‰§è¡Œä¾èµ– -> ç¼“å­˜å¯¼å‡º -> è¿”å›å¯¼å‡º -> ç»§ç»­æ‰§è¡Œã€‚</p>
                    </div>

                    <div id="esm-vs-cjs" class="content-card mb-8">
                        <h3 class="head3">3. ESM vs CJS å¯¹æ¯”ä¸æ·±å…¥</h3>
                        <p class="mb-4">ä¸¤è€…åœ¨è¯­æ³•ã€åŠ è½½æ—¶æœºã€ç»‘å®šæ–¹å¼ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼š</p>
                        <div class="overflow-x-auto">
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>ç‰¹æ€§</th>
                                        <th>ES Modules (ESM)</th>
                                        <th>CommonJS (CJS)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>æ ‡å‡†</td>
                                        <td>ECMAScript å®˜æ–¹æ ‡å‡†</td>
                                        <td>Node.js å®ç° (éå®˜æ–¹æ ‡å‡†)</td>
                                    </tr>
                                    <tr>
                                        <td>åŠ è½½æ—¶æœº</td>
                                        <td>ç¼–è¯‘æ—¶é™æ€è§£æ</td>
                                        <td>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½</td>
                                    </tr>
                                    <tr>
                                        <td>åŠ è½½æ–¹å¼</td>
                                        <td>å¼‚æ­¥ (æµè§ˆå™¨é»˜è®¤, Node.js æ”¯æŒ), <code>import()</code></td>
                                        <td>åŒæ­¥ (<code>require()</code>)</td>
                                    </tr>
                                     <tr>
                                        <td>å¯¼å‡º/å¯¼å…¥</td>
                                        <td><code>export</code> / <code>import</code></td>
                                        <td><code>module.exports</code>, <code>exports</code> / <code>require()</code></td>
                                    </tr>
                                    <tr>
                                        <td>å€¼ç»‘å®š</td>
                                        <td><span class="tooltip-term" data-tooltip="å¯¼å…¥çš„å˜é‡ä¸å¯¼å‡ºçš„å˜é‡ç»‘å®šï¼Œå¯¼å‡ºæ¨¡å—å†…éƒ¨å€¼çš„å˜åŒ–ä¼šåæ˜ åˆ°å¯¼å…¥å¤„ã€‚">å®æ—¶ç»‘å®š (Live Binding)</span></td>
                                        <td>å€¼æ‹·è´ (åŸå§‹ç±»å‹) / å¼•ç”¨æ‹·è´ (å¯¹è±¡, å¯¼å‡ºç¬é—´çš„å€¼)</td>
                                    </tr>
                                    <tr>
                                        <td><code>import/require</code> ä½ç½®</td>
                                        <td>å¿…é¡»åœ¨é¡¶å±‚</td>
                                        <td>å¯åœ¨ä»£ç ä»»æ„ä½ç½®</td>
                                    </tr>
                                    <tr>
                                        <td>Tree Shaking</td>
                                        <td>æ”¯æŒ (å› é™æ€è§£æ)</td>
                                        <td>è¾ƒéš¾æ”¯æŒ (å› åŠ¨æ€æ€§)</td>
                                    </tr>
                                     <tr>
                                        <td><code>this</code> æŒ‡å‘</td>
                                        <td>é¡¶å±‚ <code>this</code> ä¸º <code>undefined</code></td>
                                        <td>é¡¶å±‚ <code>this</code> æŒ‡å‘ <code>module.exports</code></td>
                                    </tr>
                                     <tr>
                                        <td>å¾ªç¯ä¾èµ–å¤„ç†</td>
                                        <td>éƒ¨åˆ†æ”¯æŒ (è¿”å›æœªåˆå§‹åŒ–çš„ç»‘å®š)</td>
                                        <td>éƒ¨åˆ†æ”¯æŒ (å¯èƒ½è¿”å›æœªå®Œæˆçš„å¯¹è±¡)</td>
                                    </tr>
                                     <tr>
                                        <td>Node.js æ”¯æŒ</td>
                                        <td>éœ€ <code>"type": "module"</code> æˆ– <code>.mjs</code></td>
                                        <td>é»˜è®¤ (<code>.js</code>, <code>.cjs</code>)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="head4 mt-6">Node.js ä¸­ä½¿ç”¨ ESM</h4>
                        <p class="text-sm mb-2">è¦åœ¨ Node.js ä¸­åŸç”Ÿä½¿ç”¨ ESMï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š</p>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-600">
                            <li>åœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>"type": "module"</code>ï¼Œæ­¤æ—¶ <code>.js</code> æ–‡ä»¶é»˜è®¤è¢«è§†ä¸º ESMã€‚</li>
                            <li>å°†æ–‡ä»¶åç¼€åæ”¹ä¸º <code>.mjs</code>ã€‚</li>
                            <li>å¦‚æœé¡¹ç›®æ˜¯ CJS (é»˜è®¤æˆ– <code>"type": "commonjs"</code>)ï¼Œå¯ä»¥ä½¿ç”¨ <code>.cjs</code> åç¼€æ˜ç¡®æŒ‡å®šæ–‡ä»¶ä¸º CJSã€‚</li>
                        </ul>
                        <p class="text-sm mt-2">åœ¨ ESM æ–‡ä»¶ä¸­ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ CJS ç‰¹æœ‰çš„å˜é‡å¦‚ <code>require</code>, <code>module</code>, <code>exports</code>, <code>__filename</code>, <code>__dirname</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>import.meta.url</code> ç­‰æ›¿ä»£ã€‚</p>

                         <div class="quiz-card" id="quiz-modules">
                            <div class="quiz-question"><span class="material-icons">quiz</span>æµ‹éªŒ: ä»¥ä¸‹å…³äº ES Modules (ESM) å’Œ CommonJS (CJS) çš„è¯´æ³•ï¼Œå“ªä¸ªæ˜¯ <strong>é”™è¯¯</strong> çš„ï¼Ÿ</div>
                            <div class="quiz-options">
                                <label class="quiz-option"><input type="radio" name="q_modules" value="a"><span>ESM æ”¯æŒé™æ€åˆ†æå’Œ Tree Shakingï¼Œè€Œ CJS é€šå¸¸ä¸æ”¯æŒã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_modules" value="b"><span>CJS çš„ <code>require()</code> æ˜¯åŒæ­¥åŠ è½½ï¼Œè€Œ ESM çš„ <code>import</code> è¯­å¥æ˜¯å¼‚æ­¥åŠ è½½ã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_modules" value="c"><span>ESM å¯¼å‡ºçš„æ˜¯å€¼çš„å®æ—¶ç»‘å®š (live binding)ï¼Œè€Œ CJS å¯¼å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼ˆæˆ–å¼•ç”¨æ‹·è´ï¼‰ã€‚</span></label>
                                <label class="quiz-option"><input type="radio" name="q_modules" value="d"><span>åœ¨ Node.js ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>"type": "module"</code> æ¥è®© <code>.js</code> æ–‡ä»¶é»˜è®¤ä½¿ç”¨ ESM è§„èŒƒã€‚</span></label>
                            </div>
                            <div class="quiz-feedback mt-4" id="feedback-q_modules"></div>
                            <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_modules', 'b', 'quiz-modules')">
                                <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                            </button>
                            <div class="quiz-answer">
                                <p><strong>ç­”æ¡ˆ:</strong> B. CJS çš„ <code>require()</code> æ˜¯åŒæ­¥åŠ è½½ï¼Œè€Œ ESM çš„ <code>import</code> è¯­å¥æ˜¯å¼‚æ­¥åŠ è½½ã€‚</p>
                                <p><strong>è§£æ:</strong> CJS çš„ <code>require()</code> ç¡®å®æ˜¯åŒæ­¥åŠ è½½ã€‚ä½† ESM çš„ <code>import</code> è¯­å¥æœ¬èº«æ˜¯é™æ€å£°æ˜ï¼Œå…¶åŠ è½½è¿‡ç¨‹åœ¨ä¸åŒç¯å¢ƒä¸‹å¯èƒ½åŒæ­¥ä¹Ÿå¯èƒ½å¼‚æ­¥ï¼ˆä¾‹å¦‚æµè§ˆå™¨æ˜¯å¼‚æ­¥çš„ï¼‰ï¼Œä½†å…³é”®åœ¨äºå®ƒæ˜¯ *é™æ€è§£æ* çš„ã€‚è¯´ <code>import</code> è¯­å¥æœ¬èº«æ˜¯å¼‚æ­¥åŠ è½½å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œä¸”å®¹æ˜“ä¸åŠ¨æ€ <code>import()</code> å‡½æ•°æ··æ·†ã€‚å…¶ä»–é€‰é¡¹éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="pnpm" class="content-section fade-in-section" style="animation-delay: 0.15s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">savings</span>pnpm åŠå…¶ä¼˜åŠ¿
                        <span class="level-tag level-tag-low">ä½é¢‘åŸºç¡€</span>
                    </h2>
                     <div class="content-card">
                        <p class="mb-4"><code>pnpm</code> (performant npm) æ˜¯å¦ä¸€ç§æµè¡Œçš„ Node.js åŒ…ç®¡ç†å™¨ï¼Œæ—¨åœ¨è§£å†³ npm/yarn çš„ä¸€äº›ç—›ç‚¹ï¼Œå°¤å…¶æ˜¯åœ¨ç£ç›˜ç©ºé—´å’Œå®‰è£…é€Ÿåº¦æ–¹é¢ã€‚</p>
                        <h3 class="head3">æ ¸å¿ƒä¼˜åŠ¿</h3>
                         <ul class="list-disc list-inside space-y-2 text-sm">
                            <li>
                                <strong>èŠ‚çœç£ç›˜ç©ºé—´ (Content-addressable Store & Links):</strong>
                                pnpm çš„æ ¸å¿ƒæœºåˆ¶æ˜¯ä½¿ç”¨ <span class="tooltip-term" data-tooltip="ä¾èµ–æ–‡ä»¶å†…å®¹å†³å®šå…¶å­˜å‚¨è·¯å¾„ï¼Œç›¸åŒå†…å®¹çš„æ–‡ä»¶åªå­˜ä¸€ä»½ã€‚">å†…å®¹å¯»å€å­˜å‚¨</span> å’Œæ–‡ä»¶ç³»ç»Ÿé“¾æ¥ï¼ˆç¡¬é“¾æ¥æˆ–ç¬¦å·é“¾æ¥ï¼‰ã€‚ä¾èµ–åŒ…çš„å®é™…æ–‡ä»¶åªä¼šåœ¨å…¨å±€å­˜å‚¨åŒºï¼ˆé€šå¸¸åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `.pnpm-store`ï¼‰å­˜å‚¨ä¸€ä»½ã€‚é¡¹ç›®ä¸­çš„ <code>node_modules</code> ç›®å½•åˆ™é€šè¿‡é“¾æ¥æŒ‡å‘è¿™äº›å…¨å±€å­˜å‚¨ä¸­çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åƒ npm/yarn é‚£æ ·åœ¨æ¯ä¸ªé¡¹ç›®ä¸­å¤åˆ¶ä¾èµ–æ–‡ä»¶ã€‚è¿™åœ¨æœ‰å¤šä¸ªé¡¹ç›®å…±äº«è®¸å¤šç›¸åŒä¾èµ–æ—¶ï¼Œèƒ½æå¤§åœ°å‡å°‘ç£ç›˜ç©ºé—´å ç”¨ã€‚
                            </li>
                             <li>
                                <strong>å®‰è£…é€Ÿåº¦å¿«ï¼š</strong>
                                ç”±äºåˆ©ç”¨äº†å…¨å±€å­˜å‚¨å’Œé“¾æ¥ï¼Œå®‰è£…ä¾èµ–æ—¶å¦‚æœæ‰€éœ€ç‰ˆæœ¬çš„åŒ…å·²å­˜åœ¨äºå…¨å±€å­˜å‚¨ä¸­ï¼Œpnpm å¯ä»¥ç›´æ¥åˆ›å»ºé“¾æ¥ï¼Œè·³è¿‡äº†ä¸‹è½½å’Œè§£å‹çš„è¿‡ç¨‹ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦é€šå¸¸æ¯” npm/yarn æ›´å¿«ï¼Œå°¤å…¶æ˜¯åœ¨é‡å¤å®‰è£…æˆ–å®‰è£…å¤§å‹ä¾èµ–æ—¶ã€‚
                            </li>
                             <li>
                                <strong>æ›´ä¸¥æ ¼çš„ä¾èµ–ç®¡ç† (éæ‰å¹³åŒ– node_modules)ï¼š</strong>
                                pnpm åˆ›å»ºçš„ <code>node_modules</code> ç»“æ„ä¸æ˜¯æ‰å¹³çš„ã€‚é¡¹ç›®ä»£ç åªèƒ½ç›´æ¥ <code>require()</code> æˆ– <code>import</code> åœ¨å…¶ <code>package.json</code> ä¸­æ˜ç¡®å£°æ˜çš„ä¾èµ–ã€‚é—´æ¥ä¾èµ–ï¼ˆä¾èµ–çš„ä¾èµ–ï¼‰ä¸ä¼šè¢«æå‡åˆ° <code>node_modules</code> çš„é¡¶å±‚ï¼Œä»è€Œé¿å…äº† <span class="tooltip-term" data-tooltip="é¡¹ç›®ä¸­ä½¿ç”¨äº†æŸä¸ªåŒ…ï¼Œä½†è¯¥åŒ…å¹¶æœªåœ¨ package.json ä¸­å£°æ˜ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä»–ä¾èµ–é—´æ¥å¼•å…¥çš„ã€‚è¿™å¯èƒ½å¯¼è‡´ä¾èµ–å…³ç³»ä¸ç¨³å®šã€‚">å¹½çµä¾èµ– (Phantom Dependencies)</span> é—®é¢˜ï¼Œä½¿å¾—ä¾èµ–å…³ç³»æ›´æ¸…æ™°ã€é¡¹ç›®æ›´å¥å£®ã€‚
                            </li>
                        </ul>
                         <h4 class="head4 mt-6">node_modules ç»“æ„å¯¹æ¯” (ç¤ºæ„å›¾)</h4>
                        <div class="mermaid">
                            graph LR
                            subgraph "npm/yarn v3+ æ‰å¹³åŒ–"
                                direction TB
                                NM1["node_modules"] --> P1["package-a"]
                                NM1 --> P2["package-b"]
                                NM1 --> P3["package-c@1.0 æ¥è‡ª a"]
                                NM1 --> P4["package-c@2.0 æ¥è‡ª b"]
                                P1 --> P3
                                P2 --> P4
                                style NM1 fill:#f3e8ff,stroke:#7e22ce
                            end
                        
                            subgraph "pnpm (ç¬¦å·é“¾æ¥)"
                                direction TB
                                NM2["node_modules"] --> L1["./package-a â†’ ../.pnpm/package-a@ver/node_modules/package-a"]
                                NM2 --> L2["./package-b â†’ ../.pnpm/package-b@ver/node_modules/package-b"]
                                NM2 --> H1["./.pnpm"]
                                H1 --> PnpmA["package-a@ver/node_modules/package-a"]
                                H1 --> PnpmB["package-b@ver/node_modules/package-b"]
                                H1 --> PnpmC1["package-c@1.0/node_modules/package-c"]
                                H1 --> PnpmC2["package-c@2.0/node_modules/package-c"]
                                PnpmA --> L3["./package-c â†’ ../../package-c@1.0/node_modules/package-c"]
                                PnpmB --> L4["./package-c â†’ ../../package-c@2.0/node_modules/package-c"]
                                style NM2 fill:#dcfce7,stroke:#16a34a
                                style H1 fill:#e0f2fe,stroke:#0ea5e9
                            end                        
                        
                        </div>
                         <p class="text-xs text-center text-gray-500 mt-1">pnpm é€šè¿‡ <code>.pnpm</code> ç›®å½•å’Œç¬¦å·é“¾æ¥ç®¡ç†ä¾èµ–ï¼Œé¿å…äº†æ‰å¹³åŒ–å¸¦æ¥çš„é—®é¢˜ã€‚</p>
                        <p class="text-sm font-medium text-gray-800 mt-4">ğŸ¯ äº†è§£ï¼šçŸ¥é“ pnpm é€šè¿‡é“¾æ¥æŠ€æœ¯èŠ‚çœç©ºé—´ã€æå‡é€Ÿåº¦ï¼Œå¹¶åˆ›å»ºæ›´è§„èŒƒçš„ node_modules ç»“æ„å³å¯ã€‚åœ¨å¤§å‹é¡¹ç›®æˆ– Monorepo åœºæ™¯ä¸‹ä¼˜åŠ¿æ›´æ˜æ˜¾ã€‚</p>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        /**
         * JavaScript for Content Pages (Enhanced)
         * Handles:
         * - TOC highlighting
         * - Section fade-in
         * - Prism highlighting
         * - Mermaid rendering
         * - Code block copy button
         * - Quiz functionality
         * - Ripple effect for buttons
         */
        document.addEventListener('DOMContentLoaded', () => {

            // --- Initialize Mermaid ---
            mermaid.initialize({ startOnLoad: false, theme: 'neutral' });
            try {
                mermaid.run(); // Render static diagrams defined in HTML
            } catch(e) {
                console.error("Error running initial Mermaid render:", e);
            }


            // --- TOC Highlighting & Fade-in ---
            const sections = document.querySelectorAll('main section[id], main div[id^="quiz-"]'); // Observe sections and quiz cards
            const tocLinks = document.querySelectorAll('#local-toc a');
            const mainContentSections = document.querySelectorAll('main > article > section.content-section'); // Target sections for fade-in

            const tocObserverOptions = { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 };
            let lastActiveTocLink = null;

            const tocObserverCallback = (entries) => {
                let bestVisibleEntry = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) {
                            bestVisibleEntry = entry;
                        }
                    }
                });

                if (bestVisibleEntry) {
                    const id = bestVisibleEntry.target.getAttribute('id');
                    // Adjust selector to handle quiz IDs potentially matching section IDs partially
                    const activeLink = document.querySelector(`#local-toc a[href="#${id.startsWith('quiz-') ? id.substring(5) : id}"]`);

                    if (activeLink && activeLink !== lastActiveTocLink) {
                        if (lastActiveTocLink) lastActiveTocLink.classList.remove('active');
                        activeLink.classList.add('active');
                        lastActiveTocLink = activeLink;
                    }
                }
            };

            const tocObserver = new IntersectionObserver(tocObserverCallback, tocObserverOptions);
            sections.forEach(section => tocObserver.observe(section));

            const currentHash = window.location.hash;
            if (currentHash) {
                const initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`);
                if (initialActiveLink) {
                    tocLinks.forEach(link => link.classList.remove('active'));
                    initialActiveLink.classList.add('active');
                    lastActiveTocLink = initialActiveLink;
                }
            } else if (tocLinks.length > 0 && !lastActiveTocLink) {
                 if(tocLinks[0]) {
                    tocLinks[0].classList.add('active');
                    lastActiveTocLink = tocLinks[0];
                 }
            }

            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const fadeObserverCallback = (entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        const delayIndex = Array.from(mainContentSections).indexOf(entry.target);
                        entry.target.style.animationDelay = `${delayIndex * 0.05}s`;
                        entry.target.classList.add('fade-in-section');
                        observer.unobserve(entry.target);
                    }
                });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            mainContentSections.forEach(section => fadeObserver.observe(section));

            // --- Code Block Copy Button ---
            document.querySelectorAll('pre').forEach(preElement => {
                const codeElement = preElement.querySelector('code');
                if (!codeElement) return;

                const button = document.createElement('button');
                button.className = 'copy-button';
                button.innerHTML = '<i class="fas fa-copy"></i> Copy <span class="copy-feedback"></span>';
                preElement.appendChild(button);

                button.addEventListener('click', () => {
                    const codeToCopy = codeElement.innerText;
                    navigator.clipboard.writeText(codeToCopy).then(() => {
                        const feedback = button.querySelector('.copy-feedback');
                        feedback.textContent = 'Copied!';
                        button.style.backgroundColor = '#10b981'; // Emerald-500
                        setTimeout(() => {
                            feedback.textContent = '';
                            button.style.backgroundColor = ''; // Revert color
                        }, 2000);
                    }).catch(err => {
                        const feedback = button.querySelector('.copy-feedback');
                        feedback.textContent = 'Failed!';
                        button.style.backgroundColor = '#ef4444'; // Red-500
                         console.error('Failed to copy: ', err);
                         setTimeout(() => {
                            feedback.textContent = '';
                            button.style.backgroundColor = ''; // Revert color
                        }, 2000);
                    });
                });
            });

            // --- Ripple Effect Logic (Adapted from example.html) ---
            function createRipple(event) {
                const button = event.currentTarget;
                // Check if the target is a button or has button class
                if (!button || (button.tagName !== 'BUTTON' && !button.classList.contains('button'))) return;
                if (typeof button.getBoundingClientRect !== 'function') return;

                const circle = document.createElement("span");
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;

                // Try to get primary color RGB from CSS variable, fallback to default
                const primaryColorRgb = getComputedStyle(document.documentElement)
                                        .getPropertyValue('--primary-color-rgb') // Expecting '59, 130, 246'
                                        || '59, 130, 246'; // Fallback

                circle.style.width = circle.style.height = `${diameter}px`;
                const rect = button.getBoundingClientRect();
                circle.style.left = `${event.clientX - rect.left - radius}px`;
                circle.style.top = `${event.clientY - rect.top - radius}px`;
                circle.style.backgroundColor = `rgba(${primaryColorRgb}, 0.4)`; // Use RGB for opacity
                circle.classList.add("ripple");

                const existingRipple = button.querySelector(".ripple");
                if (existingRipple) existingRipple.remove();

                button.appendChild(circle);
                setTimeout(() => circle.remove(), 600); // Match animation duration
            }

            // Attach ripple effect to buttons
             document.querySelectorAll('.button, .quiz-toggle').forEach(button => {
                 button.addEventListener('click', createRipple);
             });

            // --- Quiz Toggle Logic (Adapted from example.html) ---
            window.toggleAnswer = function(quizId, buttonElement) {
                const quizCard = document.getElementById(quizId);
                if (!quizCard) return;
                const answer = quizCard.querySelector('.quiz-answer');
                const icon = buttonElement.querySelector('.icon-arrow');
                const buttonTextSpan = buttonElement.querySelector('.button-text');
                if (!answer || !icon || !buttonTextSpan) return;

                const isVisible = answer.classList.contains('visible');

                if (isVisible) {
                    answer.style.maxHeight = '0';
                    answer.style.opacity = '0';
                    answer.style.marginTop = '0';
                    answer.style.paddingTop = '0';
                    answer.style.paddingBottom = '0';
                    answer.classList.remove('visible');
                    icon.classList.remove('rotated');
                    buttonTextSpan.textContent = ' æŸ¥çœ‹ç­”æ¡ˆ';
                    // Use transitionend event for cleanup if possible, fallback to timeout
                    const transitionEndHandler = () => {
                        if (!answer.classList.contains('visible')) { // Double check state
                            answer.style.display = 'none';
                        }
                        answer.removeEventListener('transitionend', transitionEndHandler);
                    };
                    answer.addEventListener('transitionend', transitionEndHandler);
                    // Fallback timeout in case transitionend doesn't fire reliably
                    setTimeout(() => {
                        if (!answer.classList.contains('visible')) {
                             answer.style.display = 'none';
                        }
                    }, 550); // Slightly longer than transition duration
                } else {
                    answer.style.display = 'block'; // Make it visible for measurement
                    // Set final styles before calculating scrollHeight
                    answer.style.paddingTop = '1rem';
                    answer.style.paddingBottom = '1rem';
                    answer.style.marginTop = '1rem';
                    // Force reflow to apply display: block before measuring scrollHeight
                    requestAnimationFrame(() => {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        answer.style.opacity = '1';
                        answer.classList.add('visible');
                        icon.classList.add('rotated');
                        buttonTextSpan.textContent = ' éšè—ç­”æ¡ˆ';
                    });
                }
            }

            // --- Quiz Check Answer Logic (Adapted from example.html) ---
            window.checkAnswer = function(questionName, correctAnswerValue, quizId) {
                const options = document.querySelectorAll(`input[name="${questionName}"]`);
                const feedbackElement = document.getElementById(`feedback-${questionName}`);
                const quizCard = document.getElementById(quizId); // Use provided quizId
                let selectedValue = null;
                let selectedLabel = null;

                if (!feedbackElement || !quizCard) {
                    console.error("Quiz elements not found for:", questionName, quizId);
                    return;
                }

                // Reset previous states
                quizCard.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));

                options.forEach(option => {
                    if (option.checked) {
                        selectedValue = option.value;
                        selectedLabel = option.closest('.quiz-option');
                        if (selectedLabel) selectedLabel.classList.add('selected');
                    }
                });

                if (!selectedValue) {
                    feedbackElement.textContent = "è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼";
                    feedbackElement.className = 'quiz-feedback warning';
                    feedbackElement.style.display = 'block';
                    return;
                }

                let correctAnswerLabel = null;
                options.forEach(opt => { if (opt.value === correctAnswerValue) correctAnswerLabel = opt.closest('.quiz-option'); });

                if (selectedValue === correctAnswerValue) {
                    feedbackElement.textContent = "å›ç­”æ­£ç¡®ï¼";
                    feedbackElement.className = 'quiz-feedback correct';
                    if(selectedLabel) selectedLabel.classList.add('correct');
                } else {
                    let correctAnswerText = '';
                    if (correctAnswerLabel) {
                        correctAnswerText = correctAnswerLabel.querySelector('span')?.textContent || `é€‰é¡¹ ${correctAnswerValue}`;
                        correctAnswerLabel.classList.add('correct'); // Highlight correct answer
                    }
                    feedbackElement.textContent = `å›ç­”é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯: "${correctAnswerText}"`;
                    feedbackElement.className = 'quiz-feedback incorrect';
                    if(selectedLabel) selectedLabel.classList.add('incorrect'); // Mark user's wrong choice
                }
                feedbackElement.style.display = 'block';

                // Automatically show the answer explanation section
                const answerSection = quizCard.querySelector('.quiz-answer');
                const toggleButton = quizCard.querySelector('.quiz-toggle');
                 if (answerSection && toggleButton && !answerSection.classList.contains('visible')) {
                     toggleAnswer(quizId, toggleButton);
                 }
            }

            // Attach event listener for quiz toggle buttons (if they are separate from check button)
             document.querySelectorAll('.quiz-card .quiz-toggle').forEach(button => {
                 const quizCard = button.closest('.quiz-card');
                 const quizId = quizCard?.id;
                 const checkButton = quizCard?.querySelector('button[onclick^="checkAnswer"]');

                 if (quizId && button !== checkButton) { // Only add toggle if it's NOT the check button
                     button.addEventListener('click', (event) => {
                         // Ripple effect is already attached globally
                         toggleAnswer(quizId, button);
                     });
                 }
                 // If it IS the check button, the onclick handler calls checkAnswer,
                 // and checkAnswer now handles revealing the answer section.
             });


            // --- Trigger Prism Highlighting ---
             Prism.highlightAll();

        }); // End of DOMContentLoaded listener
    </script>

</body>

</html>
