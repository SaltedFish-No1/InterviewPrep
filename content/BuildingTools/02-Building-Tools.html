<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„å»ºå·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../global.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <style>
        /* Minimal inline styles - Primarily rely on global.css and Tailwind */

        /* --- Base & Layout Adjustments --- */
        html {
            scroll-padding-top: 6rem; /* Adjust based on potential sticky nav height */
            scroll-behavior: smooth;
        }

        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-family: 'Inter', sans-serif; /* Ensure Inter is primary */
            background-color: var(--bg-color-lighter); /* Consistent background */
        }

        /* --- Typography --- */
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 6rem; /* Offset for sticky nav */
        }
        h2 {
            border-bottom: 1px solid var(--border-color-light);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        h3 {
            margin-top: 0; /* Reset top margin as card handles spacing */
            margin-bottom: 1rem;
            color: var(--primary-color-dark);
            font-size: 1.25rem; /* text-xl */
        }

        /* Style for frequency/level tags */
        .level-tag { display: inline-block; margin-left: 0.5rem; font-size: 0.75rem; font-weight: 500; padding: 0.1rem 0.5rem; border-radius: 0.25rem; vertical-align: middle; border: 1px solid transparent; }
        .level-tag-high { background-color: var(--danger-color-light); color: var(--danger-color); border-color: var(--danger-color); }
        .level-tag-medium { background-color: var(--warning-color-light); color: var(--warning-color); border-color: var(--warning-color); }
        .level-tag-low { background-color: var(--secondary-color-light); color: var(--secondary-color); border-color: var(--secondary-color); }
        .level-tag-base { background-color: var(--bg-color-lighter); color: var(--text-color-light); border-color: var(--border-color-default); }

        /* --- Fade-in Animation --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-section { opacity: 0; animation: fadeIn 0.5s ease-out forwards; }

        /* --- Content Card Adjustments --- */
        /* Using .content-card from global.css */
        .content-card {
            margin-bottom: 1.5rem;
            transition: box-shadow 0.2s ease-in-out; /* Added transition for hover effect */
        }
        .content-card:hover {
             box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* Tailwind shadow-lg on hover */
        }
        .content-card:last-child { margin-bottom: 0; }
        .content-section > .content-card + .content-card { margin-top: 1.5rem; }

        /* Improved list styling for concepts */
        .concept-list li {
            display: flex; /* Use flex for alignment */
            align-items: flex-start; /* Align items to the top */
            gap: 0.75rem; /* Space between icon and text */
            margin-bottom: 1.25rem; /* Increased spacing between items */
        }
        .concept-list .concept-icon {
            margin-top: 0.15rem; /* Align icon slightly better with first line */
            color: var(--primary-color);
            font-size: 1.25rem; /* Slightly larger icon */
        }
        .concept-list .concept-content {
            flex: 1; /* Allow content to take remaining space */
        }
        .concept-list .concept-content strong {
             display: block; /* Make title block */
             margin-bottom: 0.25rem; /* Space below title */
             font-weight: 600; /* font-semibold */
             color: var(--text-color-dark);
        }
        .concept-list .concept-content p {
            font-size: 0.9rem; /* Slightly smaller text for description */
            color: var(--text-color-default);
            margin-bottom: 0.5rem; /* Space below description */
        }
        .concept-list .concept-content pre {
             margin-top: 0.5rem; /* Space above code example */
             margin-bottom: 0; /* Remove bottom margin for code in list */
        }


        /* --- Code Block Styling --- */
        /* Rely on global.css 'pre' and Prism theme */
        *:not(pre) > code { background-color: var(--primary-color-light); color: var(--primary-color-dark); padding: 0.1rem 0.4rem; border-radius: 0.25rem; font-family: var(--font-family-mono); font-size: 0.9em; }

        /* --- Mermaid Diagram Styling (Using global.css .mermaid styles) --- */

        /* --- Table Styling (for Vite vs Webpack comparison) --- */
        table { border-collapse: collapse; width: 100%; margin-bottom: 1rem; font-size: 0.9rem; }
        th, td { border: 1px solid var(--border-color-default); padding: 0.6rem 0.75rem; text-align: left; vertical-align: top; }
        th { background-color: var(--bg-color-lighter); font-weight: 600; color: var(--text-color-dark); }
        tbody tr:nth-child(odd) { background-color: var(--bg-color-light); }
        tbody tr:hover { background-color: #eff6ff; } /* blue-50 */

        /* --- Quiz Card Styles (Copied & adapted from example.html/global.css) --- */
        /* Ensure .quiz-card, .quiz-question, .quiz-options, .quiz-option, .quiz-feedback, .quiz-toggle, .quiz-answer are defined in global.css or here */
        /* Adding Ripple Effect CSS (from example.html) */
        .quiz-toggle, .button { /* Apply ripple to buttons too */
            position: relative;
            overflow: hidden;
        }
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.4); /* Use RGB for opacity */
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        .quiz-toggle .material-icons { font-size: 1.1rem; transition: transform 0.3s ease-in-out; }
        .quiz-toggle .icon-arrow.rotated { transform: rotate(180deg); }
        .quiz-answer { max-height: 0; opacity: 0; transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, padding-top 0.5s ease-in-out, padding-bottom 0.5s ease-in-out, margin-top 0.5s ease-in-out; overflow: hidden; padding-top: 0; padding-bottom: 0; margin-top: 0; border: 1px solid var(--border-color-default); background-color: var(--bg-color-lighter); border-radius: 0.375rem; color: var(--text-color-default); }
        .quiz-answer.visible { max-height: 1000px; opacity: 1; padding-top: 1rem; padding-bottom: 1rem; margin-top: 1rem; overflow: auto; }

        /* Sidebar Link Hover Transition */
        .local-side-nav li a {
             transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; /* Added from Design.md suggestion */
        }
        .local-side-nav li a:hover {
             background-color: var(--bg-color-light); /* Added hover effect */
             color: var(--text-color-dark);
        }
        .local-side-nav li a.active {
             background-color: var(--primary-color-light);
             color: var(--primary-color-dark);
             font-weight: 500;
             border-left-color: var(--primary-color);
        }


    </style>
</head>

<body class="bg-gray-100">
    <div class="page-container">

        <aside class="local-side-nav">
            <h4 class="head4">æ„å»ºå·¥å…·</h4>
            <ul id="local-toc">
                <li><a href="#intro" class="active"><span class="material-icons nav-icon">info</span>ç®€ä»‹</a></li>
                <li><a href="#webpack"><span class="material-icons nav-icon">inventory_2</span>Webpack</a></li>
                 <li><a href="#webpack-concepts" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">checklist</span>æ ¸å¿ƒæ¦‚å¿µ</a></li>
                 <li><a href="#webpack-optimization" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">rocket_launch</span>æ€§èƒ½ä¼˜åŒ–ç®€ä»‹</a></li>
                <li><a href="#vite"><span class="material-icons nav-icon">bolt</span>Vite</a></li>
                 <li><a href="#vite-comparison" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">compare_arrows</span>ä¸ Webpack å¯¹æ¯”</a></li>
                <li><a href="#babel"><span class="material-icons nav-icon">transform</span>Babel</a></li>
                 <li><a href="#babel-config" class="ml-4 text-sm"><span class="material-icons nav-icon text-base">settings</span>é…ç½®ç®€ä»‹</a></li>
            </ul>
            <a href="../../index.html" class="back-link">
                &larr; è¿”å›å¤§çº²ç›®å½•
            </a>
        </aside>

        <main class="content-main">
            <article>
                <section id="intro" class="content-section fade-in-section" style="animation-delay: 0s;">
                    <h1 class="head1 flex items-center gap-2">
                        <span class="material-icons text-3xl text-blue-600">construction</span>(äºŒ) æ„å»ºå·¥å…·
                    </h1>
                    <p>æ„å»ºå·¥å…·æ˜¯ç°ä»£å‰ç«¯å¼€å‘æµç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬è´Ÿè´£å°†æˆ‘ä»¬ç¼–å†™çš„æºä»£ç ï¼ˆå¯èƒ½åŒ…å« ES6+ è¯­æ³•ã€TypeScriptã€Sassã€å›¾ç‰‡ç­‰ï¼‰è½¬æ¢å’Œæ‰“åŒ…æˆæµè§ˆå™¨å¯ä»¥ç†è§£å’Œé«˜æ•ˆè¿è¡Œçš„é™æ€èµ„æºï¼ˆå¦‚ HTML, CSS, JavaScriptï¼‰ã€‚ç†è§£ä¸»æµæ„å»ºå·¥å…·çš„åŸç†å’Œç”¨æ³•å¯¹äºå‰ç«¯å’Œå…¨æ ˆå¼€å‘è€…è‡³å…³é‡è¦ã€‚</p>
                    <p class="mt-4 bg-blue-50 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md text-sm">ğŸ’¡
                        <strong>æç¤º:</strong> ç‚¹å‡»å·¦ä¾§å¯¼èˆªå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ç›¸åº”ä¸»é¢˜ã€‚æ‹¬å·å†…æ ‡æ³¨äº†çŸ¥è¯†ç‚¹çš„é‡è¦ç¨‹åº¦å’Œéš¾åº¦çº§åˆ«ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ <span class="tooltip-term" data-tooltip="ä¾‹å¦‚è¿™ä¸ªè§£é‡Šï¼">å¸¦ä¸‹åˆ’çº¿çš„æœ¯è¯­</span> ä¸Šå¯æŸ¥çœ‹è§£é‡Šã€‚å°è¯•ç« èŠ‚æœ«å°¾çš„æµ‹éªŒæ¥å·©å›ºçŸ¥è¯†ï¼
                    </p>
                </section>

                <section id="webpack" class="content-section fade-in-section" style="animation-delay: 0.05s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">inventory_2</span>Webpack
                        <span class="level-tag level-tag-medium">ä¸­é¢‘</span>
                        <span class="level-tag level-tag-base">åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">ä½œç”¨ (æ¨¡å—æ‰“åŒ…)</h3>
                        <p>Webpack çš„æ ¸å¿ƒä½œç”¨æ˜¯ <strong>æ¨¡å—æ‰“åŒ…å™¨ (Module Bundler)</strong>ã€‚å®ƒå°†é¡¹ç›®ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆJavaScript æ–‡ä»¶ã€CSS æ–‡ä»¶ã€å›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰éƒ½è§†ä¸ºæ¨¡å—ï¼Œåˆ†æå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶å°†å®ƒä»¬æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªä¼˜åŒ–è¿‡çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ JavaScript æ–‡ä»¶ï¼Œä¾›æµè§ˆå™¨åŠ è½½ã€‚</p>
                        <p>ä¸»è¦è§£å†³çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>
                        <ul class="list-disc list-inside space-y-1 text-sm mt-2">
                            <li><strong>æ¨¡å—åŒ–å¼€å‘æ”¯æŒï¼š</strong> å…è®¸å¼€å‘è€…ä½¿ç”¨ CommonJS, ES Module ç­‰æ¨¡å—åŒ–è§„èŒƒç»„ç»‡ä»£ç ã€‚</li>
                            <li><strong>èµ„æºç¼–è¯‘ä¸å¤„ç†ï¼š</strong> é€šè¿‡ Loader å¤„ç†å„ç§ç±»å‹çš„èµ„æºæ–‡ä»¶ï¼ˆå¦‚å°† Sass è½¬ä¸º CSSï¼Œå°† ES6+ è½¬ä¸º ES5ï¼‰ã€‚</li>
                            <li><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong> é€šè¿‡ä»£ç åˆ†å‰²ã€å‹ç¼©ã€Tree Shaking ç­‰æ‰‹æ®µä¼˜åŒ–æœ€ç»ˆè¾“å‡ºèµ„æºçš„å¤§å°å’ŒåŠ è½½æ€§èƒ½ã€‚</li>
                            <li><strong>å¼€å‘æ•ˆç‡ï¼š</strong> æä¾›çƒ­æ¨¡å—æ›¿æ¢ (HMR) ç­‰åŠŸèƒ½æå‡å¼€å‘ä½“éªŒã€‚</li>
                        </ul>
                    </div>
                    <section id="webpack-concepts" class="fade-in-section" style="animation-delay: 0.1s;">
                        <div class="content-card">
                            <h3 class="head3">æ ¸å¿ƒæ¦‚å¿µ</h3>
                            <p>ç†è§£ Webpack çš„å·¥ä½œæµç¨‹éœ€è¦æŒæ¡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
                            <ul class="concept-list mt-4">
                                <li>
                                    <span class="material-icons concept-icon">login</span>
                                    <div class="concept-content">
                                        <strong>Entry (å…¥å£)</strong>
                                        <p>æŒ‡ç¤º Webpack ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ„å»ºå…¶å†…éƒ¨çš„ <span class="tooltip-term" data-tooltip="Webpackæ ¹æ®å…¥å£æ–‡ä»¶åŠå…¶é€’å½’ä¾èµ–æ„å»ºçš„å›¾è°±">ä¾èµ–å›¾ (Dependency Graph)</span>ã€‚Webpack ä¼šæ‰¾å‡ºå…¥å£æ–‡ä»¶ç›´æ¥æˆ–é—´æ¥ä¾èµ–çš„æ‰€æœ‰æ¨¡å—ã€‚é»˜è®¤å€¼é€šå¸¸æ˜¯ <code>./src/index.js</code>ã€‚</p>
                                        <pre><code class="language-javascript">// webpack.config.js (Example)
module.exports = {
  entry: './src/main.js' // æŒ‡å®šå…¥å£æ–‡ä»¶
};</code></pre>
                                    </div>
                                </li>
                                <li>
                                    <span class="material-icons concept-icon">output</span>
                                    <div class="concept-content">
                                        <strong>Output (è¾“å‡º)</strong>
                                        <p>å‘Šè¯‰ Webpack åœ¨å“ªé‡Œä»¥åŠå¦‚ä½•è¾“å‡ºæ‰“åŒ…åçš„æ–‡ä»¶ï¼ˆç§°ä¸º bundlesï¼‰ã€‚é€šå¸¸éœ€è¦æŒ‡å®šè¾“å‡ºç›®å½• (<code>path</code>) å’Œè¾“å‡ºæ–‡ä»¶å (<code>filename</code>)ã€‚</p>
                                        <pre><code class="language-javascript">// webpack.config.js (Example)
const path = require('path');

module.exports = {
  // ... entry
  output: {
    path: path.resolve(__dirname, 'dist'), // è¾“å‡ºç›®å½•
    filename: 'bundle.js' // è¾“å‡ºæ–‡ä»¶å
  }
};</code></pre>
                                    </div>
                                </li>
                                <li>
                                    <span class="material-icons concept-icon">construction</span>
                                    <div class="concept-content">
                                        <strong>Loader (åŠ è½½å™¨)</strong>
                                        <p>Webpack æœ¬èº«åªç†è§£ JavaScript å’Œ JSONã€‚Loader è®© Webpack èƒ½å¤Ÿå¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚ CSS, Sass, å›¾ç‰‡, TSï¼‰ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆçš„æ¨¡å—ã€‚Loader åœ¨æ¨¡å—åŠ è½½æ—¶æŒ‰é¡ºåºæ‰§è¡Œè½¬æ¢ã€‚å¸¸ç”¨çš„æœ‰ <code>css-loader</code>, <code>style-loader</code>, <code>sass-loader</code>, <code>babel-loader</code>, <code>file-loader</code> (æˆ–ä½¿ç”¨ Asset Modules)ã€‚</p>
                                        <pre><code class="language-javascript">// webpack.config.js (Example)
module.exports = {
  module: {
    rules: [
      { test: /\.css$/i, use: ['style-loader', 'css-loader'] },
      { test: /\.(png|svg|jpg)$/i, type: 'asset/resource' },
      { test: /\.js$/, exclude: /node_modules/, use: 'babel-loader' } // é›†æˆ Babel
    ]
  }
};</code></pre>
                                    </div>
                                </li>
                                <li>
                                    <span class="material-icons concept-icon">extension</span>
                                    <div class="concept-content">
                                        <strong>Plugin (æ’ä»¶)</strong>
                                        <p>Loader ç”¨äºè½¬æ¢æ¨¡å—ï¼Œè€Œ Plugin åˆ™ä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹ï¼Œæ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡ï¼Œå¦‚æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€ç¯å¢ƒå˜é‡æ³¨å…¥ç­‰ã€‚å¸¸ç”¨çš„æœ‰ <code>HtmlWebpackPlugin</code> (ç”Ÿæˆ HTML), <code>TerserWebpackPlugin</code> (å‹ç¼© JS), <code>MiniCssExtractPlugin</code> (æå– CSS åˆ°å•ç‹¬æ–‡ä»¶)ã€‚</p>
                                        <pre><code class="language-javascript">// webpack.config.js (Example)
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  plugins: [ new HtmlWebpackPlugin({ template: './src/index.html' }) ]
};</code></pre>
                                    </div>
                                </li>
                                <li>
                                    <span class="material-icons concept-icon">tune</span>
                                    <div class="concept-content">
                                        <strong>Mode (æ¨¡å¼)</strong>
                                        <p>é€šè¿‡è®¾ç½® <code>mode</code> (<code>'development'</code>, <code>'production'</code>, <code>'none'</code>)ï¼Œå¯ç”¨é’ˆå¯¹ä¸åŒç¯å¢ƒçš„å†…ç½®ä¼˜åŒ–ã€‚<code>'production'</code> ä¼šè‡ªåŠ¨è¿›è¡Œä»£ç å‹ç¼©ã€Tree Shaking ç­‰ã€‚</p>
                                    </div>
                                </li>
                            </ul>
                            <div class="mermaid text-center my-4 p-2 border rounded bg-white shadow-sm">
                                graph LR
                                A[Entry Point] --> B[Webpack]
                                B -- Finds Dependencies --> C[Module Graph]
                                C -- Feeds Modules --> D[Loaders: css-loader, babel-loader]
                                D -- Transformed Modules --> C
                                C -- During Build --> E[Plugins: HtmlWebpackPlugin, TerserPlugin]
                                E -- Process Bundle --> F[Output Bundles]
                            
                                style B fill:#eff6ff,stroke:#2563eb,stroke-width:2px
                                style D fill:#fefce8,stroke:#ca8a04
                                style E fill:#ecfdf5,stroke:#059669
                                style F fill:#f3f4f6,stroke:#6b7280
                            
                            </div>
                        </div>
                    </section>
                    <section id="webpack-optimization" class="fade-in-section" style="animation-delay: 0.15s;">
                         <div class="content-card">
                             <h3 class="head3">æ€§èƒ½ä¼˜åŒ–ç®€ä»‹ (é«˜é¢‘è€ƒç‚¹)</h3>
                             <p>Webpack æä¾›äº†å¤šç§ä¼˜åŒ–æ‰‹æ®µæ¥å‡å°æ‰“åŒ…ä½“ç§¯ã€æå‡åŠ è½½é€Ÿåº¦å’Œå¼€å‘æ•ˆç‡ï¼š</p>
                             <ul class="list-disc list-inside space-y-2 text-sm mt-2">
                                 <li><strong>Tree Shaking (æ‘‡æ ‘):</strong> åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹è‡ªåŠ¨ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­æœªå¼•ç”¨çš„ä»£ç ï¼ˆæ­»ä»£ç æ¶ˆé™¤ï¼‰ï¼Œæœ‰æ•ˆå‡å°åŒ…ä½“ç§¯ã€‚ä¾èµ– ES Module è¯­æ³•ã€‚</li>
                                 <li><strong>Code Splitting (ä»£ç åˆ†å‰²):</strong> å°†ä»£ç æ‹†åˆ†æˆå¤šä¸ªå°çš„ bundle æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¹¶è¡ŒåŠ è½½ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ä»£ç ã€‚å¸¸è§ç­–ç•¥åŒ…æ‹¬ï¼šå…¥å£ç‚¹åˆ†å‰²ã€åŠ¨æ€å¯¼å…¥ (<code>import()</code>)ã€æå–å…¬å…±æ¨¡å— (<code>optimization.splitChunks</code>)ã€‚</li>
                                 <li><strong>Hot Module Replacement (HMR / æ¨¡å—çƒ­æ›¿æ¢):</strong> åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå½“ä¿®æ”¹ä»£ç æ—¶ï¼Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œåªæ›¿æ¢æ›´æ–°è¿‡çš„æ¨¡å—ï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡ã€‚é€šå¸¸éœ€è¦é…åˆ Webpack Dev Server å’Œç‰¹å®š Loader/Plugin ä½¿ç”¨ã€‚</li>
                                 <li><strong>ä»£ç å‹ç¼© (Minification):</strong> åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨æ’ä»¶ï¼ˆå¦‚å†…ç½®çš„ <code>TerserWebpackPlugin</code>ï¼‰ç§»é™¤ç©ºæ ¼ã€æ³¨é‡Šï¼Œç¼©çŸ­å˜é‡åï¼Œå‡å°æ–‡ä»¶å¤§å°ã€‚</li>
                                 <li><strong>Scope Hoisting (ä½œç”¨åŸŸæå‡):</strong> åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½å°†æ¨¡å—åˆå¹¶åˆ°åŒä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œå‡å°‘å‡½æ•°å£°æ˜å’Œé—­åŒ…å¸¦æ¥çš„å¼€é”€ã€‚</li>
                                 <li><strong>Caching (ç¼“å­˜):</strong> é€šè¿‡é…ç½®è¾“å‡ºæ–‡ä»¶ååŒ…å«å†…å®¹å“ˆå¸Œ (<code>[contenthash]</code>)ï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œåªæœ‰å½“æ–‡ä»¶å†…å®¹æ”¹å˜æ—¶æ‰éœ€è¦é‡æ–°ä¸‹è½½ã€‚</li>
                             </ul>
                             <p class="mt-2 text-xs text-gray-600">é¢è¯•ä¸­å¸¸é—®åŠè¿™äº›ä¼˜åŒ–ç­–ç•¥çš„åŸç†å’Œé…ç½®æ–¹æ³•ã€‚</p>
                         </div>
                    </section>
                    <div class="quiz-card mt-6" id="quiz-webpack">
                        <div class="quiz-question"><span class="material-icons mr-1">quiz</span>Webpack æµ‹éªŒï¼šå“ªä¸ª Webpack æ ¸å¿ƒæ¦‚å¿µä¸»è¦è´Ÿè´£å¤„ç†é JavaScript æ–‡ä»¶ï¼ˆå¦‚ CSSã€å›¾ç‰‡ï¼‰ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_webpack" value="a"><span>Entry</span></label>
                            <label class="quiz-option"><input type="radio" name="q_webpack" value="b"><span>Output</span></label>
                            <label class="quiz-option"><input type="radio" name="q_webpack" value="c"><span>Loader</span></label>
                            <label class="quiz-option"><input type="radio" name="q_webpack" value="d"><span>Plugin</span></label>
                        </div>
                        <div class="quiz-feedback mt-4" id="feedback-q_webpack"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_webpack', 'c')">
                            <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer" style="display: none;">
                            <p><strong>ç­”æ¡ˆ:</strong> C. Loader</p>
                            <p><strong>è§£æ:</strong> Loader çš„ä¸»è¦èŒè´£æ˜¯è®© Webpack èƒ½å¤Ÿç†è§£å’Œå¤„ç† JavaScript å’Œ JSON ä»¥å¤–çš„æ–‡ä»¶ç±»å‹ï¼Œå°†å®ƒä»¬è½¬æ¢æˆ Webpack å¯ä»¥å¤„ç†çš„æœ‰æ•ˆæ¨¡å—ã€‚</p>
                        </div>
                    </div>
                </section>

                <section id="vite" class="content-section fade-in-section" style="animation-delay: 0.2s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">bolt</span>Vite
                        <span class="level-tag level-tag-medium">ä¸­é¢‘</span>
                        <span class="level-tag level-tag-base">åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">ä½œç”¨ä¸ä¼˜åŠ¿</h3>
                        <p>Vite (æ³•è¯­æ„ä¸º "å¿«é€Ÿ"ï¼Œå‘éŸ³ /vit/) æ˜¯ä¸€ç§æ–°å‹å‰ç«¯æ„å»ºå·¥å…·ï¼Œæ—¨åœ¨æ˜¾è‘—æå‡å¼€å‘ä½“éªŒã€‚</p>
                        <p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
                        <ul class="list-disc list-inside space-y-2 text-sm mt-2">
                            <li><strong>æé€Ÿçš„å†·å¯åŠ¨ (Fast Cold Start):</strong> Vite åœ¨å¼€å‘ç¯å¢ƒä¸‹åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿçš„ <span class="tooltip-term" data-tooltip="ç°ä»£æµè§ˆå™¨æ”¯æŒçš„æ¨¡å—ç³»ç»Ÿï¼Œé€šè¿‡ <script type='module'> åŠ è½½">ES Module (ESM)</span> æ”¯æŒã€‚å®ƒä¸éœ€è¦åƒ Webpack é‚£æ ·åœ¨å¯åŠ¨æ—¶æ‰“åŒ…æ•´ä¸ªåº”ç”¨ï¼Œè€Œæ˜¯æŒ‰éœ€ç¼–è¯‘å’Œæä¾›ä»£ç ã€‚</li>
                            <li><strong>é—ªç”µèˆ¬çš„çƒ­æ¨¡å—æ›¿æ¢ (HMR):</strong> HMR æ›´æ–°æ€§èƒ½ä¸æ¨¡å—æ€»æ•°è§£è€¦ï¼Œæ›´æ–°é€Ÿåº¦æå¿«ã€‚</li>
                            <li><strong>åŸºäº Rollup çš„ä¼˜åŒ–æ„å»º:</strong> åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒVite ä½¿ç”¨ <span class="tooltip-term" data-tooltip="ä¸€ä¸ªé«˜æ•ˆçš„ JavaScript æ¨¡å—æ‰“åŒ…å™¨ï¼Œç‰¹åˆ«æ“…é•¿ç”Ÿæˆä¼˜åŒ–è¿‡çš„åº“ä»£ç ">Rollup</span> è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆé«˜æ•ˆç”Ÿäº§ä»£ç ã€‚Vite ä¹Ÿä¼šåˆ©ç”¨ esbuild è¿›è¡Œé¢„æ„å»ºä¾èµ–å’Œ TS/JSX è½¬æ¢ï¼Œè¿›ä¸€æ­¥æå‡é€Ÿåº¦ã€‚</li>
                            <li><strong>å¼€ç®±å³ç”¨ï¼š</strong> å¯¹ TypeScript, JSX, CSS, JSON, WebAssembly ç­‰å†…ç½®æ”¯æŒï¼Œé…ç½®ç®€æ´ã€‚</li>
                        </ul>
                        <p class="mt-4"><strong>å·¥ä½œåŸç†å¯¹æ¯” (å¼€å‘ç¯å¢ƒ):</strong></p>
                        <ul class="list-disc list-inside space-y-1 text-sm mt-2">
                            <li><strong>Webpack Dev Server:</strong> å…ˆæ‰“åŒ… (Bundle) æ‰€æœ‰æ¨¡å—ï¼Œç„¶åå¯åŠ¨æœåŠ¡å™¨ã€‚</li>
                            <li><strong>Vite Dev Server:</strong> ç›´æ¥å¯åŠ¨æœåŠ¡å™¨ï¼ŒæŒ‰éœ€è½¬æ¢å¹¶æä¾›æºç  (åˆ©ç”¨ Native ESM)ã€‚</li>
                        </ul>
                        <div class="mermaid text-center my-4 p-2 border rounded bg-white shadow-sm">
                            graph TD
                                subgraph Webpack Dev
                                    A[Source Code] --> B{Webpack Dev Server};
                                    B -- Bundles All --> C[Bundle.js];
                                    C --> D[Browser];
                                end
                                subgraph Vite Dev
                                    E[Source Code] --> F{Vite Dev Server};
                                    F -- Serves Native ESM --> G[Browser];
                                    G -- Requests Module --> F;
                                end
                                style B fill:#eff6ff,stroke:#2563eb
                                style F fill:#ecfdf5,stroke:#059669
                        </div>
                    </div>
                     <section id="vite-comparison" class="fade-in-section" style="animation-delay: 0.25s;">
                         <div class="content-card">
                             <h3 class="head3">Vite ä¸ Webpack å¯¹æ¯”</h3>
                             <div class="overflow-x-auto">
                                 <table>
                                     <thead>
                                         <tr>
                                             <th>ç‰¹æ€§</th>
                                             <th>Vite</th>
                                             <th>Webpack</th>
                                         </tr>
                                     </thead>
                                     <tbody>
                                         <tr>
                                             <td><strong>å¼€å‘æœåŠ¡å™¨å¯åŠ¨</strong></td>
                                             <td>æå¿« (åŸºäº Native ESM, æŒ‰éœ€ç¼–è¯‘)</td>
                                             <td>ç›¸å¯¹è¾ƒæ…¢ (éœ€è¦å…ˆæ‰“åŒ…æ‰€æœ‰æ¨¡å—)</td>
                                         </tr>
                                         <tr>
                                             <td><strong>HMR (çƒ­æ¨¡å—æ›¿æ¢)</strong></td>
                                             <td>æå¿« (ä¸æ¨¡å—æ€»æ•°è§£è€¦)</td>
                                             <td>ç›¸å¯¹è¾ƒæ…¢ (å¯èƒ½å—æ¨¡å—æ€»æ•°å½±å“)</td>
                                         </tr>
                                         <tr>
                                             <td><strong>ç”Ÿäº§æ„å»º</strong></td>
                                             <td>åŸºäº Rollup (ä¼˜åŒ–è‰¯å¥½, Tree Shaking æ•ˆæœå¥½)</td>
                                             <td>è‡ªèº«æ‰“åŒ… (åŠŸèƒ½å¼ºå¤§, å¯é…ç½®æ€§é«˜, ç”Ÿæ€æˆç†Ÿ)</td>
                                         </tr>
                                          <tr>
                                             <td><strong>é¢„æ„å»ºä¾èµ–</strong></td>
                                             <td>ä½¿ç”¨ esbuild (Go ç¼–å†™, é€Ÿåº¦å¿«)</td>
                                             <td>é€šå¸¸ä¸è¿›è¡Œæ˜¾å¼é¢„æ„å»º (ä½†å¯é€šè¿‡ DLLPlugin ç­‰ä¼˜åŒ–)</td>
                                         </tr>
                                         <tr>
                                             <td><strong>é…ç½®å¤æ‚åº¦</strong></td>
                                             <td>ç›¸å¯¹ç®€å•, çº¦å®šä¼˜äºé…ç½®</td>
                                             <td>ç›¸å¯¹å¤æ‚, é…ç½®çµæ´»ä½†ç¹ç</td>
                                         </tr>
                                         <tr>
                                             <td><strong>ç”Ÿæ€ç³»ç»Ÿ</strong></td>
                                             <td>å¿«é€Ÿå‘å±•ä¸­, æ’ä»¶ä½“ç³»åŸºäº Rollup</td>
                                             <td>éå¸¸æˆç†Ÿ, Loader/Plugin ç”Ÿæ€åºå¤§</td>
                                         </tr>
                                         <tr>
                                             <td><strong>æµè§ˆå™¨å…¼å®¹æ€§ (å¼€å‘)</strong></td>
                                             <td>éœ€è¦æ”¯æŒ Native ESM çš„ç°ä»£æµè§ˆå™¨</td>
                                             <td>å…¼å®¹æ€§æ›´å¥½ (å› é¢„å…ˆæ‰“åŒ…)</td>
                                         </tr>
                                         <tr>
                                             <td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                                             <td>æ–°é¡¹ç›®ã€è¿½æ±‚æè‡´å¼€å‘ä½“éªŒã€ä¸­å°å‹åº”ç”¨ã€åº“å¼€å‘</td>
                                             <td>å¤§å‹å¤æ‚é¡¹ç›®ã€éœ€è¦é«˜åº¦å®šåˆ¶æ„å»ºæµç¨‹ã€å…¼å®¹æ€§è¦æ±‚é«˜çš„é¡¹ç›®</td>
                                         </tr>
                                     </tbody>
                                 </table>
                             </div>
                         </div>
                    </section>
                     <div class="quiz-card mt-6" id="quiz-vite">
                        <div class="quiz-question"><span class="material-icons mr-1">quiz</span>Vite æµ‹éªŒï¼šVite åœ¨å¼€å‘ç¯å¢ƒä¸‹å®ç°å¿«é€Ÿå†·å¯åŠ¨çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_vite" value="a"><span>Webpack çš„ DllPlugin</span></label>
                            <label class="quiz-option"><input type="radio" name="q_vite" value="b"><span>Rollup çš„ Tree Shaking</span></label>
                            <label class="quiz-option"><input type="radio" name="q_vite" value="c"><span>æµè§ˆå™¨åŸç”Ÿçš„ ES Module (ESM)</span></label>
                            <label class="quiz-option"><input type="radio" name="q_vite" value="d"><span>Babel çš„ Polyfill</span></label>
                        </div>
                        <div class="quiz-feedback mt-4" id="feedback-q_vite"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_vite', 'c')">
                            <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer" style="display: none;">
                            <p><strong>ç­”æ¡ˆ:</strong> C. æµè§ˆå™¨åŸç”Ÿçš„ ES Module (ESM)</p>
                            <p><strong>è§£æ:</strong> Vite åœ¨å¼€å‘æ¨¡å¼ä¸‹åˆ©ç”¨äº†ç°ä»£æµè§ˆå™¨å¯¹åŸç”Ÿ ES Module çš„æ”¯æŒã€‚å®ƒä¸å†éœ€è¦åƒ Webpack é‚£æ ·é¢„å…ˆæ‰“åŒ…æ•´ä¸ªåº”ç”¨ï¼Œè€Œæ˜¯ç›´æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶æŒ‰éœ€è½¬æ¢å’Œæä¾›æºä»£ç æ¨¡å—ï¼Œä»è€Œå®ç°äº†æå¿«çš„å†·å¯åŠ¨é€Ÿåº¦ã€‚</p>
                        </div>
                    </div>
                </section>

                <section id="babel" class="content-section fade-in-section" style="animation-delay: 0.3s;">
                    <h2 class="flex items-center head2">
                        <span class="material-icons">transform</span>Babel
                        <span class="level-tag level-tag-low">ä½é¢‘</span>
                        <span class="level-tag level-tag-base">åŸºç¡€</span>
                    </h2>
                    <div class="content-card">
                        <h3 class="head3">ä½œç”¨ (JavaScript ç¼–è¯‘å™¨)</h3>
                        <p>Babel æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ <strong>JavaScript ç¼–è¯‘å™¨</strong>ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†ä½¿ç”¨æœ€æ–° ECMAScript æ ‡å‡†ï¼ˆES6, ES7, ESNext ç­‰ï¼‰ç¼–å†™çš„ä»£ç ï¼Œè½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript ç‰ˆæœ¬ï¼ˆé€šå¸¸æ˜¯ ES5ï¼‰ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­æ­£ç¡®è¿è¡Œã€‚</p>
                        <p>æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
                        <ul class="list-disc list-inside space-y-1 text-sm mt-2">
                            <li><strong>è¯­æ³•è½¬æ¢ (Syntax Transformation):</strong> å°†æ–°çš„è¯­æ³•ï¼ˆå¦‚ç®­å¤´å‡½æ•°ã€ç±»ã€è§£æ„èµ‹å€¼ã€async/await ç­‰ï¼‰è½¬æ¢ä¸ºæ—§çš„ç­‰æ•ˆè¯­æ³•ã€‚</li>
                            <li><strong>Polyfill (å«ç‰‡):</strong> é€šè¿‡ <span class="tooltip-term" data-tooltip="å¦‚ core-jsï¼Œæä¾›ç›®æ ‡ç¯å¢ƒä¸­ç¼ºå¤±çš„å†…ç½®å‡½æ•°å’Œå¯¹è±¡">Polyfill åº“</span> æä¾›ç›®æ ‡ç¯å¢ƒä¸­ç¼ºå¤±çš„æ–°åŠŸèƒ½ï¼ˆå¦‚ <code>Promise</code>, <code>Array.prototype.includes</code> ç­‰ï¼‰ã€‚Babel æœ¬èº«ä¸ç›´æ¥æä¾› Polyfillï¼Œä½†å¯ä»¥é€šè¿‡é…ç½®æŒ‰éœ€å¼•å…¥ã€‚</li>
                            <li><strong>è½¬æ¢å…¶ä»–è¯­è¨€ç‰¹æ€§ï¼š</strong> æ”¯æŒè½¬æ¢ JSX (React)ã€TypeScript ç­‰ã€‚</li>
                        </ul>
                        <p class="mt-4">è™½ç„¶ Vite å’Œ Webpack ç­‰æ„å»ºå·¥å…·é€šå¸¸ä¼šé€šè¿‡ Loader (<code>babel-loader</code>) æˆ– Plugin é›†æˆ Babelï¼Œä½†ç†è§£ Babel çš„åŸºæœ¬ä½œç”¨ä»ç„¶å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒè§£å†³äº†å‰ç«¯å¼€å‘ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•åœ¨äº«å—æ–°è¯­è¨€ç‰¹æ€§çš„åŒæ—¶ä¿æŒä»£ç çš„å…¼å®¹æ€§ã€‚</p>
                        <pre><code class="language-javascript">// Input (ES6+)
const greet = (name) => `Hello, ${name}!`;
class Person { constructor(name) { this.name = name; } }

// Output (ES5 - Simplified Example after Babel transformation)
var greet = function greet(name) { return "Hello, " + name + "!"; };
function _classCallCheck(instance, Constructor) { /* ... */ }
var Person = function Person(name) { _classCallCheck(this, Person); this.name = name; };</code></pre>
                        <p class="mt-2 text-xs text-gray-600">æ³¨æ„ï¼šå®é™…çš„ Babel è¾“å‡ºå¯èƒ½æ›´å¤æ‚ï¼Œå¹¶å¯èƒ½åŒ…å«è¾…åŠ©å‡½æ•°ã€‚</p>
                         <p class="mt-4">Babel çš„å·¥ä½œæµç¨‹ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š</p>
                         <ol class="list-decimal list-inside space-y-1 text-sm mt-2">
                             <li><strong>è§£æ (Parsing):</strong> ä½¿ç”¨è§£æå™¨ (å¦‚ <code>@babel/parser</code>) å°†æºä»£ç è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ (AST)ã€‚</li>
                             <li><strong>è½¬æ¢ (Transformation):</strong> ä½¿ç”¨è½¬æ¢å™¨ (å¦‚ <code>@babel/traverse</code>) éå† ASTï¼Œå¹¶åº”ç”¨ä¸€ç³»åˆ—é¢„è®¾ (Presets) å’Œæ’ä»¶ (Plugins) æ¥ä¿®æ”¹ ASTã€‚</li>
                             <li><strong>ç”Ÿæˆ (Generation):</strong> ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨ (å¦‚ <code>@babel/generator</code>) å°†ä¿®æ”¹åçš„ AST è½¬æ¢å›ä»£ç å­—ç¬¦ä¸²ï¼Œå¹¶å¯ç”Ÿæˆ Source Mapsã€‚</li>
                         </ol>
                         <div class="mermaid text-center my-4 p-2 border rounded bg-white shadow-sm">
                            graph TD
                            A["Source Code (ES6+)"] --> B["Parsing: @babel/parser"]
                            B --> C["AST"]
                            C --> D["Transformation: @babel/traverse, Plugins/Presets"]
                            D --> E["Modified AST"]
                            E --> F["Generation: @babel/generator"]
                            F --> G["Output Code (ES5)"]
                            F --> H["Source Map"]
                        
                            style C fill:#fef9c3,stroke:#a16207
                            style E fill:#fef9c3,stroke:#a16207
                        
                         </div>
                    </div>
                     <section id="babel-config" class="fade-in-section" style="animation-delay: 0.35s;">
                         <div class="content-card">
                             <h3 class="head3">é…ç½®ç®€ä»‹</h3>
                             <p>Babel çš„è¡Œä¸ºé€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>babel.config.js</code> æˆ– <code>.babelrc</code>ï¼‰æ¥æ§åˆ¶ï¼Œä¸»è¦é…ç½®é¡¹æ˜¯ <code>presets</code> å’Œ <code>plugins</code>ã€‚</p>
                             <ul class="list-disc list-inside space-y-2 text-sm mt-2">
                                 <li><strong>Presets (é¢„è®¾):</strong> ä¸€ç»„é¢„å…ˆé…ç½®å¥½çš„æ’ä»¶é›†åˆï¼Œç”¨äºæ”¯æŒç‰¹å®šçš„è¯­è¨€ç‰¹æ€§ã€‚æœ€å¸¸ç”¨çš„æ˜¯ <code>@babel/preset-env</code>ã€‚</li>
                                 <li>
                                     <strong><code>@babel/preset-env</code>:</strong> ä¸€ä¸ªæ™ºèƒ½é¢„è®¾ï¼Œå…è®¸ä½ æŒ‡å®šç›®æ ‡ç¯å¢ƒï¼ˆå¦‚æµè§ˆå™¨ç‰ˆæœ¬åˆ—è¡¨æˆ– Node.js ç‰ˆæœ¬ï¼‰ï¼Œå®ƒä¼šè‡ªåŠ¨ç¡®å®šæ‰€éœ€çš„ Babel æ’ä»¶å’Œ Polyfill æ¥è½¬æ¢ä»£ç ã€‚
                                     <ul class="list-['-_'] list-inside ml-4 mt-1 text-xs text-gray-600">
                                         <li><code>targets</code>: æŒ‡å®šç›®æ ‡ç¯å¢ƒ (e.g., <code>"defaults"</code>, <code>"> 0.25%, not dead"</code>, <code>{ "chrome": "58", "ie": "11" }</code>)ã€‚</li>
                                         <li><code>useBuiltIns</code>: æ§åˆ¶å¦‚ä½•å¤„ç† Polyfill (é€šå¸¸é…åˆ <code>core-js</code>)ã€‚<code>"usage"</code> ä¼šæŒ‰éœ€å¼•å…¥ä»£ç ä¸­å®é™…ç”¨åˆ°çš„ Polyfillï¼›<code>"entry"</code> éœ€è¦åœ¨å…¥å£æ–‡ä»¶æ‰‹åŠ¨å¼•å…¥ <code>core-js</code>ã€‚</li>
                                         <li><code>corejs</code>: æŒ‡å®šä½¿ç”¨çš„ <code>core-js</code> ç‰ˆæœ¬ã€‚</li>
                                     </ul>
                                 </li>
                                 <li><strong>Plugins (æ’ä»¶):</strong> ç”¨äºå¯ç”¨æˆ–é…ç½®æ›´ç»†ç²’åº¦çš„è¯­æ³•è½¬æ¢ã€‚æ’ä»¶åœ¨ Presets ä¹‹å‰è¿è¡Œã€‚ä¾‹å¦‚ï¼Œ<code>@babel/plugin-transform-runtime</code> ç”¨äºé¿å… Polyfill æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼Œå¹¶å¤ç”¨è¾…åŠ©å‡½æ•°ã€‚</li>
                             </ul>
                             <pre><code class="language-javascript">// babel.config.js (Example)
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: "> 0.25%, not dead", // å®šä¹‰ç›®æ ‡æµè§ˆå™¨
        useBuiltIns: 'usage', // æŒ‰éœ€å¼•å…¥ polyfill
        corejs: 3 // æŒ‡å®š core-js ç‰ˆæœ¬
      }
    ]
  ],
  plugins: [
    // '@babel/plugin-transform-runtime' // å¯é€‰æ’ä»¶
  ]
};</code></pre>
                         </div>
                    </section>
                     <div class="quiz-card mt-6" id="quiz-babel">
                        <div class="quiz-question"><span class="material-icons mr-1">quiz</span>Babel æµ‹éªŒï¼šBabel ä¸»è¦é€šè¿‡ä»€ä¹ˆæœºåˆ¶æ¥æä¾›ç›®æ ‡ç¯å¢ƒä¸­ç¼ºå¤±çš„ JavaScript æ–°åŠŸèƒ½ï¼ˆå¦‚ Promise, Array.includesï¼‰ï¼Ÿ</div>
                        <div class="quiz-options">
                            <label class="quiz-option"><input type="radio" name="q_babel" value="a"><span>è¯­æ³•è½¬æ¢ (Syntax Transformation)</span></label>
                            <label class="quiz-option"><input type="radio" name="q_babel" value="b"><span>æŠ½è±¡è¯­æ³•æ ‘ (AST)</span></label>
                            <label class="quiz-option"><input type="radio" name="q_babel" value="c"><span>Presets (é¢„è®¾)</span></label>
                            <label class="quiz-option"><input type="radio" name="q_babel" value="d"><span>Polyfill (å«ç‰‡)</span></label>
                        </div>
                        <div class="quiz-feedback mt-4" id="feedback-q_babel"></div>
                        <button class="quiz-toggle button button-secondary mt-4" onclick="checkAnswer('q_babel', 'd')">
                            <span class="material-icons icon-arrow">expand_more</span><span class="button-text">æ£€æŸ¥ç­”æ¡ˆ</span>
                        </button>
                        <div class="quiz-answer" style="display: none;">
                            <p><strong>ç­”æ¡ˆ:</strong> D. Polyfill (å«ç‰‡)</p>
                            <p><strong>è§£æ:</strong> Babel çš„è¯­æ³•è½¬æ¢ä¸»è¦å¤„ç†æ–°çš„è¯­æ³•ç»“æ„ï¼ˆå¦‚ç®­å¤´å‡½æ•°è½¬æ™®é€šå‡½æ•°ï¼‰ã€‚å¯¹äº JavaScript å¼•æ“æœ¬èº«ç¼ºå¤±çš„æ–°å†…ç½®å‡½æ•°ã€å¯¹è±¡æˆ–æ–¹æ³•ï¼ˆå¦‚ <code>Promise</code>, <code>Map</code>, <code>String.prototype.padStart</code>ï¼‰ï¼Œéœ€è¦é€šè¿‡ Polyfillï¼ˆé€šå¸¸æ˜¯åƒ <code>core-js</code> è¿™æ ·çš„åº“ï¼‰æ¥æä¾›å®ç°ï¼Œä»¥ç¡®ä¿ä»£ç åœ¨æ—§ç¯å¢ƒä¸­ä¹Ÿèƒ½è¿è¡Œã€‚Babel (ç‰¹åˆ«æ˜¯ <code>@babel/preset-env</code>) å¯ä»¥å¸®åŠ©æŒ‰éœ€å¼•å…¥æ‰€éœ€çš„ Polyfillã€‚</p>
                        </div>
                    </div>
                </section>

            </article>
        </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });

        // --- Ripple Effect Logic ---
        function createRipple(event) {
            const button = event.currentTarget;
            if (!button || typeof button.getBoundingClientRect !== 'function') return;
            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            // Attempt to get RGB from CSS variable, fallback if needed
            let primaryColorRgb = '59, 130, 246'; // Default blue-500
            try {
                 const rgbValue = getComputedStyle(document.documentElement).getPropertyValue('--primary-color-rgb').trim();
                 if (rgbValue) primaryColorRgb = rgbValue;
            } catch(e) { console.warn("Could not read --primary-color-rgb, using default."); }

            circle.style.width = circle.style.height = `${diameter}px`;
            const rect = button.getBoundingClientRect();
            circle.style.left = `${event.clientX - rect.left - radius}px`;
            circle.style.top = `${event.clientY - rect.top - radius}px`;
            circle.style.backgroundColor = `rgba(${primaryColorRgb}, 0.4)`;
            circle.classList.add("ripple");
            const existingRipple = button.querySelector(".ripple");
            if (existingRipple) existingRipple.remove();
            button.appendChild(circle);
            setTimeout(() => circle.remove(), 600); // Remove ripple after animation
        }

         // --- Quiz Toggle Logic ---
        function toggleAnswer(quizId, buttonElement) {
            const quizCard = document.getElementById(quizId);
            if (!quizCard) return;
            const answer = quizCard.querySelector('.quiz-answer');
            const icon = buttonElement.querySelector('.icon-arrow');
            const buttonTextSpan = buttonElement.querySelector('.button-text');
            if (!answer || !icon || !buttonTextSpan) return;
            const isVisible = answer.classList.contains('visible');
            if (isVisible) {
                // Hide
                answer.style.maxHeight = '0';
                answer.style.opacity = '0';
                answer.style.marginTop = '0';
                answer.style.paddingTop = '0';
                answer.style.paddingBottom = '0';
                answer.classList.remove('visible');
                icon.classList.remove('rotated');
                buttonTextSpan.textContent = ' æŸ¥çœ‹ç­”æ¡ˆ'; // Change text back
                setTimeout(() => {
                    if (!answer.classList.contains('visible')) {
                         // Reset styles after transition for clean state
                         answer.style.removeProperty('max-height');
                         answer.style.removeProperty('opacity');
                         answer.style.removeProperty('margin-top');
                         answer.style.removeProperty('padding-top');
                         answer.style.removeProperty('padding-bottom');
                         answer.style.display = 'none'; // Explicitly hide after transition
                    }
                }, 500); // Match transition duration
            } else {
                // Show
                answer.style.display = 'block'; // Make it visible to measure scrollHeight
                answer.style.paddingTop = '1rem'; // Apply padding before measuring
                answer.style.paddingBottom = '1rem';
                answer.style.marginTop = '1rem'; // Apply margin before measuring
                requestAnimationFrame(() => { // Wait for styles to apply
                    answer.style.maxHeight = answer.scrollHeight + 'px'; // Set max-height for transition
                    answer.style.opacity = '1';
                    answer.classList.add('visible');
                    icon.classList.add('rotated');
                    buttonTextSpan.textContent = ' éšè—ç­”æ¡ˆ'; // Change text
                });
            }
        }

        // --- Quiz Check Answer Logic ---
        function checkAnswer(questionName, correctAnswerValue) {
            const options = document.querySelectorAll(`input[name="${questionName}"]`);
            const feedbackElement = document.getElementById(`feedback-${questionName}`);
            const quizCard = feedbackElement ? feedbackElement.closest('.quiz-card') : null;
            const toggleButton = quizCard?.querySelector('.quiz-toggle'); // Find the toggle button
            let selectedValue = null;
            let selectedLabel = null;

            if (!feedbackElement || !quizCard || !toggleButton) return;

            // Reset previous feedback and styles
            quizCard.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));

            options.forEach(option => {
                if (option.checked) {
                    selectedValue = option.value;
                    selectedLabel = option.closest('.quiz-option');
                    if (selectedLabel) selectedLabel.classList.add('selected');
                }
            });

            if (!selectedValue) {
                feedbackElement.textContent = "è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼";
                feedbackElement.className = 'quiz-feedback warning';
                feedbackElement.style.display = 'block';
                return; // Don't proceed if nothing selected
            }

            let correctAnswerLabel = null;
            options.forEach(opt => { if (opt.value === correctAnswerValue) correctAnswerLabel = opt.closest('.quiz-option'); });

            // Provide feedback
            if (selectedValue === correctAnswerValue) {
                feedbackElement.textContent = "å›ç­”æ­£ç¡®ï¼";
                feedbackElement.className = 'quiz-feedback correct';
                if(selectedLabel) selectedLabel.classList.add('correct');
            } else {
                let correctAnswerText = '';
                if (correctAnswerLabel) {
                    correctAnswerText = correctAnswerLabel.querySelector('span')?.textContent || `é€‰é¡¹ ${correctAnswerValue}`;
                    correctAnswerLabel.classList.add('correct'); // Highlight correct answer
                }
                feedbackElement.textContent = `å›ç­”é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯: "${correctAnswerText}"`;
                feedbackElement.className = 'quiz-feedback incorrect';
                if(selectedLabel) selectedLabel.classList.add('incorrect'); // Mark selected as incorrect
            }
            feedbackElement.style.display = 'block'; // Show feedback

            // Automatically toggle the answer section open when checking
            const answerSection = quizCard.querySelector('.quiz-answer');
             if (answerSection && !answerSection.classList.contains('visible')) {
                 toggleAnswer(quizCard.id, toggleButton);
             }
        }


        // --- TOC Highlighting & Fade-in Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('main section[id]');
            const tocLinks = document.querySelectorAll('#local-toc a');
            let lastActiveTocLink = null;

            const tocObserverOptions = { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 };

            const tocObserverCallback = (entries) => {
                let bestVisibleEntry = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!bestVisibleEntry || entry.boundingClientRect.top < bestVisibleEntry.boundingClientRect.top) {
                            bestVisibleEntry = entry;
                        }
                    }
                });

                if (bestVisibleEntry) {
                    const id = bestVisibleEntry.target.getAttribute('id');
                    // Try to find a direct match first, then check if it's a sub-section link
                    let activeLink = document.querySelector(`#local-toc a[href="#${id}"]`);
                    if (!activeLink) {
                        // If no direct match, find the parent section ID (e.g., 'webpack' from 'webpack-concepts')
                        const parentId = id.split('-')[0];
                         activeLink = document.querySelector(`#local-toc a[href="#${parentId}"]`);
                    }

                    if (activeLink && activeLink !== lastActiveTocLink) {
                        if (lastActiveTocLink) lastActiveTocLink.classList.remove('active');
                        activeLink.classList.add('active');
                        lastActiveTocLink = activeLink;
                    }
                }
            };

            const tocObserver = new IntersectionObserver(tocObserverCallback, tocObserverOptions);
            sections.forEach(section => tocObserver.observe(section));

            // Initial active link check
            const currentHash = window.location.hash;
            if (currentHash) {
                const initialActiveLink = document.querySelector(`#local-toc a[href="${currentHash}"]`);
                if (initialActiveLink) {
                    tocLinks.forEach(link => link.classList.remove('active'));
                    initialActiveLink.classList.add('active');
                    lastActiveTocLink = initialActiveLink;
                }
            } else if (tocLinks.length > 0 && !lastActiveTocLink) {
                 tocLinks.forEach(link => link.classList.remove('active'));
                 tocLinks[0].classList.add('active');
                 lastActiveTocLink = tocLinks[0];
            }

            // Fade-in Animation Logic
            const mainContentSections = document.querySelectorAll('main > article > section.content-section');
            const fadeObserverOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const fadeObserverCallback = (entries, observer) => {
                entries.forEach((entry) => {
                     const delayIndex = Array.from(mainContentSections).indexOf(entry.target);
                    if (entry.isIntersecting) {
                        entry.target.style.animationDelay = `${delayIndex * 0.05}s`;
                        entry.target.classList.add('fade-in-section');
                        observer.unobserve(entry.target);
                    }
                });
            };
            const fadeObserver = new IntersectionObserver(fadeObserverCallback, fadeObserverOptions);
            mainContentSections.forEach(section => fadeObserver.observe(section));

             // --- Tooltip Activation CSS Injection ---
             const tooltipTermStyle = `
                .tooltip-term { border-bottom: 1px dotted var(--primary-color); cursor: help; position: relative; color: var(--primary-color-dark); font-weight: 500; }
                .tooltip-term::before { content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%) translateY(-8px); background-color: rgba(31, 41, 55, 0.9); color: white; padding: 0.4rem 0.75rem; border-radius: 4px; font-size: 0.8rem; white-space: nowrap; opacity: 0; visibility: hidden; transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out; z-index: 10; pointer-events: none; }
                .tooltip-term::after { content: ''; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%) translateY(0px); border-width: 5px; border-style: solid; border-color: rgba(31, 41, 55, 0.9) transparent transparent transparent; opacity: 0; visibility: hidden; transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out; z-index: 10; pointer-events: none; }
                .tooltip-term:hover::before, .tooltip-term:hover::after { opacity: 1; visibility: visible; }
             `;
             const styleSheet = document.createElement("style");
             styleSheet.type = "text/css";
             styleSheet.innerText = tooltipTermStyle;
             document.head.appendChild(styleSheet);

             // --- Attach Ripple Effect & Quiz Toggle Listeners ---
             document.querySelectorAll('.button, .quiz-toggle').forEach(button => {
                 button.addEventListener('click', createRipple);

                 // Attach toggle logic specifically to quiz toggle buttons
                 if (button.classList.contains('quiz-toggle')) {
                     const quizCard = button.closest('.quiz-card');
                     const quizId = quizCard?.id;
                     if (quizId) {
                         // The onclick in HTML handles checkAnswer, which now also calls toggleAnswer.
                         // If we had a separate toggle button, we'd add the listener here:
                         // button.addEventListener('click', () => toggleAnswer(quizId, button));
                     }
                 }
             });

        }); // End of DOMContentLoaded listener
    </script>

</body>

</html>
